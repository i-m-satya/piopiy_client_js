var piopiyjs=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=47)}([function(t,e,n){"use strict";(function(t){n.d(e,"e",(function(){return r})),n.d(e,"p",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"o",(function(){return a})),n.d(e,"q",(function(){return l})),n.d(e,"t",(function(){return c})),n.d(e,"i",(function(){return f})),n.d(e,"r",(function(){return h})),n.d(e,"s",(function(){return d})),n.d(e,"k",(function(){return p})),n.d(e,"m",(function(){return _})),n.d(e,"j",(function(){return v})),n.d(e,"l",(function(){return g})),n.d(e,"g",(function(){return m})),n.d(e,"f",(function(){return y})),n.d(e,"h",(function(){return b})),n.d(e,"n",(function(){return T})),n.d(e,"b",(function(){return E}));var r="1.13.4",i="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||Function("return this")()||{},o=Array.prototype,s=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,a=o.push,l=o.slice,c=s.toString,f=s.hasOwnProperty,h="undefined"!=typeof ArrayBuffer,d="undefined"!=typeof DataView,p=Array.isArray,_=Object.keys,v=Object.create,g=h&&ArrayBuffer.isView,m=isNaN,y=isFinite,b=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],E=Math.pow(2,53)-1}).call(this,n(24))},function(t,e,n){(function(t,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",s="__lodash_placeholder__",u=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",l="[object Array]",c="[object Boolean]",f="[object Date]",h="[object Error]",d="[object Function]",p="[object GeneratorFunction]",_="[object Map]",v="[object Number]",g="[object Object]",m="[object RegExp]",y="[object Set]",b="[object String]",T="[object Symbol]",E="[object WeakMap]",w="[object ArrayBuffer]",A="[object DataView]",S="[object Float32Array]",C="[object Float64Array]",R="[object Int8Array]",O="[object Int16Array]",I="[object Int32Array]",k="[object Uint8Array]",x="[object Uint16Array]",N="[object Uint32Array]",P=/\b__p \+= '';/g,D=/\b(__p \+=) '' \+/g,U=/(__e\(.*?\)|\b__t\)) \+\n'';/g,L=/&(?:amp|lt|gt|quot|#39);/g,j=/[&<>"']/g,M=RegExp(L.source),q=RegExp(j.source),F=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,B=/<%=([\s\S]+?)%>/g,W=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z=/^\w*$/,V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,G=RegExp(Y.source),K=/^\s+|\s+$/g,$=/^\s+/,J=/\s+$/,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Q=/\{\n\/\* \[wrapped with (.+)\] \*/,Z=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,et=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,st=/^\[object .+?Constructor\]$/,ut=/^0o[0-7]+$/i,at=/^(?:0|[1-9]\d*)$/,lt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,ft=/['\n\r\u2028\u2029\\]/g,ht="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="[\\ud800-\\udfff]",_t="["+dt+"]",vt="["+ht+"]",gt="\\d+",mt="[\\u2700-\\u27bf]",yt="[a-z\\xdf-\\xf6\\xf8-\\xff]",bt="[^\\ud800-\\udfff"+dt+gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Tt="\\ud83c[\\udffb-\\udfff]",Et="[^\\ud800-\\udfff]",wt="(?:\\ud83c[\\udde6-\\uddff]){2}",At="[\\ud800-\\udbff][\\udc00-\\udfff]",St="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ct="(?:"+yt+"|"+bt+")",Rt="(?:"+St+"|"+bt+")",Ot="(?:"+vt+"|"+Tt+")"+"?",It="[\\ufe0e\\ufe0f]?"+Ot+("(?:\\u200d(?:"+[Et,wt,At].join("|")+")[\\ufe0e\\ufe0f]?"+Ot+")*"),kt="(?:"+[mt,wt,At].join("|")+")"+It,xt="(?:"+[Et+vt+"?",vt,wt,At,pt].join("|")+")",Nt=RegExp("['’]","g"),Pt=RegExp(vt,"g"),Dt=RegExp(Tt+"(?="+Tt+")|"+xt+It,"g"),Ut=RegExp([St+"?"+yt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[_t,St,"$"].join("|")+")",Rt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[_t,St+Ct,"$"].join("|")+")",St+"?"+Ct+"+(?:['’](?:d|ll|m|re|s|t|ve))?",St+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gt,kt].join("|"),"g"),Lt=RegExp("[\\u200d\\ud800-\\udfff"+ht+"\\ufe0e\\ufe0f]"),jt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],qt=-1,Ft={};Ft[S]=Ft[C]=Ft[R]=Ft[O]=Ft[I]=Ft[k]=Ft["[object Uint8ClampedArray]"]=Ft[x]=Ft[N]=!0,Ft[a]=Ft[l]=Ft[w]=Ft[c]=Ft[A]=Ft[f]=Ft[h]=Ft[d]=Ft[_]=Ft[v]=Ft[g]=Ft[m]=Ft[y]=Ft[b]=Ft[E]=!1;var Ht={};Ht[a]=Ht[l]=Ht[w]=Ht[A]=Ht[c]=Ht[f]=Ht[S]=Ht[C]=Ht[R]=Ht[O]=Ht[I]=Ht[_]=Ht[v]=Ht[g]=Ht[m]=Ht[y]=Ht[b]=Ht[T]=Ht[k]=Ht["[object Uint8ClampedArray]"]=Ht[x]=Ht[N]=!0,Ht[h]=Ht[d]=Ht[E]=!1;var Bt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wt=parseFloat,zt=parseInt,Vt="object"==typeof t&&t&&t.Object===Object&&t,Yt="object"==typeof self&&self&&self.Object===Object&&self,Gt=Vt||Yt||Function("return this")(),Kt=e&&!e.nodeType&&e,$t=Kt&&"object"==typeof r&&r&&!r.nodeType&&r,Jt=$t&&$t.exports===Kt,Xt=Jt&&Vt.process,Qt=function(){try{var t=$t&&$t.require&&$t.require("util").types;return t||Xt&&Xt.binding&&Xt.binding("util")}catch(t){}}(),Zt=Qt&&Qt.isArrayBuffer,te=Qt&&Qt.isDate,ee=Qt&&Qt.isMap,ne=Qt&&Qt.isRegExp,re=Qt&&Qt.isSet,ie=Qt&&Qt.isTypedArray;function oe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function se(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function ue(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ae(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function le(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ce(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function fe(t,e){return!!(null==t?0:t.length)&&Te(t,e,0)>-1}function he(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function de(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function pe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function _e(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function ve(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ge(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var me=Se("length");function ye(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function be(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Te(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):be(t,we,n)}function Ee(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function we(t){return t!=t}function Ae(t,e){var n=null==t?0:t.length;return n?Oe(t,e)/n:NaN}function Se(t){return function(e){return null==e?void 0:e[t]}}function Ce(t){return function(e){return null==t?void 0:t[e]}}function Re(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Oe(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ie(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function ke(t){return function(e){return t(e)}}function xe(t,e){return de(e,(function(e){return t[e]}))}function Ne(t,e){return t.has(e)}function Pe(t,e){for(var n=-1,r=t.length;++n<r&&Te(e,t[n],0)>-1;);return n}function De(t,e){for(var n=t.length;n--&&Te(e,t[n],0)>-1;);return n}function Ue(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Le=Ce({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),je=Ce({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Me(t){return"\\"+Bt[t]}function qe(t){return Lt.test(t)}function Fe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function He(t,e){return function(n){return t(e(n))}}function Be(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var u=t[n];u!==e&&u!==s||(t[n]=s,o[i++]=n)}return o}function We(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function ze(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function Ve(t){return qe(t)?function(t){var e=Dt.lastIndex=0;for(;Dt.test(t);)++e;return e}(t):me(t)}function Ye(t){return qe(t)?function(t){return t.match(Dt)||[]}(t):function(t){return t.split("")}(t)}var Ge=Ce({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ke=function t(e){var n,r=(e=null==e?Gt:Ke.defaults(Gt.Object(),e,Ke.pick(Gt,Mt))).Array,i=e.Date,ht=e.Error,dt=e.Function,pt=e.Math,_t=e.Object,vt=e.RegExp,gt=e.String,mt=e.TypeError,yt=r.prototype,bt=dt.prototype,Tt=_t.prototype,Et=e["__core-js_shared__"],wt=bt.toString,At=Tt.hasOwnProperty,St=0,Ct=(n=/[^.]+$/.exec(Et&&Et.keys&&Et.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Rt=Tt.toString,Ot=wt.call(_t),It=Gt._,kt=vt("^"+wt.call(At).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xt=Jt?e.Buffer:void 0,Dt=e.Symbol,Lt=e.Uint8Array,Bt=xt?xt.allocUnsafe:void 0,Vt=He(_t.getPrototypeOf,_t),Yt=_t.create,Kt=Tt.propertyIsEnumerable,$t=yt.splice,Xt=Dt?Dt.isConcatSpreadable:void 0,Qt=Dt?Dt.iterator:void 0,me=Dt?Dt.toStringTag:void 0,Ce=function(){try{var t=Zi(_t,"defineProperty");return t({},"",{}),t}catch(t){}}(),$e=e.clearTimeout!==Gt.clearTimeout&&e.clearTimeout,Je=i&&i.now!==Gt.Date.now&&i.now,Xe=e.setTimeout!==Gt.setTimeout&&e.setTimeout,Qe=pt.ceil,Ze=pt.floor,tn=_t.getOwnPropertySymbols,en=xt?xt.isBuffer:void 0,nn=e.isFinite,rn=yt.join,on=He(_t.keys,_t),sn=pt.max,un=pt.min,an=i.now,ln=e.parseInt,cn=pt.random,fn=yt.reverse,hn=Zi(e,"DataView"),dn=Zi(e,"Map"),pn=Zi(e,"Promise"),_n=Zi(e,"Set"),vn=Zi(e,"WeakMap"),gn=Zi(_t,"create"),mn=vn&&new vn,yn={},bn=Ro(hn),Tn=Ro(dn),En=Ro(pn),wn=Ro(_n),An=Ro(vn),Sn=Dt?Dt.prototype:void 0,Cn=Sn?Sn.valueOf:void 0,Rn=Sn?Sn.toString:void 0;function On(t){if(zs(t)&&!Ps(t)&&!(t instanceof Nn)){if(t instanceof xn)return t;if(At.call(t,"__wrapped__"))return Oo(t)}return new xn(t)}var In=function(){function t(){}return function(e){if(!Ws(e))return{};if(Yt)return Yt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function kn(){}function xn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Nn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Pn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Dn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ln(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Un;++e<n;)this.add(t[e])}function jn(t){var e=this.__data__=new Dn(t);this.size=e.size}function Mn(t,e){var n=Ps(t),r=!n&&Ns(t),i=!n&&!r&&js(t),o=!n&&!r&&!i&&Qs(t),s=n||r||i||o,u=s?Ie(t.length,gt):[],a=u.length;for(var l in t)!e&&!At.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||so(l,a))||u.push(l);return u}function qn(t){var e=t.length;return e?t[Lr(0,e-1)]:void 0}function Fn(t,e){return Ao(gi(t),$n(e,0,t.length))}function Hn(t){return Ao(gi(t))}function Bn(t,e,n){(void 0===n||Is(t[e],n))&&(void 0!==n||e in t)||Gn(t,e,n)}function Wn(t,e,n){var r=t[e];At.call(t,e)&&Is(r,n)&&(void 0!==n||e in t)||Gn(t,e,n)}function zn(t,e){for(var n=t.length;n--;)if(Is(t[n][0],e))return n;return-1}function Vn(t,e,n,r){return tr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function Yn(t,e){return t&&mi(e,bu(e),t)}function Gn(t,e,n){"__proto__"==e&&Ce?Ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Kn(t,e){for(var n=-1,i=e.length,o=r(i),s=null==t;++n<i;)o[n]=s?void 0:_u(t,e[n]);return o}function $n(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Jn(t,e,n,r,i,o){var s,u=1&e,l=2&e,h=4&e;if(n&&(s=i?n(t,r,i,o):n(t)),void 0!==s)return s;if(!Ws(t))return t;var E=Ps(t);if(E){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&At.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return gi(t,s)}else{var P=no(t),D=P==d||P==p;if(js(t))return fi(t,u);if(P==g||P==a||D&&!i){if(s=l||D?{}:io(t),!u)return l?function(t,e){return mi(t,eo(t),e)}(t,function(t,e){return t&&mi(e,Tu(e),t)}(s,t)):function(t,e){return mi(t,to(t),e)}(t,Yn(s,t))}else{if(!Ht[P])return i?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case w:return hi(t);case c:case f:return new r(+t);case A:return function(t,e){var n=e?hi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case S:case C:case R:case O:case I:case k:case"[object Uint8ClampedArray]":case x:case N:return di(t,n);case _:return new r;case v:case b:return new r(t);case m:return function(t){var e=new t.constructor(t.source,rt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case y:return new r;case T:return i=t,Cn?_t(Cn.call(i)):{}}var i}(t,P,u)}}o||(o=new jn);var U=o.get(t);if(U)return U;o.set(t,s),$s(t)?t.forEach((function(r){s.add(Jn(r,e,n,r,t,o))})):Vs(t)&&t.forEach((function(r,i){s.set(i,Jn(r,e,n,i,t,o))}));var L=E?void 0:(h?l?Yi:Vi:l?Tu:bu)(t);return ue(L||t,(function(r,i){L&&(r=t[i=r]),Wn(s,i,Jn(r,e,n,i,t,o))})),s}function Xn(t,e,n){var r=n.length;if(null==t)return!r;for(t=_t(t);r--;){var i=n[r],o=e[i],s=t[i];if(void 0===s&&!(i in t)||!o(s))return!1}return!0}function Qn(t,e,n){if("function"!=typeof t)throw new mt(o);return bo((function(){t.apply(void 0,n)}),e)}function Zn(t,e,n,r){var i=-1,o=fe,s=!0,u=t.length,a=[],l=e.length;if(!u)return a;n&&(e=de(e,ke(n))),r?(o=he,s=!1):e.length>=200&&(o=Ne,s=!1,e=new Ln(e));t:for(;++i<u;){var c=t[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,s&&f==f){for(var h=l;h--;)if(e[h]===f)continue t;a.push(c)}else o(e,f,r)||a.push(c)}return a}On.templateSettings={escape:F,evaluate:H,interpolate:B,variable:"",imports:{_:On}},On.prototype=kn.prototype,On.prototype.constructor=On,xn.prototype=In(kn.prototype),xn.prototype.constructor=xn,Nn.prototype=In(kn.prototype),Nn.prototype.constructor=Nn,Pn.prototype.clear=function(){this.__data__=gn?gn(null):{},this.size=0},Pn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Pn.prototype.get=function(t){var e=this.__data__;if(gn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return At.call(e,t)?e[t]:void 0},Pn.prototype.has=function(t){var e=this.__data__;return gn?void 0!==e[t]:At.call(e,t)},Pn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=gn&&void 0===e?"__lodash_hash_undefined__":e,this},Dn.prototype.clear=function(){this.__data__=[],this.size=0},Dn.prototype.delete=function(t){var e=this.__data__,n=zn(e,t);return!(n<0)&&(n==e.length-1?e.pop():$t.call(e,n,1),--this.size,!0)},Dn.prototype.get=function(t){var e=this.__data__,n=zn(e,t);return n<0?void 0:e[n][1]},Dn.prototype.has=function(t){return zn(this.__data__,t)>-1},Dn.prototype.set=function(t,e){var n=this.__data__,r=zn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Un.prototype.clear=function(){this.size=0,this.__data__={hash:new Pn,map:new(dn||Dn),string:new Pn}},Un.prototype.delete=function(t){var e=Xi(this,t).delete(t);return this.size-=e?1:0,e},Un.prototype.get=function(t){return Xi(this,t).get(t)},Un.prototype.has=function(t){return Xi(this,t).has(t)},Un.prototype.set=function(t,e){var n=Xi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ln.prototype.add=Ln.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ln.prototype.has=function(t){return this.__data__.has(t)},jn.prototype.clear=function(){this.__data__=new Dn,this.size=0},jn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},jn.prototype.get=function(t){return this.__data__.get(t)},jn.prototype.has=function(t){return this.__data__.has(t)},jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Dn){var r=n.__data__;if(!dn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Un(r)}return n.set(t,e),this.size=n.size,this};var tr=Ti(ar),er=Ti(lr,!0);function nr(t,e){var n=!0;return tr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function rr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(void 0===u?s==s&&!Xs(s):n(s,u)))var u=s,a=o}return a}function ir(t,e){var n=[];return tr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function or(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=oo),i||(i=[]);++o<s;){var u=t[o];e>0&&n(u)?e>1?or(u,e-1,n,r,i):pe(i,u):r||(i[i.length]=u)}return i}var sr=Ei(),ur=Ei(!0);function ar(t,e){return t&&sr(t,e,bu)}function lr(t,e){return t&&ur(t,e,bu)}function cr(t,e){return ce(e,(function(e){return Fs(t[e])}))}function fr(t,e){for(var n=0,r=(e=ui(e,t)).length;null!=t&&n<r;)t=t[Co(e[n++])];return n&&n==r?t:void 0}function hr(t,e,n){var r=e(t);return Ps(t)?r:pe(r,n(t))}function dr(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":me&&me in _t(t)?function(t){var e=At.call(t,me),n=t[me];try{t[me]=void 0;var r=!0}catch(t){}var i=Rt.call(t);r&&(e?t[me]=n:delete t[me]);return i}(t):function(t){return Rt.call(t)}(t)}function pr(t,e){return t>e}function _r(t,e){return null!=t&&At.call(t,e)}function vr(t,e){return null!=t&&e in _t(t)}function gr(t,e,n){for(var i=n?he:fe,o=t[0].length,s=t.length,u=s,a=r(s),l=1/0,c=[];u--;){var f=t[u];u&&e&&(f=de(f,ke(e))),l=un(f.length,l),a[u]=!n&&(e||o>=120&&f.length>=120)?new Ln(u&&f):void 0}f=t[0];var h=-1,d=a[0];t:for(;++h<o&&c.length<l;){var p=f[h],_=e?e(p):p;if(p=n||0!==p?p:0,!(d?Ne(d,_):i(c,_,n))){for(u=s;--u;){var v=a[u];if(!(v?Ne(v,_):i(t[u],_,n)))continue t}d&&d.push(_),c.push(p)}}return c}function mr(t,e,n){var r=null==(t=vo(t,e=ui(e,t)))?t:t[Co(qo(e))];return null==r?void 0:oe(r,t,n)}function yr(t){return zs(t)&&dr(t)==a}function br(t,e,n,r,i){return t===e||(null==t||null==e||!zs(t)&&!zs(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var s=Ps(t),u=Ps(e),d=s?l:no(t),p=u?l:no(e),E=(d=d==a?g:d)==g,S=(p=p==a?g:p)==g,C=d==p;if(C&&js(t)){if(!js(e))return!1;s=!0,E=!1}if(C&&!E)return o||(o=new jn),s||Qs(t)?Wi(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case A:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!o(new Lt(t),new Lt(e)));case c:case f:case v:return Is(+t,+e);case h:return t.name==e.name&&t.message==e.message;case m:case b:return t==e+"";case _:var u=Fe;case y:var a=1&r;if(u||(u=We),t.size!=e.size&&!a)return!1;var l=s.get(t);if(l)return l==e;r|=2,s.set(t,e);var d=Wi(u(t),u(e),r,i,o,s);return s.delete(t),d;case T:if(Cn)return Cn.call(t)==Cn.call(e)}return!1}(t,e,d,n,r,i,o);if(!(1&n)){var R=E&&At.call(t,"__wrapped__"),O=S&&At.call(e,"__wrapped__");if(R||O){var I=R?t.value():t,k=O?e.value():e;return o||(o=new jn),i(I,k,n,r,o)}}if(!C)return!1;return o||(o=new jn),function(t,e,n,r,i,o){var s=1&n,u=Vi(t),a=u.length,l=Vi(e).length;if(a!=l&&!s)return!1;var c=a;for(;c--;){var f=u[c];if(!(s?f in e:At.call(e,f)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var d=!0;o.set(t,e),o.set(e,t);var p=s;for(;++c<a;){f=u[c];var _=t[f],v=e[f];if(r)var g=s?r(v,_,f,e,t,o):r(_,v,f,t,e,o);if(!(void 0===g?_===v||i(_,v,n,r,o):g)){d=!1;break}p||(p="constructor"==f)}if(d&&!p){var m=t.constructor,y=e.constructor;m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,r,i,o)}(t,e,n,r,br,i))}function Tr(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=_t(t);i--;){var u=n[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var a=(u=n[i])[0],l=t[a],c=u[1];if(s&&u[2]){if(void 0===l&&!(a in t))return!1}else{var f=new jn;if(r)var h=r(l,c,a,t,e,f);if(!(void 0===h?br(c,l,3,r,f):h))return!1}}return!0}function Er(t){return!(!Ws(t)||(e=t,Ct&&Ct in e))&&(Fs(t)?kt:st).test(Ro(t));var e}function wr(t){return"function"==typeof t?t:null==t?Yu:"object"==typeof t?Ps(t)?Ir(t[0],t[1]):Or(t):ea(t)}function Ar(t){if(!fo(t))return on(t);var e=[];for(var n in _t(t))At.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Sr(t){if(!Ws(t))return function(t){var e=[];if(null!=t)for(var n in _t(t))e.push(n);return e}(t);var e=fo(t),n=[];for(var r in t)("constructor"!=r||!e&&At.call(t,r))&&n.push(r);return n}function Cr(t,e){return t<e}function Rr(t,e){var n=-1,i=Us(t)?r(t.length):[];return tr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Or(t){var e=Qi(t);return 1==e.length&&e[0][2]?po(e[0][0],e[0][1]):function(n){return n===t||Tr(n,t,e)}}function Ir(t,e){return ao(t)&&ho(e)?po(Co(t),e):function(n){var r=_u(n,t);return void 0===r&&r===e?vu(n,t):br(e,r,3)}}function kr(t,e,n,r,i){t!==e&&sr(e,(function(o,s){if(i||(i=new jn),Ws(o))!function(t,e,n,r,i,o,s){var u=mo(t,n),a=mo(e,n),l=s.get(a);if(l)return void Bn(t,n,l);var c=o?o(u,a,n+"",t,e,s):void 0,f=void 0===c;if(f){var h=Ps(a),d=!h&&js(a),p=!h&&!d&&Qs(a);c=a,h||d||p?Ps(u)?c=u:Ls(u)?c=gi(u):d?(f=!1,c=fi(a,!0)):p?(f=!1,c=di(a,!0)):c=[]:Gs(a)||Ns(a)?(c=u,Ns(u)?c=su(u):Ws(u)&&!Fs(u)||(c=io(a))):f=!1}f&&(s.set(a,c),i(c,a,r,o,s),s.delete(a));Bn(t,n,c)}(t,e,s,n,kr,r,i);else{var u=r?r(mo(t,s),o,s+"",t,e,i):void 0;void 0===u&&(u=o),Bn(t,s,u)}}),Tu)}function xr(t,e){var n=t.length;if(n)return so(e+=e<0?n:0,n)?t[e]:void 0}function Nr(t,e,n){var r=-1;return e=de(e.length?e:[Yu],ke(Ji())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Rr(t,(function(t,n,i){return{criteria:de(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,s=i.length,u=n.length;for(;++r<s;){var a=pi(i[r],o[r]);if(a){if(r>=u)return a;var l=n[r];return a*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)}))}function Pr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],u=fr(t,s);n(u,s)&&Hr(o,ui(s,t),u)}return o}function Dr(t,e,n,r){var i=r?Ee:Te,o=-1,s=e.length,u=t;for(t===e&&(e=gi(e)),n&&(u=de(t,ke(n)));++o<s;)for(var a=0,l=e[o],c=n?n(l):l;(a=i(u,c,a,r))>-1;)u!==t&&$t.call(u,a,1),$t.call(t,a,1);return t}function Ur(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;so(i)?$t.call(t,i,1):Zr(t,i)}}return t}function Lr(t,e){return t+Ze(cn()*(e-t+1))}function jr(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=Ze(e/2))&&(t+=t)}while(e);return n}function Mr(t,e){return To(_o(t,e,Yu),t+"")}function qr(t){return qn(Iu(t))}function Fr(t,e){var n=Iu(t);return Ao(n,$n(e,0,n.length))}function Hr(t,e,n,r){if(!Ws(t))return t;for(var i=-1,o=(e=ui(e,t)).length,s=o-1,u=t;null!=u&&++i<o;){var a=Co(e[i]),l=n;if(i!=s){var c=u[a];void 0===(l=r?r(c,a,u):void 0)&&(l=Ws(c)?c:so(e[i+1])?[]:{})}Wn(u,a,l),u=u[a]}return t}var Br=mn?function(t,e){return mn.set(t,e),t}:Yu,Wr=Ce?function(t,e){return Ce(t,"toString",{configurable:!0,enumerable:!1,value:Wu(e),writable:!0})}:Yu;function zr(t){return Ao(Iu(t))}function Vr(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function Yr(t,e){var n;return tr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function Gr(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!Xs(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return Kr(t,e,Yu,n)}function Kr(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,s=e!=e,u=null===e,a=Xs(e),l=void 0===e;i<o;){var c=Ze((i+o)/2),f=n(t[c]),h=void 0!==f,d=null===f,p=f==f,_=Xs(f);if(s)var v=r||p;else v=l?p&&(r||h):u?p&&h&&(r||!d):a?p&&h&&!d&&(r||!_):!d&&!_&&(r?f<=e:f<e);v?i=c+1:o=c}return un(o,4294967294)}function $r(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],u=e?e(s):s;if(!n||!Is(u,a)){var a=u;o[i++]=0===s?0:s}}return o}function Jr(t){return"number"==typeof t?t:Xs(t)?NaN:+t}function Xr(t){if("string"==typeof t)return t;if(Ps(t))return de(t,Xr)+"";if(Xs(t))return Rn?Rn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Qr(t,e,n){var r=-1,i=fe,o=t.length,s=!0,u=[],a=u;if(n)s=!1,i=he;else if(o>=200){var l=e?null:ji(t);if(l)return We(l);s=!1,i=Ne,a=new Ln}else a=e?[]:u;t:for(;++r<o;){var c=t[r],f=e?e(c):c;if(c=n||0!==c?c:0,s&&f==f){for(var h=a.length;h--;)if(a[h]===f)continue t;e&&a.push(f),u.push(c)}else i(a,f,n)||(a!==u&&a.push(f),u.push(c))}return u}function Zr(t,e){return null==(t=vo(t,e=ui(e,t)))||delete t[Co(qo(e))]}function ti(t,e,n,r){return Hr(t,e,n(fr(t,e)),r)}function ei(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Vr(t,r?0:o,r?o+1:i):Vr(t,r?o+1:0,r?i:o)}function ni(t,e){var n=t;return n instanceof Nn&&(n=n.value()),_e(e,(function(t,e){return e.func.apply(e.thisArg,pe([t],e.args))}),n)}function ri(t,e,n){var i=t.length;if(i<2)return i?Qr(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var u=t[o],a=-1;++a<i;)a!=o&&(s[o]=Zn(s[o]||u,t[a],e,n));return Qr(or(s,1),e,n)}function ii(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var u=r<o?e[r]:void 0;n(s,t[r],u)}return s}function oi(t){return Ls(t)?t:[]}function si(t){return"function"==typeof t?t:Yu}function ui(t,e){return Ps(t)?t:ao(t,e)?[t]:So(uu(t))}var ai=Mr;function li(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Vr(t,e,n)}var ci=$e||function(t){return Gt.clearTimeout(t)};function fi(t,e){if(e)return t.slice();var n=t.length,r=Bt?Bt(n):new t.constructor(n);return t.copy(r),r}function hi(t){var e=new t.constructor(t.byteLength);return new Lt(e).set(new Lt(t)),e}function di(t,e){var n=e?hi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function pi(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Xs(t),s=void 0!==e,u=null===e,a=e==e,l=Xs(e);if(!u&&!l&&!o&&t>e||o&&s&&a&&!u&&!l||r&&s&&a||!n&&a||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||u&&n&&i||!s&&i||!a)return-1}return 0}function _i(t,e,n,i){for(var o=-1,s=t.length,u=n.length,a=-1,l=e.length,c=sn(s-u,0),f=r(l+c),h=!i;++a<l;)f[a]=e[a];for(;++o<u;)(h||o<s)&&(f[n[o]]=t[o]);for(;c--;)f[a++]=t[o++];return f}function vi(t,e,n,i){for(var o=-1,s=t.length,u=-1,a=n.length,l=-1,c=e.length,f=sn(s-a,0),h=r(f+c),d=!i;++o<f;)h[o]=t[o];for(var p=o;++l<c;)h[p+l]=e[l];for(;++u<a;)(d||o<s)&&(h[p+n[u]]=t[o++]);return h}function gi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function mi(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var u=e[o],a=r?r(n[u],t[u],u,n,t):void 0;void 0===a&&(a=t[u]),i?Gn(n,u,a):Wn(n,u,a)}return n}function yi(t,e){return function(n,r){var i=Ps(n)?se:Vn,o=e?e():{};return i(n,t,Ji(r,2),o)}}function bi(t){return Mr((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&uo(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=_t(e);++r<i;){var u=n[r];u&&t(e,u,r,o)}return e}))}function Ti(t,e){return function(n,r){if(null==n)return n;if(!Us(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=_t(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Ei(t){return function(e,n,r){for(var i=-1,o=_t(e),s=r(e),u=s.length;u--;){var a=s[t?u:++i];if(!1===n(o[a],a,o))break}return e}}function wi(t){return function(e){var n=qe(e=uu(e))?Ye(e):void 0,r=n?n[0]:e.charAt(0),i=n?li(n,1).join(""):e.slice(1);return r[t]()+i}}function Ai(t){return function(e){return _e(Fu(Nu(e).replace(Nt,"")),t,"")}}function Si(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=In(t.prototype),r=t.apply(n,e);return Ws(r)?r:n}}function Ci(t){return function(e,n,r){var i=_t(e);if(!Us(e)){var o=Ji(n,3);e=bu(e),n=function(t){return o(i[t],t,i)}}var s=t(e,n,r);return s>-1?i[o?e[s]:s]:void 0}}function Ri(t){return zi((function(e){var n=e.length,r=n,i=xn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new mt(o);if(i&&!u&&"wrapper"==Ki(s))var u=new xn([],!0)}for(r=u?r:n;++r<n;){var a=Ki(s=e[r]),l="wrapper"==a?Gi(s):void 0;u=l&&lo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[Ki(l[0])].apply(u,l[3]):1==s.length&&lo(s)?u[a]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ps(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Oi(t,e,n,i,o,s,u,a,l,c){var f=128&e,h=1&e,d=2&e,p=24&e,_=512&e,v=d?void 0:Si(t);return function g(){for(var m=arguments.length,y=r(m),b=m;b--;)y[b]=arguments[b];if(p)var T=$i(g),E=Ue(y,T);if(i&&(y=_i(y,i,o,p)),s&&(y=vi(y,s,u,p)),m-=E,p&&m<c){var w=Be(y,T);return Ui(t,e,Oi,g.placeholder,n,y,w,a,l,c-m)}var A=h?n:this,S=d?A[t]:t;return m=y.length,a?y=go(y,a):_&&m>1&&y.reverse(),f&&l<m&&(y.length=l),this&&this!==Gt&&this instanceof g&&(S=v||Si(S)),S.apply(A,y)}}function Ii(t,e){return function(n,r){return function(t,e,n,r){return ar(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function ki(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Jr(n),r=Jr(r)),i=t(n,r)}return i}}function xi(t){return zi((function(e){return e=de(e,ke(Ji())),Mr((function(n){var r=this;return t(e,(function(t){return oe(t,r,n)}))}))}))}function Ni(t,e){var n=(e=void 0===e?" ":Xr(e)).length;if(n<2)return n?jr(e,t):e;var r=jr(e,Qe(t/Ve(e)));return qe(e)?li(Ye(r),0,t).join(""):r.slice(0,t)}function Pi(t){return function(e,n,i){return i&&"number"!=typeof i&&uo(e,n,i)&&(n=i=void 0),e=nu(e),void 0===n?(n=e,e=0):n=nu(n),function(t,e,n,i){for(var o=-1,s=sn(Qe((e-t)/(n||1)),0),u=r(s);s--;)u[i?s:++o]=t,t+=n;return u}(e,n,i=void 0===i?e<n?1:-1:nu(i),t)}}function Di(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ou(e),n=ou(n)),t(e,n)}}function Ui(t,e,n,r,i,o,s,u,a,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var f=[t,e,i,c?o:void 0,c?s:void 0,c?void 0:o,c?void 0:s,u,a,l],h=n.apply(void 0,f);return lo(t)&&yo(h,f),h.placeholder=r,Eo(h,t,e)}function Li(t){var e=pt[t];return function(t,n){if(t=ou(t),(n=null==n?0:un(ru(n),292))&&nn(t)){var r=(uu(t)+"e").split("e");return+((r=(uu(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var ji=_n&&1/We(new _n([,-0]))[1]==1/0?function(t){return new _n(t)}:Xu;function Mi(t){return function(e){var n=no(e);return n==_?Fe(e):n==y?ze(e):function(t,e){return de(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function qi(t,e,n,i,u,a,l,c){var f=2&e;if(!f&&"function"!=typeof t)throw new mt(o);var h=i?i.length:0;if(h||(e&=-97,i=u=void 0),l=void 0===l?l:sn(ru(l),0),c=void 0===c?c:ru(c),h-=u?u.length:0,64&e){var d=i,p=u;i=u=void 0}var _=f?void 0:Gi(t),v=[t,e,n,i,u,d,p,a,l,c];if(_&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,u=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!u)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var a=e[3];if(a){var l=t[3];t[3]=l?_i(l,a,e[4]):a,t[4]=l?Be(t[3],s):e[4]}(a=e[5])&&(l=t[5],t[5]=l?vi(l,a,e[6]):a,t[6]=l?Be(t[5],s):e[6]);(a=e[7])&&(t[7]=a);128&r&&(t[8]=null==t[8]?e[8]:un(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(v,_),t=v[0],e=v[1],n=v[2],i=v[3],u=v[4],!(c=v[9]=void 0===v[9]?f?0:t.length:sn(v[9]-h,0))&&24&e&&(e&=-25),e&&1!=e)g=8==e||16==e?function(t,e,n){var i=Si(t);return function o(){for(var s=arguments.length,u=r(s),a=s,l=$i(o);a--;)u[a]=arguments[a];var c=s<3&&u[0]!==l&&u[s-1]!==l?[]:Be(u,l);if((s-=c.length)<n)return Ui(t,e,Oi,o.placeholder,void 0,u,c,void 0,void 0,n-s);var f=this&&this!==Gt&&this instanceof o?i:t;return oe(f,this,u)}}(t,e,c):32!=e&&33!=e||u.length?Oi.apply(void 0,v):function(t,e,n,i){var o=1&e,s=Si(t);return function e(){for(var u=-1,a=arguments.length,l=-1,c=i.length,f=r(c+a),h=this&&this!==Gt&&this instanceof e?s:t;++l<c;)f[l]=i[l];for(;a--;)f[l++]=arguments[++u];return oe(h,o?n:this,f)}}(t,e,n,i);else var g=function(t,e,n){var r=1&e,i=Si(t);return function e(){var o=this&&this!==Gt&&this instanceof e?i:t;return o.apply(r?n:this,arguments)}}(t,e,n);return Eo((_?Br:yo)(g,v),t,e)}function Fi(t,e,n,r){return void 0===t||Is(t,Tt[n])&&!At.call(r,n)?e:t}function Hi(t,e,n,r,i,o){return Ws(t)&&Ws(e)&&(o.set(e,t),kr(t,e,void 0,Hi,o),o.delete(e)),t}function Bi(t){return Gs(t)?void 0:t}function Wi(t,e,n,r,i,o){var s=1&n,u=t.length,a=e.length;if(u!=a&&!(s&&a>u))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,f=!0,h=2&n?new Ln:void 0;for(o.set(t,e),o.set(e,t);++c<u;){var d=t[c],p=e[c];if(r)var _=s?r(p,d,c,e,t,o):r(d,p,c,t,e,o);if(void 0!==_){if(_)continue;f=!1;break}if(h){if(!ge(e,(function(t,e){if(!Ne(h,e)&&(d===t||i(d,t,n,r,o)))return h.push(e)}))){f=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function zi(t){return To(_o(t,void 0,Do),t+"")}function Vi(t){return hr(t,bu,to)}function Yi(t){return hr(t,Tu,eo)}var Gi=mn?function(t){return mn.get(t)}:Xu;function Ki(t){for(var e=t.name+"",n=yn[e],r=At.call(yn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function $i(t){return(At.call(On,"placeholder")?On:t).placeholder}function Ji(){var t=On.iteratee||Gu;return t=t===Gu?wr:t,arguments.length?t(arguments[0],arguments[1]):t}function Xi(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Qi(t){for(var e=bu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ho(i)]}return e}function Zi(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Er(n)?n:void 0}var to=tn?function(t){return null==t?[]:(t=_t(t),ce(tn(t),(function(e){return Kt.call(t,e)})))}:ia,eo=tn?function(t){for(var e=[];t;)pe(e,to(t)),t=Vt(t);return e}:ia,no=dr;function ro(t,e,n){for(var r=-1,i=(e=ui(e,t)).length,o=!1;++r<i;){var s=Co(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Bs(i)&&so(s,i)&&(Ps(t)||Ns(t))}function io(t){return"function"!=typeof t.constructor||fo(t)?{}:In(Vt(t))}function oo(t){return Ps(t)||Ns(t)||!!(Xt&&t&&t[Xt])}function so(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&at.test(t))&&t>-1&&t%1==0&&t<e}function uo(t,e,n){if(!Ws(n))return!1;var r=typeof e;return!!("number"==r?Us(n)&&so(e,n.length):"string"==r&&e in n)&&Is(n[e],t)}function ao(t,e){if(Ps(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Xs(t))||(z.test(t)||!W.test(t)||null!=e&&t in _t(e))}function lo(t){var e=Ki(t),n=On[e];if("function"!=typeof n||!(e in Nn.prototype))return!1;if(t===n)return!0;var r=Gi(n);return!!r&&t===r[0]}(hn&&no(new hn(new ArrayBuffer(1)))!=A||dn&&no(new dn)!=_||pn&&"[object Promise]"!=no(pn.resolve())||_n&&no(new _n)!=y||vn&&no(new vn)!=E)&&(no=function(t){var e=dr(t),n=e==g?t.constructor:void 0,r=n?Ro(n):"";if(r)switch(r){case bn:return A;case Tn:return _;case En:return"[object Promise]";case wn:return y;case An:return E}return e});var co=Et?Fs:oa;function fo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Tt)}function ho(t){return t==t&&!Ws(t)}function po(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in _t(n)))}}function _o(t,e,n){return e=sn(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=sn(i.length-e,0),u=r(s);++o<s;)u[o]=i[e+o];o=-1;for(var a=r(e+1);++o<e;)a[o]=i[o];return a[e]=n(u),oe(t,this,a)}}function vo(t,e){return e.length<2?t:fr(t,Vr(e,0,-1))}function go(t,e){for(var n=t.length,r=un(e.length,n),i=gi(t);r--;){var o=e[r];t[r]=so(o,n)?i[o]:void 0}return t}function mo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var yo=wo(Br),bo=Xe||function(t,e){return Gt.setTimeout(t,e)},To=wo(Wr);function Eo(t,e,n){var r=e+"";return To(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(X,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ue(u,(function(n){var r="_."+n[0];e&n[1]&&!fe(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(Q);return e?e[1].split(Z):[]}(r),n)))}function wo(t){var e=0,n=0;return function(){var r=an(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Ao(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=Lr(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var So=function(t){var e=ws(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(V,(function(t,n,r,i){e.push(r?i.replace(et,"$1"):n||t)})),e}));function Co(t){if("string"==typeof t||Xs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ro(t){if(null!=t){try{return wt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Oo(t){if(t instanceof Nn)return t.clone();var e=new xn(t.__wrapped__,t.__chain__);return e.__actions__=gi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Io=Mr((function(t,e){return Ls(t)?Zn(t,or(e,1,Ls,!0)):[]})),ko=Mr((function(t,e){var n=qo(e);return Ls(n)&&(n=void 0),Ls(t)?Zn(t,or(e,1,Ls,!0),Ji(n,2)):[]})),xo=Mr((function(t,e){var n=qo(e);return Ls(n)&&(n=void 0),Ls(t)?Zn(t,or(e,1,Ls,!0),void 0,n):[]}));function No(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ru(n);return i<0&&(i=sn(r+i,0)),be(t,Ji(e,3),i)}function Po(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ru(n),i=n<0?sn(r+i,0):un(i,r-1)),be(t,Ji(e,3),i,!0)}function Do(t){return(null==t?0:t.length)?or(t,1):[]}function Uo(t){return t&&t.length?t[0]:void 0}var Lo=Mr((function(t){var e=de(t,oi);return e.length&&e[0]===t[0]?gr(e):[]})),jo=Mr((function(t){var e=qo(t),n=de(t,oi);return e===qo(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?gr(n,Ji(e,2)):[]})),Mo=Mr((function(t){var e=qo(t),n=de(t,oi);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?gr(n,void 0,e):[]}));function qo(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Fo=Mr(Ho);function Ho(t,e){return t&&t.length&&e&&e.length?Dr(t,e):t}var Bo=zi((function(t,e){var n=null==t?0:t.length,r=Kn(t,e);return Ur(t,de(e,(function(t){return so(t,n)?+t:t})).sort(pi)),r}));function Wo(t){return null==t?t:fn.call(t)}var zo=Mr((function(t){return Qr(or(t,1,Ls,!0))})),Vo=Mr((function(t){var e=qo(t);return Ls(e)&&(e=void 0),Qr(or(t,1,Ls,!0),Ji(e,2))})),Yo=Mr((function(t){var e=qo(t);return e="function"==typeof e?e:void 0,Qr(or(t,1,Ls,!0),void 0,e)}));function Go(t){if(!t||!t.length)return[];var e=0;return t=ce(t,(function(t){if(Ls(t))return e=sn(t.length,e),!0})),Ie(e,(function(e){return de(t,Se(e))}))}function Ko(t,e){if(!t||!t.length)return[];var n=Go(t);return null==e?n:de(n,(function(t){return oe(e,void 0,t)}))}var $o=Mr((function(t,e){return Ls(t)?Zn(t,e):[]})),Jo=Mr((function(t){return ri(ce(t,Ls))})),Xo=Mr((function(t){var e=qo(t);return Ls(e)&&(e=void 0),ri(ce(t,Ls),Ji(e,2))})),Qo=Mr((function(t){var e=qo(t);return e="function"==typeof e?e:void 0,ri(ce(t,Ls),void 0,e)})),Zo=Mr(Go);var ts=Mr((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Ko(t,n)}));function es(t){var e=On(t);return e.__chain__=!0,e}function ns(t,e){return e(t)}var rs=zi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Kn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Nn&&so(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ns,args:[i],thisArg:void 0}),new xn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var is=yi((function(t,e,n){At.call(t,n)?++t[n]:Gn(t,n,1)}));var os=Ci(No),ss=Ci(Po);function us(t,e){return(Ps(t)?ue:tr)(t,Ji(e,3))}function as(t,e){return(Ps(t)?ae:er)(t,Ji(e,3))}var ls=yi((function(t,e,n){At.call(t,n)?t[n].push(e):Gn(t,n,[e])}));var cs=Mr((function(t,e,n){var i=-1,o="function"==typeof e,s=Us(t)?r(t.length):[];return tr(t,(function(t){s[++i]=o?oe(e,t,n):mr(t,e,n)})),s})),fs=yi((function(t,e,n){Gn(t,n,e)}));function hs(t,e){return(Ps(t)?de:Rr)(t,Ji(e,3))}var ds=yi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var ps=Mr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&uo(t,e[0],e[1])?e=[]:n>2&&uo(e[0],e[1],e[2])&&(e=[e[0]]),Nr(t,or(e,1),[])})),_s=Je||function(){return Gt.Date.now()};function vs(t,e,n){return e=n?void 0:e,qi(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function gs(t,e){var n;if("function"!=typeof e)throw new mt(o);return t=ru(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var ms=Mr((function(t,e,n){var r=1;if(n.length){var i=Be(n,$i(ms));r|=32}return qi(t,r,e,n,i)})),ys=Mr((function(t,e,n){var r=3;if(n.length){var i=Be(n,$i(ys));r|=32}return qi(e,r,t,n,i)}));function bs(t,e,n){var r,i,s,u,a,l,c=0,f=!1,h=!1,d=!0;if("function"!=typeof t)throw new mt(o);function p(e){var n=r,o=i;return r=i=void 0,c=e,u=t.apply(o,n)}function _(t){return c=t,a=bo(g,e),f?p(t):u}function v(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-c>=s}function g(){var t=_s();if(v(t))return m(t);a=bo(g,function(t){var n=e-(t-l);return h?un(n,s-(t-c)):n}(t))}function m(t){return a=void 0,d&&r?p(t):(r=i=void 0,u)}function y(){var t=_s(),n=v(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return _(l);if(h)return ci(a),a=bo(g,e),p(l)}return void 0===a&&(a=bo(g,e)),u}return e=ou(e)||0,Ws(n)&&(f=!!n.leading,s=(h="maxWait"in n)?sn(ou(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==a&&ci(a),c=0,r=l=i=a=void 0},y.flush=function(){return void 0===a?u:m(_s())},y}var Ts=Mr((function(t,e){return Qn(t,1,e)})),Es=Mr((function(t,e,n){return Qn(t,ou(e)||0,n)}));function ws(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new mt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(ws.Cache||Un),n}function As(t){if("function"!=typeof t)throw new mt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ws.Cache=Un;var Ss=ai((function(t,e){var n=(e=1==e.length&&Ps(e[0])?de(e[0],ke(Ji())):de(or(e,1),ke(Ji()))).length;return Mr((function(r){for(var i=-1,o=un(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return oe(t,this,r)}))})),Cs=Mr((function(t,e){return qi(t,32,void 0,e,Be(e,$i(Cs)))})),Rs=Mr((function(t,e){return qi(t,64,void 0,e,Be(e,$i(Rs)))})),Os=zi((function(t,e){return qi(t,256,void 0,void 0,void 0,e)}));function Is(t,e){return t===e||t!=t&&e!=e}var ks=Di(pr),xs=Di((function(t,e){return t>=e})),Ns=yr(function(){return arguments}())?yr:function(t){return zs(t)&&At.call(t,"callee")&&!Kt.call(t,"callee")},Ps=r.isArray,Ds=Zt?ke(Zt):function(t){return zs(t)&&dr(t)==w};function Us(t){return null!=t&&Bs(t.length)&&!Fs(t)}function Ls(t){return zs(t)&&Us(t)}var js=en||oa,Ms=te?ke(te):function(t){return zs(t)&&dr(t)==f};function qs(t){if(!zs(t))return!1;var e=dr(t);return e==h||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Gs(t)}function Fs(t){if(!Ws(t))return!1;var e=dr(t);return e==d||e==p||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Hs(t){return"number"==typeof t&&t==ru(t)}function Bs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Ws(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function zs(t){return null!=t&&"object"==typeof t}var Vs=ee?ke(ee):function(t){return zs(t)&&no(t)==_};function Ys(t){return"number"==typeof t||zs(t)&&dr(t)==v}function Gs(t){if(!zs(t)||dr(t)!=g)return!1;var e=Vt(t);if(null===e)return!0;var n=At.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&wt.call(n)==Ot}var Ks=ne?ke(ne):function(t){return zs(t)&&dr(t)==m};var $s=re?ke(re):function(t){return zs(t)&&no(t)==y};function Js(t){return"string"==typeof t||!Ps(t)&&zs(t)&&dr(t)==b}function Xs(t){return"symbol"==typeof t||zs(t)&&dr(t)==T}var Qs=ie?ke(ie):function(t){return zs(t)&&Bs(t.length)&&!!Ft[dr(t)]};var Zs=Di(Cr),tu=Di((function(t,e){return t<=e}));function eu(t){if(!t)return[];if(Us(t))return Js(t)?Ye(t):gi(t);if(Qt&&t[Qt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Qt]());var e=no(t);return(e==_?Fe:e==y?We:Iu)(t)}function nu(t){return t?(t=ou(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ru(t){var e=nu(t),n=e%1;return e==e?n?e-n:e:0}function iu(t){return t?$n(ru(t),0,4294967295):0}function ou(t){if("number"==typeof t)return t;if(Xs(t))return NaN;if(Ws(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ws(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(K,"");var n=ot.test(t);return n||ut.test(t)?zt(t.slice(2),n?2:8):it.test(t)?NaN:+t}function su(t){return mi(t,Tu(t))}function uu(t){return null==t?"":Xr(t)}var au=bi((function(t,e){if(fo(e)||Us(e))mi(e,bu(e),t);else for(var n in e)At.call(e,n)&&Wn(t,n,e[n])})),lu=bi((function(t,e){mi(e,Tu(e),t)})),cu=bi((function(t,e,n,r){mi(e,Tu(e),t,r)})),fu=bi((function(t,e,n,r){mi(e,bu(e),t,r)})),hu=zi(Kn);var du=Mr((function(t,e){t=_t(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&uo(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=Tu(o),u=-1,a=s.length;++u<a;){var l=s[u],c=t[l];(void 0===c||Is(c,Tt[l])&&!At.call(t,l))&&(t[l]=o[l])}return t})),pu=Mr((function(t){return t.push(void 0,Hi),oe(wu,void 0,t)}));function _u(t,e,n){var r=null==t?void 0:fr(t,e);return void 0===r?n:r}function vu(t,e){return null!=t&&ro(t,e,vr)}var gu=Ii((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Rt.call(e)),t[e]=n}),Wu(Yu)),mu=Ii((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Rt.call(e)),At.call(t,e)?t[e].push(n):t[e]=[n]}),Ji),yu=Mr(mr);function bu(t){return Us(t)?Mn(t):Ar(t)}function Tu(t){return Us(t)?Mn(t,!0):Sr(t)}var Eu=bi((function(t,e,n){kr(t,e,n)})),wu=bi((function(t,e,n,r){kr(t,e,n,r)})),Au=zi((function(t,e){var n={};if(null==t)return n;var r=!1;e=de(e,(function(e){return e=ui(e,t),r||(r=e.length>1),e})),mi(t,Yi(t),n),r&&(n=Jn(n,7,Bi));for(var i=e.length;i--;)Zr(n,e[i]);return n}));var Su=zi((function(t,e){return null==t?{}:function(t,e){return Pr(t,e,(function(e,n){return vu(t,n)}))}(t,e)}));function Cu(t,e){if(null==t)return{};var n=de(Yi(t),(function(t){return[t]}));return e=Ji(e),Pr(t,n,(function(t,n){return e(t,n[0])}))}var Ru=Mi(bu),Ou=Mi(Tu);function Iu(t){return null==t?[]:xe(t,bu(t))}var ku=Ai((function(t,e,n){return e=e.toLowerCase(),t+(n?xu(e):e)}));function xu(t){return qu(uu(t).toLowerCase())}function Nu(t){return(t=uu(t))&&t.replace(lt,Le).replace(Pt,"")}var Pu=Ai((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Du=Ai((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Uu=wi("toLowerCase");var Lu=Ai((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var ju=Ai((function(t,e,n){return t+(n?" ":"")+qu(e)}));var Mu=Ai((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),qu=wi("toUpperCase");function Fu(t,e,n){return t=uu(t),void 0===(e=n?void 0:e)?function(t){return jt.test(t)}(t)?function(t){return t.match(Ut)||[]}(t):function(t){return t.match(tt)||[]}(t):t.match(e)||[]}var Hu=Mr((function(t,e){try{return oe(t,void 0,e)}catch(t){return qs(t)?t:new ht(t)}})),Bu=zi((function(t,e){return ue(e,(function(e){e=Co(e),Gn(t,e,ms(t[e],t))})),t}));function Wu(t){return function(){return t}}var zu=Ri(),Vu=Ri(!0);function Yu(t){return t}function Gu(t){return wr("function"==typeof t?t:Jn(t,1))}var Ku=Mr((function(t,e){return function(n){return mr(n,t,e)}})),$u=Mr((function(t,e){return function(n){return mr(t,n,e)}}));function Ju(t,e,n){var r=bu(e),i=cr(e,r);null!=n||Ws(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=cr(e,bu(e)));var o=!(Ws(n)&&"chain"in n&&!n.chain),s=Fs(t);return ue(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=gi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,pe([this.value()],arguments))})})),t}function Xu(){}var Qu=xi(de),Zu=xi(le),ta=xi(ge);function ea(t){return ao(t)?Se(Co(t)):function(t){return function(e){return fr(e,t)}}(t)}var na=Pi(),ra=Pi(!0);function ia(){return[]}function oa(){return!1}var sa=ki((function(t,e){return t+e}),0),ua=Li("ceil"),aa=ki((function(t,e){return t/e}),1),la=Li("floor");var ca,fa=ki((function(t,e){return t*e}),1),ha=Li("round"),da=ki((function(t,e){return t-e}),0);return On.after=function(t,e){if("function"!=typeof e)throw new mt(o);return t=ru(t),function(){if(--t<1)return e.apply(this,arguments)}},On.ary=vs,On.assign=au,On.assignIn=lu,On.assignInWith=cu,On.assignWith=fu,On.at=hu,On.before=gs,On.bind=ms,On.bindAll=Bu,On.bindKey=ys,On.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ps(t)?t:[t]},On.chain=es,On.chunk=function(t,e,n){e=(n?uo(t,e,n):void 0===e)?1:sn(ru(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,s=0,u=r(Qe(i/e));o<i;)u[s++]=Vr(t,o,o+=e);return u},On.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},On.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return pe(Ps(n)?gi(n):[n],or(e,1))},On.cond=function(t){var e=null==t?0:t.length,n=Ji();return t=e?de(t,(function(t){if("function"!=typeof t[1])throw new mt(o);return[n(t[0]),t[1]]})):[],Mr((function(n){for(var r=-1;++r<e;){var i=t[r];if(oe(i[0],this,n))return oe(i[1],this,n)}}))},On.conforms=function(t){return function(t){var e=bu(t);return function(n){return Xn(n,t,e)}}(Jn(t,1))},On.constant=Wu,On.countBy=is,On.create=function(t,e){var n=In(t);return null==e?n:Yn(n,e)},On.curry=function t(e,n,r){var i=qi(e,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},On.curryRight=function t(e,n,r){var i=qi(e,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},On.debounce=bs,On.defaults=du,On.defaultsDeep=pu,On.defer=Ts,On.delay=Es,On.difference=Io,On.differenceBy=ko,On.differenceWith=xo,On.drop=function(t,e,n){var r=null==t?0:t.length;return r?Vr(t,(e=n||void 0===e?1:ru(e))<0?0:e,r):[]},On.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Vr(t,0,(e=r-(e=n||void 0===e?1:ru(e)))<0?0:e):[]},On.dropRightWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3),!0,!0):[]},On.dropWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3),!0):[]},On.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&uo(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=ru(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ru(r))<0&&(r+=i),r=n>r?0:iu(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},On.filter=function(t,e){return(Ps(t)?ce:ir)(t,Ji(e,3))},On.flatMap=function(t,e){return or(hs(t,e),1)},On.flatMapDeep=function(t,e){return or(hs(t,e),1/0)},On.flatMapDepth=function(t,e,n){return n=void 0===n?1:ru(n),or(hs(t,e),n)},On.flatten=Do,On.flattenDeep=function(t){return(null==t?0:t.length)?or(t,1/0):[]},On.flattenDepth=function(t,e){return(null==t?0:t.length)?or(t,e=void 0===e?1:ru(e)):[]},On.flip=function(t){return qi(t,512)},On.flow=zu,On.flowRight=Vu,On.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},On.functions=function(t){return null==t?[]:cr(t,bu(t))},On.functionsIn=function(t){return null==t?[]:cr(t,Tu(t))},On.groupBy=ls,On.initial=function(t){return(null==t?0:t.length)?Vr(t,0,-1):[]},On.intersection=Lo,On.intersectionBy=jo,On.intersectionWith=Mo,On.invert=gu,On.invertBy=mu,On.invokeMap=cs,On.iteratee=Gu,On.keyBy=fs,On.keys=bu,On.keysIn=Tu,On.map=hs,On.mapKeys=function(t,e){var n={};return e=Ji(e,3),ar(t,(function(t,r,i){Gn(n,e(t,r,i),t)})),n},On.mapValues=function(t,e){var n={};return e=Ji(e,3),ar(t,(function(t,r,i){Gn(n,r,e(t,r,i))})),n},On.matches=function(t){return Or(Jn(t,1))},On.matchesProperty=function(t,e){return Ir(t,Jn(e,1))},On.memoize=ws,On.merge=Eu,On.mergeWith=wu,On.method=Ku,On.methodOf=$u,On.mixin=Ju,On.negate=As,On.nthArg=function(t){return t=ru(t),Mr((function(e){return xr(e,t)}))},On.omit=Au,On.omitBy=function(t,e){return Cu(t,As(Ji(e)))},On.once=function(t){return gs(2,t)},On.orderBy=function(t,e,n,r){return null==t?[]:(Ps(e)||(e=null==e?[]:[e]),Ps(n=r?void 0:n)||(n=null==n?[]:[n]),Nr(t,e,n))},On.over=Qu,On.overArgs=Ss,On.overEvery=Zu,On.overSome=ta,On.partial=Cs,On.partialRight=Rs,On.partition=ds,On.pick=Su,On.pickBy=Cu,On.property=ea,On.propertyOf=function(t){return function(e){return null==t?void 0:fr(t,e)}},On.pull=Fo,On.pullAll=Ho,On.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Dr(t,e,Ji(n,2)):t},On.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Dr(t,e,void 0,n):t},On.pullAt=Bo,On.range=na,On.rangeRight=ra,On.rearg=Os,On.reject=function(t,e){return(Ps(t)?ce:ir)(t,As(Ji(e,3)))},On.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Ji(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return Ur(t,i),n},On.rest=function(t,e){if("function"!=typeof t)throw new mt(o);return Mr(t,e=void 0===e?e:ru(e))},On.reverse=Wo,On.sampleSize=function(t,e,n){return e=(n?uo(t,e,n):void 0===e)?1:ru(e),(Ps(t)?Fn:Fr)(t,e)},On.set=function(t,e,n){return null==t?t:Hr(t,e,n)},On.setWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Hr(t,e,n,r)},On.shuffle=function(t){return(Ps(t)?Hn:zr)(t)},On.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&uo(t,e,n)?(e=0,n=r):(e=null==e?0:ru(e),n=void 0===n?r:ru(n)),Vr(t,e,n)):[]},On.sortBy=ps,On.sortedUniq=function(t){return t&&t.length?$r(t):[]},On.sortedUniqBy=function(t,e){return t&&t.length?$r(t,Ji(e,2)):[]},On.split=function(t,e,n){return n&&"number"!=typeof n&&uo(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=uu(t))&&("string"==typeof e||null!=e&&!Ks(e))&&!(e=Xr(e))&&qe(t)?li(Ye(t),0,n):t.split(e,n):[]},On.spread=function(t,e){if("function"!=typeof t)throw new mt(o);return e=null==e?0:sn(ru(e),0),Mr((function(n){var r=n[e],i=li(n,0,e);return r&&pe(i,r),oe(t,this,i)}))},On.tail=function(t){var e=null==t?0:t.length;return e?Vr(t,1,e):[]},On.take=function(t,e,n){return t&&t.length?Vr(t,0,(e=n||void 0===e?1:ru(e))<0?0:e):[]},On.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Vr(t,(e=r-(e=n||void 0===e?1:ru(e)))<0?0:e,r):[]},On.takeRightWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3),!1,!0):[]},On.takeWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3)):[]},On.tap=function(t,e){return e(t),t},On.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new mt(o);return Ws(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),bs(t,e,{leading:r,maxWait:e,trailing:i})},On.thru=ns,On.toArray=eu,On.toPairs=Ru,On.toPairsIn=Ou,On.toPath=function(t){return Ps(t)?de(t,Co):Xs(t)?[t]:gi(So(uu(t)))},On.toPlainObject=su,On.transform=function(t,e,n){var r=Ps(t),i=r||js(t)||Qs(t);if(e=Ji(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Ws(t)&&Fs(o)?In(Vt(t)):{}}return(i?ue:ar)(t,(function(t,r,i){return e(n,t,r,i)})),n},On.unary=function(t){return vs(t,1)},On.union=zo,On.unionBy=Vo,On.unionWith=Yo,On.uniq=function(t){return t&&t.length?Qr(t):[]},On.uniqBy=function(t,e){return t&&t.length?Qr(t,Ji(e,2)):[]},On.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Qr(t,void 0,e):[]},On.unset=function(t,e){return null==t||Zr(t,e)},On.unzip=Go,On.unzipWith=Ko,On.update=function(t,e,n){return null==t?t:ti(t,e,si(n))},On.updateWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:ti(t,e,si(n),r)},On.values=Iu,On.valuesIn=function(t){return null==t?[]:xe(t,Tu(t))},On.without=$o,On.words=Fu,On.wrap=function(t,e){return Cs(si(e),t)},On.xor=Jo,On.xorBy=Xo,On.xorWith=Qo,On.zip=Zo,On.zipObject=function(t,e){return ii(t||[],e||[],Wn)},On.zipObjectDeep=function(t,e){return ii(t||[],e||[],Hr)},On.zipWith=ts,On.entries=Ru,On.entriesIn=Ou,On.extend=lu,On.extendWith=cu,Ju(On,On),On.add=sa,On.attempt=Hu,On.camelCase=ku,On.capitalize=xu,On.ceil=ua,On.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=ou(n))==n?n:0),void 0!==e&&(e=(e=ou(e))==e?e:0),$n(ou(t),e,n)},On.clone=function(t){return Jn(t,4)},On.cloneDeep=function(t){return Jn(t,5)},On.cloneDeepWith=function(t,e){return Jn(t,5,e="function"==typeof e?e:void 0)},On.cloneWith=function(t,e){return Jn(t,4,e="function"==typeof e?e:void 0)},On.conformsTo=function(t,e){return null==e||Xn(t,e,bu(e))},On.deburr=Nu,On.defaultTo=function(t,e){return null==t||t!=t?e:t},On.divide=aa,On.endsWith=function(t,e,n){t=uu(t),e=Xr(e);var r=t.length,i=n=void 0===n?r:$n(ru(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},On.eq=Is,On.escape=function(t){return(t=uu(t))&&q.test(t)?t.replace(j,je):t},On.escapeRegExp=function(t){return(t=uu(t))&&G.test(t)?t.replace(Y,"\\$&"):t},On.every=function(t,e,n){var r=Ps(t)?le:nr;return n&&uo(t,e,n)&&(e=void 0),r(t,Ji(e,3))},On.find=os,On.findIndex=No,On.findKey=function(t,e){return ye(t,Ji(e,3),ar)},On.findLast=ss,On.findLastIndex=Po,On.findLastKey=function(t,e){return ye(t,Ji(e,3),lr)},On.floor=la,On.forEach=us,On.forEachRight=as,On.forIn=function(t,e){return null==t?t:sr(t,Ji(e,3),Tu)},On.forInRight=function(t,e){return null==t?t:ur(t,Ji(e,3),Tu)},On.forOwn=function(t,e){return t&&ar(t,Ji(e,3))},On.forOwnRight=function(t,e){return t&&lr(t,Ji(e,3))},On.get=_u,On.gt=ks,On.gte=xs,On.has=function(t,e){return null!=t&&ro(t,e,_r)},On.hasIn=vu,On.head=Uo,On.identity=Yu,On.includes=function(t,e,n,r){t=Us(t)?t:Iu(t),n=n&&!r?ru(n):0;var i=t.length;return n<0&&(n=sn(i+n,0)),Js(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Te(t,e,n)>-1},On.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ru(n);return i<0&&(i=sn(r+i,0)),Te(t,e,i)},On.inRange=function(t,e,n){return e=nu(e),void 0===n?(n=e,e=0):n=nu(n),function(t,e,n){return t>=un(e,n)&&t<sn(e,n)}(t=ou(t),e,n)},On.invoke=yu,On.isArguments=Ns,On.isArray=Ps,On.isArrayBuffer=Ds,On.isArrayLike=Us,On.isArrayLikeObject=Ls,On.isBoolean=function(t){return!0===t||!1===t||zs(t)&&dr(t)==c},On.isBuffer=js,On.isDate=Ms,On.isElement=function(t){return zs(t)&&1===t.nodeType&&!Gs(t)},On.isEmpty=function(t){if(null==t)return!0;if(Us(t)&&(Ps(t)||"string"==typeof t||"function"==typeof t.splice||js(t)||Qs(t)||Ns(t)))return!t.length;var e=no(t);if(e==_||e==y)return!t.size;if(fo(t))return!Ar(t).length;for(var n in t)if(At.call(t,n))return!1;return!0},On.isEqual=function(t,e){return br(t,e)},On.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?br(t,e,void 0,n):!!r},On.isError=qs,On.isFinite=function(t){return"number"==typeof t&&nn(t)},On.isFunction=Fs,On.isInteger=Hs,On.isLength=Bs,On.isMap=Vs,On.isMatch=function(t,e){return t===e||Tr(t,e,Qi(e))},On.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,Tr(t,e,Qi(e),n)},On.isNaN=function(t){return Ys(t)&&t!=+t},On.isNative=function(t){if(co(t))throw new ht("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Er(t)},On.isNil=function(t){return null==t},On.isNull=function(t){return null===t},On.isNumber=Ys,On.isObject=Ws,On.isObjectLike=zs,On.isPlainObject=Gs,On.isRegExp=Ks,On.isSafeInteger=function(t){return Hs(t)&&t>=-9007199254740991&&t<=9007199254740991},On.isSet=$s,On.isString=Js,On.isSymbol=Xs,On.isTypedArray=Qs,On.isUndefined=function(t){return void 0===t},On.isWeakMap=function(t){return zs(t)&&no(t)==E},On.isWeakSet=function(t){return zs(t)&&"[object WeakSet]"==dr(t)},On.join=function(t,e){return null==t?"":rn.call(t,e)},On.kebabCase=Pu,On.last=qo,On.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ru(n))<0?sn(r+i,0):un(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):be(t,we,i,!0)},On.lowerCase=Du,On.lowerFirst=Uu,On.lt=Zs,On.lte=tu,On.max=function(t){return t&&t.length?rr(t,Yu,pr):void 0},On.maxBy=function(t,e){return t&&t.length?rr(t,Ji(e,2),pr):void 0},On.mean=function(t){return Ae(t,Yu)},On.meanBy=function(t,e){return Ae(t,Ji(e,2))},On.min=function(t){return t&&t.length?rr(t,Yu,Cr):void 0},On.minBy=function(t,e){return t&&t.length?rr(t,Ji(e,2),Cr):void 0},On.stubArray=ia,On.stubFalse=oa,On.stubObject=function(){return{}},On.stubString=function(){return""},On.stubTrue=function(){return!0},On.multiply=fa,On.nth=function(t,e){return t&&t.length?xr(t,ru(e)):void 0},On.noConflict=function(){return Gt._===this&&(Gt._=It),this},On.noop=Xu,On.now=_s,On.pad=function(t,e,n){t=uu(t);var r=(e=ru(e))?Ve(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Ni(Ze(i),n)+t+Ni(Qe(i),n)},On.padEnd=function(t,e,n){t=uu(t);var r=(e=ru(e))?Ve(t):0;return e&&r<e?t+Ni(e-r,n):t},On.padStart=function(t,e,n){t=uu(t);var r=(e=ru(e))?Ve(t):0;return e&&r<e?Ni(e-r,n)+t:t},On.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),ln(uu(t).replace($,""),e||0)},On.random=function(t,e,n){if(n&&"boolean"!=typeof n&&uo(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=nu(t),void 0===e?(e=t,t=0):e=nu(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=cn();return un(t+i*(e-t+Wt("1e-"+((i+"").length-1))),e)}return Lr(t,e)},On.reduce=function(t,e,n){var r=Ps(t)?_e:Re,i=arguments.length<3;return r(t,Ji(e,4),n,i,tr)},On.reduceRight=function(t,e,n){var r=Ps(t)?ve:Re,i=arguments.length<3;return r(t,Ji(e,4),n,i,er)},On.repeat=function(t,e,n){return e=(n?uo(t,e,n):void 0===e)?1:ru(e),jr(uu(t),e)},On.replace=function(){var t=arguments,e=uu(t[0]);return t.length<3?e:e.replace(t[1],t[2])},On.result=function(t,e,n){var r=-1,i=(e=ui(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[Co(e[r])];void 0===o&&(r=i,o=n),t=Fs(o)?o.call(t):o}return t},On.round=ha,On.runInContext=t,On.sample=function(t){return(Ps(t)?qn:qr)(t)},On.size=function(t){if(null==t)return 0;if(Us(t))return Js(t)?Ve(t):t.length;var e=no(t);return e==_||e==y?t.size:Ar(t).length},On.snakeCase=Lu,On.some=function(t,e,n){var r=Ps(t)?ge:Yr;return n&&uo(t,e,n)&&(e=void 0),r(t,Ji(e,3))},On.sortedIndex=function(t,e){return Gr(t,e)},On.sortedIndexBy=function(t,e,n){return Kr(t,e,Ji(n,2))},On.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Gr(t,e);if(r<n&&Is(t[r],e))return r}return-1},On.sortedLastIndex=function(t,e){return Gr(t,e,!0)},On.sortedLastIndexBy=function(t,e,n){return Kr(t,e,Ji(n,2),!0)},On.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Gr(t,e,!0)-1;if(Is(t[n],e))return n}return-1},On.startCase=ju,On.startsWith=function(t,e,n){return t=uu(t),n=null==n?0:$n(ru(n),0,t.length),e=Xr(e),t.slice(n,n+e.length)==e},On.subtract=da,On.sum=function(t){return t&&t.length?Oe(t,Yu):0},On.sumBy=function(t,e){return t&&t.length?Oe(t,Ji(e,2)):0},On.template=function(t,e,n){var r=On.templateSettings;n&&uo(t,e,n)&&(e=void 0),t=uu(t),e=cu({},e,r,Fi);var i,o,s=cu({},e.imports,r.imports,Fi),u=bu(s),a=xe(s,u),l=0,c=e.interpolate||ct,f="__p += '",h=vt((e.escape||ct).source+"|"+c.source+"|"+(c===B?nt:ct).source+"|"+(e.evaluate||ct).source+"|$","g"),d="//# sourceURL="+(At.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++qt+"]")+"\n";t.replace(h,(function(e,n,r,s,u,a){return r||(r=s),f+=t.slice(l,a).replace(ft,Me),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),u&&(o=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=a+e.length,e})),f+="';\n";var p=At.call(e,"variable")&&e.variable;p||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(P,""):f).replace(D,"$1").replace(U,"$1;"),f="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var _=Hu((function(){return dt(u,d+"return "+f).apply(void 0,a)}));if(_.source=f,qs(_))throw _;return _},On.times=function(t,e){if((t=ru(t))<1||t>9007199254740991)return[];var n=4294967295,r=un(t,4294967295);t-=4294967295;for(var i=Ie(r,e=Ji(e));++n<t;)e(n);return i},On.toFinite=nu,On.toInteger=ru,On.toLength=iu,On.toLower=function(t){return uu(t).toLowerCase()},On.toNumber=ou,On.toSafeInteger=function(t){return t?$n(ru(t),-9007199254740991,9007199254740991):0===t?t:0},On.toString=uu,On.toUpper=function(t){return uu(t).toUpperCase()},On.trim=function(t,e,n){if((t=uu(t))&&(n||void 0===e))return t.replace(K,"");if(!t||!(e=Xr(e)))return t;var r=Ye(t),i=Ye(e);return li(r,Pe(r,i),De(r,i)+1).join("")},On.trimEnd=function(t,e,n){if((t=uu(t))&&(n||void 0===e))return t.replace(J,"");if(!t||!(e=Xr(e)))return t;var r=Ye(t);return li(r,0,De(r,Ye(e))+1).join("")},On.trimStart=function(t,e,n){if((t=uu(t))&&(n||void 0===e))return t.replace($,"");if(!t||!(e=Xr(e)))return t;var r=Ye(t);return li(r,Pe(r,Ye(e))).join("")},On.truncate=function(t,e){var n=30,r="...";if(Ws(e)){var i="separator"in e?e.separator:i;n="length"in e?ru(e.length):n,r="omission"in e?Xr(e.omission):r}var o=(t=uu(t)).length;if(qe(t)){var s=Ye(t);o=s.length}if(n>=o)return t;var u=n-Ve(r);if(u<1)return r;var a=s?li(s,0,u).join(""):t.slice(0,u);if(void 0===i)return a+r;if(s&&(u+=a.length-u),Ks(i)){if(t.slice(u).search(i)){var l,c=a;for(i.global||(i=vt(i.source,uu(rt.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var f=l.index;a=a.slice(0,void 0===f?u:f)}}else if(t.indexOf(Xr(i),u)!=u){var h=a.lastIndexOf(i);h>-1&&(a=a.slice(0,h))}return a+r},On.unescape=function(t){return(t=uu(t))&&M.test(t)?t.replace(L,Ge):t},On.uniqueId=function(t){var e=++St;return uu(t)+e},On.upperCase=Mu,On.upperFirst=qu,On.each=us,On.eachRight=as,On.first=Uo,Ju(On,(ca={},ar(On,(function(t,e){At.call(On.prototype,e)||(ca[e]=t)})),ca),{chain:!1}),On.VERSION="4.17.15",ue(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){On[t].placeholder=On})),ue(["drop","take"],(function(t,e){Nn.prototype[t]=function(n){n=void 0===n?1:sn(ru(n),0);var r=this.__filtered__&&!e?new Nn(this):this.clone();return r.__filtered__?r.__takeCount__=un(n,r.__takeCount__):r.__views__.push({size:un(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},Nn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ue(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Nn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ji(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),ue(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Nn.prototype[t]=function(){return this[n](1).value()[0]}})),ue(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Nn.prototype[t]=function(){return this.__filtered__?new Nn(this):this[n](1)}})),Nn.prototype.compact=function(){return this.filter(Yu)},Nn.prototype.find=function(t){return this.filter(t).head()},Nn.prototype.findLast=function(t){return this.reverse().find(t)},Nn.prototype.invokeMap=Mr((function(t,e){return"function"==typeof t?new Nn(this):this.map((function(n){return mr(n,t,e)}))})),Nn.prototype.reject=function(t){return this.filter(As(Ji(t)))},Nn.prototype.slice=function(t,e){t=ru(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Nn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=ru(e))<0?n.dropRight(-e):n.take(e-t)),n)},Nn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Nn.prototype.toArray=function(){return this.take(4294967295)},ar(Nn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=On[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(On.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Nn,a=s[0],l=u||Ps(e),c=function(t){var e=i.apply(On,pe([t],s));return r&&f?e[0]:e};l&&n&&"function"==typeof a&&1!=a.length&&(u=l=!1);var f=this.__chain__,h=!!this.__actions__.length,d=o&&!f,p=u&&!h;if(!o&&l){e=p?e:new Nn(this);var _=t.apply(e,s);return _.__actions__.push({func:ns,args:[c],thisArg:void 0}),new xn(_,f)}return d&&p?t.apply(this,s):(_=this.thru(c),d?r?_.value()[0]:_.value():_)})})),ue(["pop","push","shift","sort","splice","unshift"],(function(t){var e=yt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);On.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ps(i)?i:[],t)}return this[n]((function(n){return e.apply(Ps(n)?n:[],t)}))}})),ar(Nn.prototype,(function(t,e){var n=On[e];if(n){var r=n.name+"";At.call(yn,r)||(yn[r]=[]),yn[r].push({name:e,func:n})}})),yn[Oi(void 0,2).name]=[{name:"wrapper",func:void 0}],Nn.prototype.clone=function(){var t=new Nn(this.__wrapped__);return t.__actions__=gi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=gi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=gi(this.__views__),t},Nn.prototype.reverse=function(){if(this.__filtered__){var t=new Nn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Nn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ps(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=un(e,t+s);break;case"takeRight":t=sn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,u=o.end,a=u-s,l=r?u:s-1,c=this.__iteratees__,f=c.length,h=0,d=un(a,this.__takeCount__);if(!n||!r&&i==a&&d==a)return ni(t,this.__actions__);var p=[];t:for(;a--&&h<d;){for(var _=-1,v=t[l+=e];++_<f;){var g=c[_],m=g.iteratee,y=g.type,b=m(v);if(2==y)v=b;else if(!b){if(1==y)continue t;break t}}p[h++]=v}return p},On.prototype.at=rs,On.prototype.chain=function(){return es(this)},On.prototype.commit=function(){return new xn(this.value(),this.__chain__)},On.prototype.next=function(){void 0===this.__values__&&(this.__values__=eu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},On.prototype.plant=function(t){for(var e,n=this;n instanceof kn;){var r=Oo(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},On.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Nn){var e=t;return this.__actions__.length&&(e=new Nn(this)),(e=e.reverse()).__actions__.push({func:ns,args:[Wo],thisArg:void 0}),new xn(e,this.__chain__)}return this.thru(Wo)},On.prototype.toJSON=On.prototype.valueOf=On.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},On.prototype.first=On.prototype.head,Qt&&(On.prototype[Qt]=function(){return this}),On}();Gt._=Ke,void 0===(i=function(){return Ke}.call(e,n,e,r))||(r.exports=i)}).call(this)}).call(this,n(24),n(48)(t))},function(t,e,n){"use strict";var r=n(28);t.exports={USER_AGENT:"".concat(r.title," ").concat(r.version),SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",DTMF_TRANSPORT:{INFO:"INFO",RFC2833:"RFC2833"},REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO,NOTIFY",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60,CONNECTION_RECOVERY_MAX_INTERVAL:30,CONNECTION_RECOVERY_MIN_INTERVAL:2}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(26);t.exports=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e?(this._debug=i.default("".concat("JsSIP",":").concat(e)),this._warn=i.default("".concat("JsSIP",":WARN:").concat(e)),this._error=i.default("".concat("JsSIP",":ERROR:").concat(e))):(this._debug=i.default("JsSIP"),this._warn=i.default("".concat("JsSIP",":WARN")),this._error=i.default("".concat("JsSIP",":ERROR"))),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}var e,n,o;return e=t,(n=[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])&&r(e.prototype,n),o&&r(e,o),t}()},function(t,e,n){"use strict";var r,i=n(35),o=Object.prototype.toString,s=(r=Object.create(null),function(t){var e=o.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())});function u(t){return t=t.toLowerCase(),function(e){return s(e)===t}}function a(t){return Array.isArray(t)}function l(t){return void 0===t}var c=u("ArrayBuffer");function f(t){return null!==t&&"object"==typeof t}function h(t){if("object"!==s(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var d=u("Date"),p=u("File"),_=u("Blob"),v=u("FileList");function g(t){return"[object Function]"===o.call(t)}var m=u("URLSearchParams");function y(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),a(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var b,T=(b="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(t){return b&&t instanceof b});t.exports={isArray:a,isArrayBuffer:c,isBuffer:function(t){return null!==t&&!l(t)&&null!==t.constructor&&!l(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return t&&("function"==typeof FormData&&t instanceof FormData||"[object FormData]"===o.call(t)||g(t.toString)&&"[object FormData]"===t.toString())},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&c(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:f,isPlainObject:h,isUndefined:l,isDate:d,isFile:p,isBlob:_,isFunction:g,isStream:function(t){return f(t)&&g(t.pipe)},isURLSearchParams:m,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:y,merge:function t(){var e={};function n(n,r){h(e[r])&&h(n)?e[r]=t(e[r],n):h(n)?e[r]=t({},n):a(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)y(arguments[r],n);return e},extend:function(t,e,n){return y(e,(function(e,r){t[r]=n&&"function"==typeof e?i(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)},toFlatObject:function(t,e,n){var r,i,o,s={};e=e||{};do{for(i=(r=Object.getOwnPropertyNames(t)).length;i-- >0;)s[o=r[i]]||(e[o]=t[o],s[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:s,kindOfTest:u,endsWith:function(t,e,n){t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return-1!==r&&r===n},toArray:function(t){if(!t)return null;var e=t.length;if(l(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n},isTypedArray:T,isFileList:v}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,s=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw s}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=n(2),u=n(15),a=n(10);e.str_utf8_length=function(t){return unescape(encodeURIComponent(t)).length};var l=e.isFunction=function(t){return void 0!==t&&"[object Function]"===Object.prototype.toString.call(t)};e.isString=function(t){return void 0!==t&&"[object String]"===Object.prototype.toString.call(t)},e.isDecimal=function(t){return!isNaN(t)&&parseFloat(t)===parseInt(t,10)},e.isEmpty=function(t){return null===t||""===t||void 0===t||Array.isArray(t)&&0===t.length||"number"==typeof t&&isNaN(t)},e.hasMethods=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var s=o[i];if(l(t[s]))return!1}return!0};var c=e.createRandomToken=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r="";for(e=0;e<t;e++)r+=(Math.random()*n|0).toString(n);return r};e.newTag=function(){return c(10)},e.newUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},e.hostType=function(t){if(t)return-1!==(t=a.parse(t,"host"))?t.host_type:void 0};var f=e.escapeUser=function(t){return encodeURIComponent(decodeURIComponent(t)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")};e.normalizeTarget=function(t,e){if(t){if(t instanceof u)return t;if("string"==typeof t){var n,r,i,o=t.split("@");switch(o.length){case 1:if(!e)return;n=t,r=e;break;case 2:n=o[0],r=o[1];break;default:n=o.slice(0,o.length-1).join("@"),r=o[o.length-1]}return n=n.replace(/^(sips?|tel):/i,""),/^[-.()]*\+?[0-9\-.()]+$/.test(n)&&(n=n.replace(/[-.()]/g,"")),t="".concat(s.SIP,":").concat(f(n),"@").concat(r),(i=u.parse(t))?i:void 0}}else;},e.headerize=function(t){var e,n={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},r=t.toLowerCase().replace(/_/g,"-").split("-"),i="",o=r.length;for(e=0;e<o;e++)0!==e&&(i+="-"),i+=r[e].charAt(0).toUpperCase()+r[e].substring(1);return n[i]&&(i=n[i]),i},e.sipErrorCause=function(t){for(var e in s.SIP_ERROR_CAUSES)if(-1!==s.SIP_ERROR_CAUSES[e].indexOf(t))return s.causes[e];return s.causes.SIP_FAILURE_CODE},e.getRandomTestNetIP=function(){return"192.0.2.".concat((t=1,e=254,Math.floor(Math.random()*(e-t+1)+t)));var t,e},e.calculateMD5=function(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n=2147483648&t,r=2147483648&e,i=1073741824&t,o=1073741824&e,s=(1073741823&t)+(1073741823&e);return i&o?2147483648^s^n^r:i|o?1073741824&s?3221225472^s^n^r:1073741824^s^n^r:s^n^r}function r(t,r,i,o,s,u,a){return t=n(t,n(n(function(t,e,n){return t&e|~t&n}(r,i,o),s),a)),n(e(t,u),r)}function i(t,r,i,o,s,u,a){return t=n(t,n(n(function(t,e,n){return t&n|e&~n}(r,i,o),s),a)),n(e(t,u),r)}function o(t,r,i,o,s,u,a){return t=n(t,n(n(function(t,e,n){return t^e^n}(r,i,o),s),a)),n(e(t,u),r)}function s(t,r,i,o,s,u,a){return t=n(t,n(n(function(t,e,n){return e^(t|~n)}(r,i,o),s),a)),n(e(t,u),r)}function u(t){var e,n="",r="";for(e=0;e<=3;e++)n+=(r="0".concat((t>>>8*e&255).toString(16))).substr(r.length-2,2);return n}var a,l,c,f,h,d,p,_,v,g;for(a=function(t){for(var e,n=t.length,r=n+8,i=16*((r-r%64)/64+1),o=new Array(i-1),s=0,u=0;u<n;)s=u%4*8,o[e=(u-u%4)/4]=o[e]|t.charCodeAt(u)<<s,u++;return s=u%4*8,o[e=(u-u%4)/4]=o[e]|128<<s,o[i-2]=n<<3,o[i-1]=n>>>29,o}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),p=1732584193,_=4023233417,v=2562383102,g=271733878,l=0;l<a.length;l+=16)c=p,f=_,h=v,d=g,p=r(p,_,v,g,a[l+0],7,3614090360),g=r(g,p,_,v,a[l+1],12,3905402710),v=r(v,g,p,_,a[l+2],17,606105819),_=r(_,v,g,p,a[l+3],22,3250441966),p=r(p,_,v,g,a[l+4],7,4118548399),g=r(g,p,_,v,a[l+5],12,1200080426),v=r(v,g,p,_,a[l+6],17,2821735955),_=r(_,v,g,p,a[l+7],22,4249261313),p=r(p,_,v,g,a[l+8],7,1770035416),g=r(g,p,_,v,a[l+9],12,2336552879),v=r(v,g,p,_,a[l+10],17,4294925233),_=r(_,v,g,p,a[l+11],22,2304563134),p=r(p,_,v,g,a[l+12],7,1804603682),g=r(g,p,_,v,a[l+13],12,4254626195),v=r(v,g,p,_,a[l+14],17,2792965006),p=i(p,_=r(_,v,g,p,a[l+15],22,1236535329),v,g,a[l+1],5,4129170786),g=i(g,p,_,v,a[l+6],9,3225465664),v=i(v,g,p,_,a[l+11],14,643717713),_=i(_,v,g,p,a[l+0],20,3921069994),p=i(p,_,v,g,a[l+5],5,3593408605),g=i(g,p,_,v,a[l+10],9,38016083),v=i(v,g,p,_,a[l+15],14,3634488961),_=i(_,v,g,p,a[l+4],20,3889429448),p=i(p,_,v,g,a[l+9],5,568446438),g=i(g,p,_,v,a[l+14],9,3275163606),v=i(v,g,p,_,a[l+3],14,4107603335),_=i(_,v,g,p,a[l+8],20,1163531501),p=i(p,_,v,g,a[l+13],5,2850285829),g=i(g,p,_,v,a[l+2],9,4243563512),v=i(v,g,p,_,a[l+7],14,1735328473),p=o(p,_=i(_,v,g,p,a[l+12],20,2368359562),v,g,a[l+5],4,4294588738),g=o(g,p,_,v,a[l+8],11,2272392833),v=o(v,g,p,_,a[l+11],16,1839030562),_=o(_,v,g,p,a[l+14],23,4259657740),p=o(p,_,v,g,a[l+1],4,2763975236),g=o(g,p,_,v,a[l+4],11,1272893353),v=o(v,g,p,_,a[l+7],16,4139469664),_=o(_,v,g,p,a[l+10],23,3200236656),p=o(p,_,v,g,a[l+13],4,681279174),g=o(g,p,_,v,a[l+0],11,3936430074),v=o(v,g,p,_,a[l+3],16,3572445317),_=o(_,v,g,p,a[l+6],23,76029189),p=o(p,_,v,g,a[l+9],4,3654602809),g=o(g,p,_,v,a[l+12],11,3873151461),v=o(v,g,p,_,a[l+15],16,530742520),p=s(p,_=o(_,v,g,p,a[l+2],23,3299628645),v,g,a[l+0],6,4096336452),g=s(g,p,_,v,a[l+7],10,1126891415),v=s(v,g,p,_,a[l+14],15,2878612391),_=s(_,v,g,p,a[l+5],21,4237533241),p=s(p,_,v,g,a[l+12],6,1700485571),g=s(g,p,_,v,a[l+3],10,2399980690),v=s(v,g,p,_,a[l+10],15,4293915773),_=s(_,v,g,p,a[l+1],21,2240044497),p=s(p,_,v,g,a[l+8],6,1873313359),g=s(g,p,_,v,a[l+15],10,4264355552),v=s(v,g,p,_,a[l+6],15,2734768916),_=s(_,v,g,p,a[l+13],21,1309151649),p=s(p,_,v,g,a[l+4],6,4149444226),g=s(g,p,_,v,a[l+11],10,3174756917),v=s(v,g,p,_,a[l+2],15,718787259),_=s(_,v,g,p,a[l+9],21,3951481745),p=n(p,c),_=n(_,f),v=n(v,h),g=n(g,d);return(u(p)+u(_)+u(v)+u(g)).toLowerCase()},e.closeMediaStream=function(t){if(t)try{if(t.getTracks){var e,n=i(t.getTracks());try{for(n.s();!(e=n.n()).done;){e.value.stop()}}catch(t){n.e(t)}finally{n.f()}}else{var o,s=i(t.getAudioTracks());try{for(s.s();!(o=s.n()).done;){o.value.stop()}}catch(t){s.e(t)}finally{s.f()}var u,a=i(t.getVideoTracks());try{for(a.s();!(u=a.n()).done;){u.value.stop()}}catch(t){a.e(t)}finally{a.f()}}}catch(e){"function"!=typeof t.stop&&"object"!==r(t.stop)||t.stop()}},e.cloneArray=function(t){return t&&t.slice()||[]},e.cloneObject=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&Object.assign({},t)||e}},function(t,e,n){"use strict";function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}n.d(e,"a",(function(){return r})),r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e)}return this},r.prototype.emitReserved=r.prototype.emit,r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return a}));var r=n(8);function i(t,...e){return e.reduce((e,n)=>(t.hasOwnProperty(n)&&(e[n]=t[n]),e),{})}const o=setTimeout,s=clearTimeout;function u(t,e){e.useNativeTimers?(t.setTimeoutFn=o.bind(r.a),t.clearTimeoutFn=s.bind(r.a)):(t.setTimeoutFn=setTimeout.bind(r.a),t.clearTimeoutFn=clearTimeout.bind(r.a))}function a(t){return"string"==typeof t?function(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function u(){u.init.call(this)}t.exports=u,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,n)}(t,i,{once:!0})}))},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var a=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?u.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var i,o,s,u;if(l(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(t))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,u=a,console&&console.warn&&console.warn(u)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):v(i,i.length)}function _(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},u.prototype.getMaxListeners=function(){return c(this)},u.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var a=i[t];if(void 0===a)return!1;if("function"==typeof a)o(a,this,e);else{var l=a.length,c=v(a,l);for(n=0;n<l;++n)o(c[n],this,e)}return!0},u.prototype.addListener=function(t,e){return f(this,t,e,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(t,e){return f(this,t,e,!0)},u.prototype.once=function(t,e){return l(e),this.on(t,d(this,t,e)),this},u.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,d(this,t,e)),this},u.prototype.removeListener=function(t,e){var n,r,i,o,s;if(l(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},u.prototype.listeners=function(t){return p(this,t,!0)},u.prototype.rawListeners=function(t){return p(this,t,!1)},u.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):_.call(t,e)},u.prototype.listenerCount=_,u.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){"use strict";t.exports=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,r){var i={CRLF:l,DIGIT:c,ALPHA:f,HEXDIG:h,WSP:d,OCTET:p,DQUOTE:_,SP:v,HTAB:g,alphanum:m,reserved:y,unreserved:b,mark:T,escaped:E,LWS:w,SWS:A,HCOLON:S,TEXT_UTF8_TRIM:C,TEXT_UTF8char:R,UTF8_NONASCII:O,UTF8_CONT:I,LHEX:function(){var t;null===(t=c())&&(/^[a-f]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[a-f]")));return t},token:k,token_nodot:x,separators:function(){var t;40===e.charCodeAt(o)?(t="(",o++):(t=null,a('"("'));null===t&&(41===e.charCodeAt(o)?(t=")",o++):(t=null,a('")"')),null===t&&(60===e.charCodeAt(o)?(t="<",o++):(t=null,a('"<"')),null===t&&(62===e.charCodeAt(o)?(t=">",o++):(t=null,a('">"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,a('"@"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,a('","')),null===t&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,a('";"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,a('":"')),null===t&&(92===e.charCodeAt(o)?(t="\\",o++):(t=null,a('"\\\\"')),null===t&&null===(t=_())&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,a('"/"')),null===t&&(91===e.charCodeAt(o)?(t="[",o++):(t=null,a('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,a('"]"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,a('"?"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,a('"="')),null===t&&(123===e.charCodeAt(o)?(t="{",o++):(t=null,a('"{"')),null===t&&(125===e.charCodeAt(o)?(t="}",o++):(t=null,a('"}"')),null===t&&null===(t=v())&&(t=g()))))))))))))))));return t},word:N,STAR:P,SLASH:D,EQUAL:U,LPAREN:L,RPAREN:j,RAQUOT:M,LAQUOT:q,COMMA:F,SEMI:H,COLON:B,LDQUOT:W,RDQUOT:z,comment:function t(){var e,n,r,i;if(i=o,null!==(e=L())){for(n=[],null===(r=V())&&null===(r=$())&&(r=t());null!==r;)n.push(r),null===(r=V())&&null===(r=$())&&(r=t());null!==n&&null!==(r=j())?e=[e,n,r]:(e=null,o=i)}else e=null,o=i;return e},ctext:V,quoted_string:Y,quoted_string_clean:G,qdtext:K,quoted_pair:$,SIP_URI_noparams:J,SIP_URI:X,uri_scheme:Q,uri_scheme_sips:Z,uri_scheme_sip:tt,userinfo:et,user:nt,user_unreserved:rt,password:it,hostport:ot,host:st,hostname:ut,domainlabel:at,toplabel:lt,IPv6reference:ct,IPv6address:ft,h16:ht,ls32:dt,IPv4address:pt,dec_octet:_t,port:vt,uri_parameters:gt,uri_parameter:mt,transport_param:yt,user_param:bt,method_param:Tt,ttl_param:Et,maddr_param:wt,lr_param:At,other_param:St,pname:Ct,pvalue:Rt,paramchar:Ot,param_unreserved:It,headers:kt,header:xt,hname:Nt,hvalue:Pt,hnv_unreserved:Dt,Request_Response:function(){var t;null===(t=ce())&&(t=Ut());return t},Request_Line:Ut,Request_URI:Lt,absoluteURI:jt,hier_part:Mt,net_path:qt,abs_path:Ft,opaque_part:Ht,uric:Bt,uric_no_slash:Wt,path_segments:zt,segment:Vt,param:Yt,pchar:Gt,scheme:Kt,authority:$t,srvr:Jt,reg_name:Xt,query:Qt,SIP_Version:Zt,INVITEm:te,ACKm:ee,OPTIONSm:ne,BYEm:re,CANCELm:ie,REGISTERm:oe,SUBSCRIBEm:se,NOTIFYm:ue,REFERm:ae,Method:le,Status_Line:ce,Status_Code:fe,extension_code:he,Reason_Phrase:de,Allow_Events:function(){var t,e,n,r,i,s;if(i=o,null!==(t=je())){for(e=[],s=o,null!==(n=F())&&null!==(r=je())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=F())&&null!==(r=je())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t},Call_ID:function(){var t,n,r,i,s,u;i=o,s=o,null!==(t=N())?(u=o,64===e.charCodeAt(o)?(n="@",o++):(n=null,a('"@"')),null!==n&&null!==(r=N())?n=[n,r]:(n=null,o=u),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=s)):(t=null,o=s);null!==t&&(t=function(t){Fn=e.substring(o,t)}(i));null===t&&(o=i);return t},Contact:function(){var t,e,n,r,i,s,u;if(i=o,null===(t=P()))if(s=o,null!==(t=pe())){for(e=[],u=o,null!==(n=F())&&null!==(r=pe())?n=[n,r]:(n=null,o=u);null!==n;)e.push(n),u=o,null!==(n=F())&&null!==(r=pe())?n=[n,r]:(n=null,o=u);null!==e?t=[t,e]:(t=null,o=s)}else t=null,o=s;null!==t&&(t=function(t){var e,n;for(n=Fn.multi_header.length,e=0;e<n;e++)if(null===Fn.multi_header[e].parsed){Fn=null;break}Fn=null!==Fn?Fn.multi_header:-1}());null===t&&(o=i);return t},contact_param:pe,name_addr:_e,display_name:ve,contact_params:ge,c_p_q:me,c_p_expires:ye,delta_seconds:be,qvalue:Te,generic_param:Ee,gen_value:we,Content_Disposition:function(){var t,e,n,r,i,s;if(i=o,null!==(t=Ae())){for(e=[],s=o,null!==(n=H())&&null!==(r=Se())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=H())&&null!==(r=Se())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t},disp_type:Ae,disp_param:Se,handling_param:Ce,Content_Encoding:function(){var t,e,n,r,i,s;if(i=o,null!==(t=k())){for(e=[],s=o,null!==(n=F())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=F())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t},Content_Length:function(){var t,e,n;if(n=o,null!==(e=c()))for(t=[];null!==e;)t.push(e),e=c();else t=null;null!==t&&(t=void(Fn=parseInt(t.join(""))));null===t&&(o=n);return t},Content_Type:function(){var t,n;n=o,null!==(t=Re())&&(t=function(t){Fn=e.substring(o,t)}(n));null===t&&(o=n);return t},media_type:Re,m_type:Oe,discrete_type:Ie,composite_type:ke,extension_token:xe,x_token:Ne,m_subtype:Pe,m_parameter:De,m_value:Ue,CSeq:function(){var t,e,n,r;r=o,null!==(t=Le())&&null!==(e=w())&&null!==(n=le())?t=[t,e,n]:(t=null,o=r);return t},CSeq_value:Le,Expires:function(){var t,e;e=o,null!==(t=be())&&(t=void(Fn=t));null===t&&(o=e);return t},Event:function(){var t,e,n,r,i,s,u;if(i=o,s=o,null!==(t=je())){for(e=[],u=o,null!==(n=H())&&null!==(r=Ee())?n=[n,r]:(n=null,o=u);null!==n;)e.push(n),u=o,null!==(n=H())&&null!==(r=Ee())?n=[n,r]:(n=null,o=u);null!==e?t=[t,e]:(t=null,o=s)}else t=null,o=s;null!==t&&(a=t[0],t=void(Fn.event=a.join("").toLowerCase()));var a;null===t&&(o=i);return t},event_type:je,From:function(){var t,e,n,r,i,s,u;i=o,s=o,null===(t=J())&&(t=_e());if(null!==t){for(e=[],u=o,null!==(n=H())&&null!==(r=Me())?n=[n,r]:(n=null,o=u);null!==n;)e.push(n),u=o,null!==(n=H())&&null!==(r=Me())?n=[n,r]:(n=null,o=u);null!==e?t=[t,e]:(t=null,o=s)}else t=null,o=s;null!==t&&(t=function(t){var e=Fn.tag;try{Fn=new qn(Fn.uri,Fn.display_name,Fn.params),e&&Fn.setParam("tag",e)}catch(t){Fn=-1}}());null===t&&(o=i);return t},from_param:Me,tag_param:qe,Max_Forwards:function(){var t,e,n;if(n=o,null!==(e=c()))for(t=[];null!==e;)t.push(e),e=c();else t=null;null!==t&&(t=void(Fn=parseInt(t.join(""))));null===t&&(o=n);return t},Min_Expires:function(){var t,e;e=o,null!==(t=be())&&(t=void(Fn=t));null===t&&(o=e);return t},Name_Addr_Header:function(){var t,e,n,r,i,s,u,a,l,c;a=o,l=o,t=[],e=ve();for(;null!==e;)t.push(e),e=ve();if(null!==t)if(null!==(e=q()))if(null!==(n=X()))if(null!==(r=M())){for(i=[],c=o,null!==(s=H())&&null!==(u=Ee())?s=[s,u]:(s=null,o=c);null!==s;)i.push(s),c=o,null!==(s=H())&&null!==(u=Ee())?s=[s,u]:(s=null,o=c);null!==i?t=[t,e,n,r,i]:(t=null,o=l)}else t=null,o=l;else t=null,o=l;else t=null,o=l;else t=null,o=l;null!==t&&(t=function(t){try{Fn=new qn(Fn.uri,Fn.display_name,Fn.params)}catch(t){Fn=-1}}());null===t&&(o=a);return t},Proxy_Authenticate:function(){return Fe()},challenge:Fe,other_challenge:He,auth_param:Be,digest_cln:We,realm:ze,realm_value:Ve,domain:Ye,URI:Ge,nonce:Ke,nonce_value:$e,opaque:Je,stale:Xe,algorithm:Qe,qop_options:Ze,qop_value:tn,Proxy_Require:function(){var t,e,n,r,i,s;if(i=o,null!==(t=k())){for(e=[],s=o,null!==(n=F())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=F())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t},Record_Route:function(){var t,e,n,r,i,s,u;if(i=o,s=o,null!==(t=en())){for(e=[],u=o,null!==(n=F())&&null!==(r=en())?n=[n,r]:(n=null,o=u);null!==n;)e.push(n),u=o,null!==(n=F())&&null!==(r=en())?n=[n,r]:(n=null,o=u);null!==e?t=[t,e]:(t=null,o=s)}else t=null,o=s;null!==t&&(t=function(t){var e,n;for(n=Fn.multi_header.length,e=0;e<n;e++)if(null===Fn.multi_header[e].parsed){Fn=null;break}Fn=null!==Fn?Fn.multi_header:-1}());null===t&&(o=i);return t},rec_route:en,Reason:function(){var t,n,r,i,s,u,l;s=o,u=o,"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,a('"SIP"'));null===t&&(t=k());if(null!==t){for(n=[],l=o,null!==(r=H())&&null!==(i=nn())?r=[r,i]:(r=null,o=l);null!==r;)n.push(r),l=o,null!==(r=H())&&null!==(i=nn())?r=[r,i]:(r=null,o=l);null!==n?t=[t,n]:(t=null,o=u)}else t=null,o=u;null!==t&&(t=function(t,e){if(Fn.protocol=e.toLowerCase(),Fn.params||(Fn.params={}),Fn.params.text&&'"'===Fn.params.text[0]){var n=Fn.params.text;Fn.text=n.substring(1,n.length-1),delete Fn.params.text}}(0,t[0]));null===t&&(o=s);return t},reason_param:nn,reason_cause:rn,Require:function(){var t,e,n,r,i,s;if(i=o,null!==(t=k())){for(e=[],s=o,null!==(n=F())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=F())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t},Route:function(){var t,e,n,r,i,s;if(i=o,null!==(t=on())){for(e=[],s=o,null!==(n=F())&&null!==(r=on())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=F())&&null!==(r=on())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t},route_param:on,Subscription_State:function(){var t,e,n,r,i,s;if(i=o,null!==(t=sn())){for(e=[],s=o,null!==(n=H())&&null!==(r=un())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=H())&&null!==(r=un())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t},substate_value:sn,subexp_params:un,event_reason_value:an,Subject:function(){var t;return t=null!==(t=C())?t:""},Supported:function(){var t,e,n,r,i,s;if(i=o,null!==(t=k())){for(e=[],s=o,null!==(n=F())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=F())&&null!==(r=k())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t=null!==t?t:""},To:function(){var t,e,n,r,i,s,u;i=o,s=o,null===(t=J())&&(t=_e());if(null!==t){for(e=[],u=o,null!==(n=H())&&null!==(r=ln())?n=[n,r]:(n=null,o=u);null!==n;)e.push(n),u=o,null!==(n=H())&&null!==(r=ln())?n=[n,r]:(n=null,o=u);null!==e?t=[t,e]:(t=null,o=s)}else t=null,o=s;null!==t&&(t=function(t){var e=Fn.tag;try{Fn=new qn(Fn.uri,Fn.display_name,Fn.params),e&&Fn.setParam("tag",e)}catch(t){Fn=-1}}());null===t&&(o=i);return t},to_param:ln,Via:function(){var t,e,n,r,i,s;if(i=o,null!==(t=cn())){for(e=[],s=o,null!==(n=F())&&null!==(r=cn())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=F())&&null!==(r=cn())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t},via_param:cn,via_params:fn,via_ttl:hn,via_maddr:dn,via_received:pn,via_branch:_n,response_port:vn,rport:gn,sent_protocol:mn,protocol_name:yn,transport:bn,sent_by:Tn,via_host:En,via_port:wn,ttl:An,WWW_Authenticate:function(){return Fe()},Session_Expires:function(){var t,e,n,r,i,s;if(i=o,null!==(t=Sn())){for(e=[],s=o,null!==(n=H())&&null!==(r=Cn())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=H())&&null!==(r=Cn())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t},s_e_expires:Sn,s_e_params:Cn,s_e_refresher:Rn,extension_header:function(){var t,e,n,r;r=o,null!==(t=k())&&null!==(e=S())&&null!==(n=On())?t=[t,e,n]:(t=null,o=r);return t},header_value:On,message_body:function(){var t,e;t=[],e=p();for(;null!==e;)t.push(e),e=p();return t},uuid_URI:function(){var t,n,r;r=o,"uuid:"===e.substr(o,5)?(t="uuid:",o+=5):(t=null,a('"uuid:"'));null!==t&&null!==(n=In())?t=[t,n]:(t=null,o=r);return t},uuid:In,hex4:kn,hex8:xn,hex12:Nn,Refer_To:function(){var t,e,n,r,i,s,u;i=o,s=o,null===(t=J())&&(t=_e());if(null!==t){for(e=[],u=o,null!==(n=H())&&null!==(r=Ee())?n=[n,r]:(n=null,o=u);null!==n;)e.push(n),u=o,null!==(n=H())&&null!==(r=Ee())?n=[n,r]:(n=null,o=u);null!==e?t=[t,e]:(t=null,o=s)}else t=null,o=s;null!==t&&(t=function(t){try{Fn=new qn(Fn.uri,Fn.display_name,Fn.params)}catch(t){Fn=-1}}());null===t&&(o=i);return t},Replaces:function(){var t,e,n,r,i,s;if(i=o,null!==(t=Pn())){for(e=[],s=o,null!==(n=H())&&null!==(r=Dn())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=H())&&null!==(r=Dn())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t},call_id:Pn,replaces_param:Dn,to_tag:Un,from_tag:Ln,early_flag:jn};if(void 0!==r){if(void 0===i[r])throw new Error("Invalid rule name: "+t(r)+".")}else r="CRLF";var o=0,s=0,u=[];function a(t){o<s||(o>s&&(s=o,u=[]),u.push(t))}function l(){var t;return"\r\n"===e.substr(o,2)?(t="\r\n",o+=2):(t=null,a('"\\r\\n"')),t}function c(){var t;return/^[0-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[0-9]")),t}function f(){var t;return/^[a-zA-Z]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[a-zA-Z]")),t}function h(){var t;return/^[0-9a-fA-F]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[0-9a-fA-F]")),t}function d(){var t;return null===(t=v())&&(t=g()),t}function p(){var t;return/^[\0-\xFF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[\\0-\\xFF]")),t}function _(){var t;return/^["]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a('["]')),t}function v(){var t;return 32===e.charCodeAt(o)?(t=" ",o++):(t=null,a('" "')),t}function g(){var t;return 9===e.charCodeAt(o)?(t="\t",o++):(t=null,a('"\\t"')),t}function m(){var t;return/^[a-zA-Z0-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[a-zA-Z0-9]")),t}function y(){var t;return 59===e.charCodeAt(o)?(t=";",o++):(t=null,a('";"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,a('"/"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,a('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,a('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,a('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,a('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,a('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,a('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,a('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,a('","'))))))))))),t}function b(){var t;return null===(t=m())&&(t=T()),t}function T(){var t;return 45===e.charCodeAt(o)?(t="-",o++):(t=null,a('"-"')),null===t&&(95===e.charCodeAt(o)?(t="_",o++):(t=null,a('"_"')),null===t&&(46===e.charCodeAt(o)?(t=".",o++):(t=null,a('"."')),null===t&&(33===e.charCodeAt(o)?(t="!",o++):(t=null,a('"!"')),null===t&&(126===e.charCodeAt(o)?(t="~",o++):(t=null,a('"~"')),null===t&&(42===e.charCodeAt(o)?(t="*",o++):(t=null,a('"*"')),null===t&&(39===e.charCodeAt(o)?(t="'",o++):(t=null,a('"\'"')),null===t&&(40===e.charCodeAt(o)?(t="(",o++):(t=null,a('"("')),null===t&&(41===e.charCodeAt(o)?(t=")",o++):(t=null,a('")"')))))))))),t}function E(){var t,n,r,i,s;return i=o,s=o,37===e.charCodeAt(o)?(t="%",o++):(t=null,a('"%"')),null!==t&&null!==(n=h())&&null!==(r=h())?t=[t,n,r]:(t=null,o=s),null!==t&&(t=t.join("")),null===t&&(o=i),t}function w(){var t,e,n,r,i,s;for(r=o,i=o,s=o,t=[],e=d();null!==e;)t.push(e),e=d();if(null!==t&&null!==(e=l())?t=[t,e]:(t=null,o=s),null!==(t=null!==t?t:"")){if(null!==(n=d()))for(e=[];null!==n;)e.push(n),n=d();else e=null;null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return null!==t&&(t=" "),null===t&&(o=r),t}function A(){var t;return t=null!==(t=w())?t:""}function S(){var t,n,r,i,s;for(i=o,s=o,t=[],null===(n=v())&&(n=g());null!==n;)t.push(n),null===(n=v())&&(n=g());return null!==t?(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t=":"),null===t&&(o=i),t}function C(){var t,n,r,i,s,u,a;if(s=o,u=o,null!==(n=R()))for(t=[];null!==n;)t.push(n),n=R();else t=null;if(null!==t){for(n=[],a=o,r=[],i=w();null!==i;)r.push(i),i=w();for(null!==r&&null!==(i=R())?r=[r,i]:(r=null,o=a);null!==r;){for(n.push(r),a=o,r=[],i=w();null!==i;)r.push(i),i=w();null!==r&&null!==(i=R())?r=[r,i]:(r=null,o=a)}null!==n?t=[t,n]:(t=null,o=u)}else t=null,o=u;return null!==t&&(t=function(t){return e.substring(o,t)}(s)),null===t&&(o=s),t}function R(){var t;return/^[!-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[!-~]")),null===t&&(t=O()),t}function O(){var t;return/^[\x80-\uFFFF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[\\x80-\\uFFFF]")),t}function I(){var t;return/^[\x80-\xBF]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[\\x80-\\xBF]")),t}function k(){var t,n,r;if(r=o,null===(n=m())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null===n&&(33===e.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===e.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===e.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===e.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===e.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===e.charCodeAt(o)?(n="~",o++):(n=null,a('"~"')))))))))))),null!==n)for(t=[];null!==n;)t.push(n),null===(n=m())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null===n&&(33===e.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===e.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===e.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===e.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===e.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===e.charCodeAt(o)?(n="~",o++):(n=null,a('"~"'))))))))))));else t=null;return null!==t&&(t=function(t){return e.substring(o,t)}(r)),null===t&&(o=r),t}function x(){var t,n,r;if(r=o,null===(n=m())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(33===e.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===e.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===e.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===e.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===e.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===e.charCodeAt(o)?(n="~",o++):(n=null,a('"~"'))))))))))),null!==n)for(t=[];null!==n;)t.push(n),null===(n=m())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(33===e.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===e.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===e.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===e.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===e.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===e.charCodeAt(o)?(n="~",o++):(n=null,a('"~"')))))))))));else t=null;return null!==t&&(t=function(t){return e.substring(o,t)}(r)),null===t&&(o=r),t}function N(){var t,n,r;if(r=o,null===(n=m())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null===n&&(33===e.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===e.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===e.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===e.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===e.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===e.charCodeAt(o)?(n="~",o++):(n=null,a('"~"')),null===n&&(40===e.charCodeAt(o)?(n="(",o++):(n=null,a('"("')),null===n&&(41===e.charCodeAt(o)?(n=")",o++):(n=null,a('")"')),null===n&&(60===e.charCodeAt(o)?(n="<",o++):(n=null,a('"<"')),null===n&&(62===e.charCodeAt(o)?(n=">",o++):(n=null,a('">"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null===n&&(92===e.charCodeAt(o)?(n="\\",o++):(n=null,a('"\\\\"')),null===n&&null===(n=_())&&(47===e.charCodeAt(o)?(n="/",o++):(n=null,a('"/"')),null===n&&(91===e.charCodeAt(o)?(n="[",o++):(n=null,a('"["')),null===n&&(93===e.charCodeAt(o)?(n="]",o++):(n=null,a('"]"')),null===n&&(63===e.charCodeAt(o)?(n="?",o++):(n=null,a('"?"')),null===n&&(123===e.charCodeAt(o)?(n="{",o++):(n=null,a('"{"')),null===n&&(125===e.charCodeAt(o)?(n="}",o++):(n=null,a('"}"')))))))))))))))))))))))),null!==n)for(t=[];null!==n;)t.push(n),null===(n=m())&&(45===e.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null===n&&(46===e.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null===n&&(33===e.charCodeAt(o)?(n="!",o++):(n=null,a('"!"')),null===n&&(37===e.charCodeAt(o)?(n="%",o++):(n=null,a('"%"')),null===n&&(42===e.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null===n&&(95===e.charCodeAt(o)?(n="_",o++):(n=null,a('"_"')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(96===e.charCodeAt(o)?(n="`",o++):(n=null,a('"`"')),null===n&&(39===e.charCodeAt(o)?(n="'",o++):(n=null,a('"\'"')),null===n&&(126===e.charCodeAt(o)?(n="~",o++):(n=null,a('"~"')),null===n&&(40===e.charCodeAt(o)?(n="(",o++):(n=null,a('"("')),null===n&&(41===e.charCodeAt(o)?(n=")",o++):(n=null,a('")"')),null===n&&(60===e.charCodeAt(o)?(n="<",o++):(n=null,a('"<"')),null===n&&(62===e.charCodeAt(o)?(n=">",o++):(n=null,a('">"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null===n&&(92===e.charCodeAt(o)?(n="\\",o++):(n=null,a('"\\\\"')),null===n&&null===(n=_())&&(47===e.charCodeAt(o)?(n="/",o++):(n=null,a('"/"')),null===n&&(91===e.charCodeAt(o)?(n="[",o++):(n=null,a('"["')),null===n&&(93===e.charCodeAt(o)?(n="]",o++):(n=null,a('"]"')),null===n&&(63===e.charCodeAt(o)?(n="?",o++):(n=null,a('"?"')),null===n&&(123===e.charCodeAt(o)?(n="{",o++):(n=null,a('"{"')),null===n&&(125===e.charCodeAt(o)?(n="}",o++):(n=null,a('"}"'))))))))))))))))))))))));else t=null;return null!==t&&(t=function(t){return e.substring(o,t)}(r)),null===t&&(o=r),t}function P(){var t,n,r,i,s;return i=o,s=o,null!==(t=A())?(42===e.charCodeAt(o)?(n="*",o++):(n=null,a('"*"')),null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t="*"),null===t&&(o=i),t}function D(){var t,n,r,i,s;return i=o,s=o,null!==(t=A())?(47===e.charCodeAt(o)?(n="/",o++):(n=null,a('"/"')),null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t="/"),null===t&&(o=i),t}function U(){var t,n,r,i,s;return i=o,s=o,null!==(t=A())?(61===e.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t="="),null===t&&(o=i),t}function L(){var t,n,r,i,s;return i=o,s=o,null!==(t=A())?(40===e.charCodeAt(o)?(n="(",o++):(n=null,a('"("')),null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t="("),null===t&&(o=i),t}function j(){var t,n,r,i,s;return i=o,s=o,null!==(t=A())?(41===e.charCodeAt(o)?(n=")",o++):(n=null,a('")"')),null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t=")"),null===t&&(o=i),t}function M(){var t,n,r,i;return r=o,i=o,62===e.charCodeAt(o)?(t=">",o++):(t=null,a('">"')),null!==t&&null!==(n=A())?t=[t,n]:(t=null,o=i),null!==t&&(t=">"),null===t&&(o=r),t}function q(){var t,n,r,i;return r=o,i=o,null!==(t=A())?(60===e.charCodeAt(o)?(n="<",o++):(n=null,a('"<"')),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(t="<"),null===t&&(o=r),t}function F(){var t,n,r,i,s;return i=o,s=o,null!==(t=A())?(44===e.charCodeAt(o)?(n=",",o++):(n=null,a('","')),null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t=","),null===t&&(o=i),t}function H(){var t,n,r,i,s;return i=o,s=o,null!==(t=A())?(59===e.charCodeAt(o)?(n=";",o++):(n=null,a('";"')),null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t=";"),null===t&&(o=i),t}function B(){var t,n,r,i,s;return i=o,s=o,null!==(t=A())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t=":"),null===t&&(o=i),t}function W(){var t,e,n,r;return n=o,r=o,null!==(t=A())&&null!==(e=_())?t=[t,e]:(t=null,o=r),null!==t&&(t='"'),null===t&&(o=n),t}function z(){var t,e,n,r;return n=o,r=o,null!==(t=_())&&null!==(e=A())?t=[t,e]:(t=null,o=r),null!==t&&(t='"'),null===t&&(o=n),t}function V(){var t;return/^[!-']/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[!-']")),null===t&&(/^[*-[]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[*-[]")),null===t&&(/^[\]-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[\\]-~]")),null===t&&null===(t=O())&&(t=w()))),t}function Y(){var t,n,r,i,s,u;if(s=o,u=o,null!==(t=A()))if(null!==(n=_())){for(r=[],null===(i=K())&&(i=$());null!==i;)r.push(i),null===(i=K())&&(i=$());null!==r&&null!==(i=_())?t=[t,n,r,i]:(t=null,o=u)}else t=null,o=u;else t=null,o=u;return null!==t&&(t=function(t){return e.substring(o,t)}(s)),null===t&&(o=s),t}function G(){var t,n,r,i,s,u;if(s=o,u=o,null!==(t=A()))if(null!==(n=_())){for(r=[],null===(i=K())&&(i=$());null!==i;)r.push(i),null===(i=K())&&(i=$());null!==r&&null!==(i=_())?t=[t,n,r,i]:(t=null,o=u)}else t=null,o=u;else t=null,o=u;return null!==t&&(t=function(t){var n=e.substring(o,t).trim();return n.substring(1,n.length-1).replace(/\\([\x00-\x09\x0b-\x0c\x0e-\x7f])/g,"$1")}(s)),null===t&&(o=s),t}function K(){var t;return null===(t=w())&&(33===e.charCodeAt(o)?(t="!",o++):(t=null,a('"!"')),null===t&&(/^[#-[]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[#-[]")),null===t&&(/^[\]-~]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[\\]-~]")),null===t&&(t=O())))),t}function $(){var t,n,r;return r=o,92===e.charCodeAt(o)?(t="\\",o++):(t=null,a('"\\\\"')),null!==t?(/^[\0-\t]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,a("[\\0-\\t]")),null===n&&(/^[\x0B-\f]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,a("[\\x0B-\\f]")),null===n&&(/^[\x0E-]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,a("[\\x0E-]")))),null!==n?t=[t,n]:(t=null,o=r)):(t=null,o=r),t}function J(){var t,n,r,i,s,u;return s=o,u=o,null!==(t=Q())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=null!==(r=et())?r:"")&&null!==(i=ot())?t=[t,n,r,i]:(t=null,o=u)):(t=null,o=u),null!==t&&(t=function(t){try{Fn.uri=new Mn(Fn.scheme,Fn.user,Fn.host,Fn.port),delete Fn.scheme,delete Fn.user,delete Fn.host,delete Fn.host_type,delete Fn.port}catch(t){Fn=-1}}()),null===t&&(o=s),t}function X(){var t,n,i,s,u,l,c,f;return c=o,f=o,null!==(t=Q())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(i=null!==(i=et())?i:"")&&null!==(s=ot())&&null!==(u=gt())&&null!==(l=null!==(l=kt())?l:"")?t=[t,n,i,s,u,l]:(t=null,o=f)):(t=null,o=f),null!==t&&(t=function(t){try{Fn.uri=new Mn(Fn.scheme,Fn.user,Fn.host,Fn.port,Fn.uri_params,Fn.uri_headers),delete Fn.scheme,delete Fn.user,delete Fn.host,delete Fn.host_type,delete Fn.port,delete Fn.uri_params,"SIP_URI"===r&&(Fn=Fn.uri)}catch(t){Fn=-1}}()),null===t&&(o=c),t}function Q(){var t;return null===(t=Z())&&(t=tt()),t}function Z(){var t,n,r;return n=o,"sips"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,a('"sips"')),null!==t&&(r=t,t=void(Fn.scheme=r.toLowerCase())),null===t&&(o=n),t}function tt(){var t,n,r;return n=o,"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,a('"sip"')),null!==t&&(r=t,t=void(Fn.scheme=r.toLowerCase())),null===t&&(o=n),t}function et(){var t,n,r,i,s,u;return i=o,s=o,null!==(t=nt())?(u=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=it())?n=[n,r]:(n=null,o=u),null!==(n=null!==n?n:"")?(64===e.charCodeAt(o)?(r="@",o++):(r=null,a('"@"')),null!==r?t=[t,n,r]:(t=null,o=s)):(t=null,o=s)):(t=null,o=s),null!==t&&(t=function(t){Fn.user=decodeURIComponent(e.substring(o-1,t))}(i)),null===t&&(o=i),t}function nt(){var t,e;if(null===(e=b())&&null===(e=E())&&(e=rt()),null!==e)for(t=[];null!==e;)t.push(e),null===(e=b())&&null===(e=E())&&(e=rt());else t=null;return t}function rt(){var t;return 38===e.charCodeAt(o)?(t="&",o++):(t=null,a('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,a('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,a('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,a('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,a('","')),null===t&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,a('";"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,a('"?"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,a('"/"'))))))))),t}function it(){var t,n,r;for(r=o,t=[],null===(n=b())&&null===(n=E())&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,a('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,a('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,a('","')))))));null!==n;)t.push(n),null===(n=b())&&null===(n=E())&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,a('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')),null===n&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,a('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,a('","')))))));return null!==t&&(t=function(t){Fn.password=e.substring(o,t)}(r)),null===t&&(o=r),t}function ot(){var t,n,r,i,s;return i=o,null!==(t=st())?(s=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=vt())?n=[n,r]:(n=null,o=s),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=i)):(t=null,o=i),t}function st(){var t,n;return n=o,null===(t=ut())&&null===(t=pt())&&(t=ct()),null!==t&&(t=function(t){return Fn.host=e.substring(o,t).toLowerCase(),Fn.host}(n)),null===t&&(o=n),t}function ut(){var t,n,r,i,s,u;for(i=o,s=o,t=[],u=o,null!==(n=at())?(46===e.charCodeAt(o)?(r=".",o++):(r=null,a('"."')),null!==r?n=[n,r]:(n=null,o=u)):(n=null,o=u);null!==n;)t.push(n),u=o,null!==(n=at())?(46===e.charCodeAt(o)?(r=".",o++):(r=null,a('"."')),null!==r?n=[n,r]:(n=null,o=u)):(n=null,o=u);return null!==t&&null!==(n=lt())?(46===e.charCodeAt(o)?(r=".",o++):(r=null,a('"."')),null!==(r=null!==r?r:"")?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t=function(t){return Fn.host_type="domain",e.substring(o,t)}(i)),null===t&&(o=i),t}function at(){var t,n,r,i;if(i=o,null!==(t=m())){for(n=[],null===(r=m())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,a('"_"'))));null!==r;)n.push(r),null===(r=m())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,a('"_"'))));null!==n?t=[t,n]:(t=null,o=i)}else t=null,o=i;return t}function lt(){var t,n,r,i;if(i=o,null!==(t=f())){for(n=[],null===(r=m())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,a('"_"'))));null!==r;)n.push(r),null===(r=m())&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(95===e.charCodeAt(o)?(r="_",o++):(r=null,a('"_"'))));null!==n?t=[t,n]:(t=null,o=i)}else t=null,o=i;return t}function ct(){var t,n,r,i,s;return i=o,s=o,91===e.charCodeAt(o)?(t="[",o++):(t=null,a('"["')),null!==t&&null!==(n=ft())?(93===e.charCodeAt(o)?(r="]",o++):(r=null,a('"]"')),null!==r?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(t=function(t){return Fn.host_type="IPv6",e.substring(o,t)}(i)),null===t&&(o=i),t}function ft(){var t,n,r,i,s,u,l,c,f,h,d,p,_,v,g,m;return v=o,g=o,null!==(t=ht())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=ht())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=ht())?(58===e.charCodeAt(o)?(u=":",o++):(u=null,a('":"')),null!==u&&null!==(l=ht())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,a('":"')),null!==c&&null!==(f=ht())?(58===e.charCodeAt(o)?(h=":",o++):(h=null,a('":"')),null!==h&&null!==(d=ht())?(58===e.charCodeAt(o)?(p=":",o++):(p=null,a('":"')),null!==p&&null!==(_=dt())?t=[t,n,r,i,s,u,l,c,f,h,d,p,_]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,"::"===e.substr(o,2)?(t="::",o+=2):(t=null,a('"::"')),null!==t&&null!==(n=ht())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=ht())?(58===e.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=ht())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=ht())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,a('":"')),null!==f&&null!==(h=ht())?(58===e.charCodeAt(o)?(d=":",o++):(d=null,a('":"')),null!==d&&null!==(p=dt())?t=[t,n,r,i,s,u,l,c,f,h,d,p]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,"::"===e.substr(o,2)?(t="::",o+=2):(t=null,a('"::"')),null!==t&&null!==(n=ht())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=ht())?(58===e.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=ht())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=ht())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,a('":"')),null!==f&&null!==(h=dt())?t=[t,n,r,i,s,u,l,c,f,h]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,"::"===e.substr(o,2)?(t="::",o+=2):(t=null,a('"::"')),null!==t&&null!==(n=ht())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=ht())?(58===e.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=ht())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=dt())?t=[t,n,r,i,s,u,l,c]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,"::"===e.substr(o,2)?(t="::",o+=2):(t=null,a('"::"')),null!==t&&null!==(n=ht())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=ht())?(58===e.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=dt())?t=[t,n,r,i,s,u]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,"::"===e.substr(o,2)?(t="::",o+=2):(t=null,a('"::"')),null!==t&&null!==(n=ht())?(58===e.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=dt())?t=[t,n,r,i]:(t=null,o=g)):(t=null,o=g),null===t&&(g=o,"::"===e.substr(o,2)?(t="::",o+=2):(t=null,a('"::"')),null!==t&&null!==(n=dt())?t=[t,n]:(t=null,o=g),null===t&&(g=o,"::"===e.substr(o,2)?(t="::",o+=2):(t=null,a('"::"')),null!==t&&null!==(n=ht())?t=[t,n]:(t=null,o=g),null===t&&(g=o,null!==(t=ht())?("::"===e.substr(o,2)?(n="::",o+=2):(n=null,a('"::"')),null!==n&&null!==(r=ht())?(58===e.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=ht())?(58===e.charCodeAt(o)?(u=":",o++):(u=null,a('":"')),null!==u&&null!==(l=ht())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,a('":"')),null!==c&&null!==(f=ht())?(58===e.charCodeAt(o)?(h=":",o++):(h=null,a('":"')),null!==h&&null!==(d=dt())?t=[t,n,r,i,s,u,l,c,f,h,d]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,null!==(t=ht())?(m=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=ht())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?("::"===e.substr(o,2)?(r="::",o+=2):(r=null,a('"::"')),null!==r&&null!==(i=ht())?(58===e.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=ht())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=ht())?(58===e.charCodeAt(o)?(f=":",o++):(f=null,a('":"')),null!==f&&null!==(h=dt())?t=[t,n,r,i,s,u,l,c,f,h]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,null!==(t=ht())?(m=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=ht())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?(m=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=ht())?r=[r,i]:(r=null,o=m),null!==(r=null!==r?r:"")?("::"===e.substr(o,2)?(i="::",o+=2):(i=null,a('"::"')),null!==i&&null!==(s=ht())?(58===e.charCodeAt(o)?(u=":",o++):(u=null,a('":"')),null!==u&&null!==(l=ht())?(58===e.charCodeAt(o)?(c=":",o++):(c=null,a('":"')),null!==c&&null!==(f=dt())?t=[t,n,r,i,s,u,l,c,f]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,null!==(t=ht())?(m=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=ht())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?(m=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=ht())?r=[r,i]:(r=null,o=m),null!==(r=null!==r?r:"")?(m=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=ht())?i=[i,s]:(i=null,o=m),null!==(i=null!==i?i:"")?("::"===e.substr(o,2)?(s="::",o+=2):(s=null,a('"::"')),null!==s&&null!==(u=ht())?(58===e.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=dt())?t=[t,n,r,i,s,u,l,c]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,null!==(t=ht())?(m=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=ht())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?(m=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=ht())?r=[r,i]:(r=null,o=m),null!==(r=null!==r?r:"")?(m=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=ht())?i=[i,s]:(i=null,o=m),null!==(i=null!==i?i:"")?(m=o,58===e.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=ht())?s=[s,u]:(s=null,o=m),null!==(s=null!==s?s:"")?("::"===e.substr(o,2)?(u="::",o+=2):(u=null,a('"::"')),null!==u&&null!==(l=dt())?t=[t,n,r,i,s,u,l]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,null!==(t=ht())?(m=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=ht())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?(m=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=ht())?r=[r,i]:(r=null,o=m),null!==(r=null!==r?r:"")?(m=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=ht())?i=[i,s]:(i=null,o=m),null!==(i=null!==i?i:"")?(m=o,58===e.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=ht())?s=[s,u]:(s=null,o=m),null!==(s=null!==s?s:"")?(m=o,58===e.charCodeAt(o)?(u=":",o++):(u=null,a('":"')),null!==u&&null!==(l=ht())?u=[u,l]:(u=null,o=m),null!==(u=null!==u?u:"")?("::"===e.substr(o,2)?(l="::",o+=2):(l=null,a('"::"')),null!==l&&null!==(c=ht())?t=[t,n,r,i,s,u,l,c]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g),null===t&&(g=o,null!==(t=ht())?(m=o,58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=ht())?n=[n,r]:(n=null,o=m),null!==(n=null!==n?n:"")?(m=o,58===e.charCodeAt(o)?(r=":",o++):(r=null,a('":"')),null!==r&&null!==(i=ht())?r=[r,i]:(r=null,o=m),null!==(r=null!==r?r:"")?(m=o,58===e.charCodeAt(o)?(i=":",o++):(i=null,a('":"')),null!==i&&null!==(s=ht())?i=[i,s]:(i=null,o=m),null!==(i=null!==i?i:"")?(m=o,58===e.charCodeAt(o)?(s=":",o++):(s=null,a('":"')),null!==s&&null!==(u=ht())?s=[s,u]:(s=null,o=m),null!==(s=null!==s?s:"")?(m=o,58===e.charCodeAt(o)?(u=":",o++):(u=null,a('":"')),null!==u&&null!==(l=ht())?u=[u,l]:(u=null,o=m),null!==(u=null!==u?u:"")?(m=o,58===e.charCodeAt(o)?(l=":",o++):(l=null,a('":"')),null!==l&&null!==(c=ht())?l=[l,c]:(l=null,o=m),null!==(l=null!==l?l:"")?("::"===e.substr(o,2)?(c="::",o+=2):(c=null,a('"::"')),null!==c?t=[t,n,r,i,s,u,l,c]:(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g)):(t=null,o=g))))))))))))))),null!==t&&(t=function(t){return Fn.host_type="IPv6",e.substring(o,t)}(v)),null===t&&(o=v),t}function ht(){var t,e,n,r,i;return i=o,null!==(t=h())&&null!==(e=null!==(e=h())?e:"")&&null!==(n=null!==(n=h())?n:"")&&null!==(r=null!==(r=h())?r:"")?t=[t,e,n,r]:(t=null,o=i),t}function dt(){var t,n,r,i;return i=o,null!==(t=ht())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n&&null!==(r=ht())?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),null===t&&(t=pt()),t}function pt(){var t,n,r,i,s,u,l,c,f;return c=o,f=o,null!==(t=_t())?(46===e.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null!==n&&null!==(r=_t())?(46===e.charCodeAt(o)?(i=".",o++):(i=null,a('"."')),null!==i&&null!==(s=_t())?(46===e.charCodeAt(o)?(u=".",o++):(u=null,a('"."')),null!==u&&null!==(l=_t())?t=[t,n,r,i,s,u,l]:(t=null,o=f)):(t=null,o=f)):(t=null,o=f)):(t=null,o=f),null!==t&&(t=function(t){return Fn.host_type="IPv4",e.substring(o,t)}(c)),null===t&&(o=c),t}function _t(){var t,n,r,i;return i=o,"25"===e.substr(o,2)?(t="25",o+=2):(t=null,a('"25"')),null!==t?(/^[0-5]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,a("[0-5]")),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null===t&&(i=o,50===e.charCodeAt(o)?(t="2",o++):(t=null,a('"2"')),null!==t?(/^[0-4]/.test(e.charAt(o))?(n=e.charAt(o),o++):(n=null,a("[0-4]")),null!==n&&null!==(r=c())?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),null===t&&(i=o,49===e.charCodeAt(o)?(t="1",o++):(t=null,a('"1"')),null!==t&&null!==(n=c())&&null!==(r=c())?t=[t,n,r]:(t=null,o=i),null===t&&(i=o,/^[1-9]/.test(e.charAt(o))?(t=e.charAt(o),o++):(t=null,a("[1-9]")),null!==t&&null!==(n=c())?t=[t,n]:(t=null,o=i),null===t&&(t=c())))),t}function vt(){var t,e,n,r,i,s,u,a;return s=o,u=o,null!==(t=null!==(t=c())?t:"")&&null!==(e=null!==(e=c())?e:"")&&null!==(n=null!==(n=c())?n:"")&&null!==(r=null!==(r=c())?r:"")&&null!==(i=null!==(i=c())?i:"")?t=[t,e,n,r,i]:(t=null,o=u),null!==t&&(a=t,a=parseInt(a.join("")),Fn.port=a,t=a),null===t&&(o=s),t}function gt(){var t,n,r,i;for(t=[],i=o,59===e.charCodeAt(o)?(n=";",o++):(n=null,a('";"')),null!==n&&null!==(r=mt())?n=[n,r]:(n=null,o=i);null!==n;)t.push(n),i=o,59===e.charCodeAt(o)?(n=";",o++):(n=null,a('";"')),null!==n&&null!==(r=mt())?n=[n,r]:(n=null,o=i);return t}function mt(){var t;return null===(t=yt())&&null===(t=bt())&&null===(t=Tt())&&null===(t=Et())&&null===(t=wt())&&null===(t=At())&&(t=St()),t}function yt(){var t,n,r,i,s;return r=o,i=o,"transport="===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,a('"transport="')),null!==t?("udp"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,a('"udp"')),null===n&&("tcp"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,a('"tcp"')),null===n&&("sctp"===e.substr(o,4).toLowerCase()?(n=e.substr(o,4),o+=4):(n=null,a('"sctp"')),null===n&&("tls"===e.substr(o,3).toLowerCase()?(n=e.substr(o,3),o+=3):(n=null,a('"tls"')),null===n&&(n=k())))),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(s=t[1],Fn.uri_params||(Fn.uri_params={}),t=void(Fn.uri_params.transport=s.toLowerCase())),null===t&&(o=r),t}function bt(){var t,n,r,i,s;return r=o,i=o,"user="===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"user="')),null!==t?("phone"===e.substr(o,5).toLowerCase()?(n=e.substr(o,5),o+=5):(n=null,a('"phone"')),null===n&&("ip"===e.substr(o,2).toLowerCase()?(n=e.substr(o,2),o+=2):(n=null,a('"ip"')),null===n&&(n=k())),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==t&&(s=t[1],Fn.uri_params||(Fn.uri_params={}),t=void(Fn.uri_params.user=s.toLowerCase())),null===t&&(o=r),t}function Tt(){var t,n,r,i,s;return r=o,i=o,"method="===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,a('"method="')),null!==t&&null!==(n=le())?t=[t,n]:(t=null,o=i),null!==t&&(s=t[1],Fn.uri_params||(Fn.uri_params={}),t=void(Fn.uri_params.method=s)),null===t&&(o=r),t}function Et(){var t,n,r,i,s;return r=o,i=o,"ttl="===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,a('"ttl="')),null!==t&&null!==(n=An())?t=[t,n]:(t=null,o=i),null!==t&&(s=t[1],Fn.params||(Fn.params={}),t=void(Fn.params.ttl=s)),null===t&&(o=r),t}function wt(){var t,n,r,i,s;return r=o,i=o,"maddr="===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,a('"maddr="')),null!==t&&null!==(n=st())?t=[t,n]:(t=null,o=i),null!==t&&(s=t[1],Fn.uri_params||(Fn.uri_params={}),t=void(Fn.uri_params.maddr=s)),null===t&&(o=r),t}function At(){var t,n,r,i,s,u;return i=o,s=o,"lr"===e.substr(o,2).toLowerCase()?(t=e.substr(o,2),o+=2):(t=null,a('"lr"')),null!==t?(u=o,61===e.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null!==n&&null!==(r=k())?n=[n,r]:(n=null,o=u),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=s)):(t=null,o=s),null!==t&&(Fn.uri_params||(Fn.uri_params={}),t=void(Fn.uri_params.lr=void 0)),null===t&&(o=i),t}function St(){var t,n,r,i,s,u,l,c;return i=o,s=o,null!==(t=Ct())?(u=o,61===e.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null!==n&&null!==(r=Rt())?n=[n,r]:(n=null,o=u),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=s)):(t=null,o=s),null!==t&&(l=t[0],c=t[1],Fn.uri_params||(Fn.uri_params={}),c=void 0===c?void 0:c[1],t=void(Fn.uri_params[l.toLowerCase()]=c)),null===t&&(o=i),t}function Ct(){var t,e,n;if(n=o,null!==(e=Ot()))for(t=[];null!==e;)t.push(e),e=Ot();else t=null;return null!==t&&(t=t.join("")),null===t&&(o=n),t}function Rt(){var t,e,n;if(n=o,null!==(e=Ot()))for(t=[];null!==e;)t.push(e),e=Ot();else t=null;return null!==t&&(t=t.join("")),null===t&&(o=n),t}function Ot(){var t;return null===(t=It())&&null===(t=b())&&(t=E()),t}function It(){var t;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,a('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,a('"]"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,a('"/"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,a('":"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,a('"&"')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,a('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,a('"$"')))))))),t}function kt(){var t,n,r,i,s,u,l;if(u=o,63===e.charCodeAt(o)?(t="?",o++):(t=null,a('"?"')),null!==t)if(null!==(n=xt())){for(r=[],l=o,38===e.charCodeAt(o)?(i="&",o++):(i=null,a('"&"')),null!==i&&null!==(s=xt())?i=[i,s]:(i=null,o=l);null!==i;)r.push(i),l=o,38===e.charCodeAt(o)?(i="&",o++):(i=null,a('"&"')),null!==i&&null!==(s=xt())?i=[i,s]:(i=null,o=l);null!==r?t=[t,n,r]:(t=null,o=u)}else t=null,o=u;else t=null,o=u;return t}function xt(){var t,n,r,i,s,u,l;return i=o,s=o,null!==(t=Nt())?(61===e.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null!==n&&null!==(r=Pt())?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(u=t[0],l=t[2],u=u.join("").toLowerCase(),l=l.join(""),Fn.uri_headers||(Fn.uri_headers={}),t=void(Fn.uri_headers[u]?Fn.uri_headers[u].push(l):Fn.uri_headers[u]=[l])),null===t&&(o=i),t}function Nt(){var t,e;if(null===(e=Dt())&&null===(e=b())&&(e=E()),null!==e)for(t=[];null!==e;)t.push(e),null===(e=Dt())&&null===(e=b())&&(e=E());else t=null;return t}function Pt(){var t,e;for(t=[],null===(e=Dt())&&null===(e=b())&&(e=E());null!==e;)t.push(e),null===(e=Dt())&&null===(e=b())&&(e=E());return t}function Dt(){var t;return 91===e.charCodeAt(o)?(t="[",o++):(t=null,a('"["')),null===t&&(93===e.charCodeAt(o)?(t="]",o++):(t=null,a('"]"')),null===t&&(47===e.charCodeAt(o)?(t="/",o++):(t=null,a('"/"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,a('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,a('":"')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,a('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,a('"$"')))))))),t}function Ut(){var t,e,n,r,i,s;return s=o,null!==(t=le())&&null!==(e=v())&&null!==(n=Lt())&&null!==(r=v())&&null!==(i=Zt())?t=[t,e,n,r,i]:(t=null,o=s),t}function Lt(){var t;return null===(t=X())&&(t=jt()),t}function jt(){var t,n,r,i;return i=o,null!==(t=Kt())?(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null!==n?(null===(r=Mt())&&(r=Ht()),null!==r?t=[t,n,r]:(t=null,o=i)):(t=null,o=i)):(t=null,o=i),t}function Mt(){var t,n,r,i,s;return i=o,null===(t=qt())&&(t=Ft()),null!==t?(s=o,63===e.charCodeAt(o)?(n="?",o++):(n=null,a('"?"')),null!==n&&null!==(r=Qt())?n=[n,r]:(n=null,o=s),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=i)):(t=null,o=i),t}function qt(){var t,n,r,i;return i=o,"//"===e.substr(o,2)?(t="//",o+=2):(t=null,a('"//"')),null!==t&&null!==(n=$t())&&null!==(r=null!==(r=Ft())?r:"")?t=[t,n,r]:(t=null,o=i),t}function Ft(){var t,n,r;return r=o,47===e.charCodeAt(o)?(t="/",o++):(t=null,a('"/"')),null!==t&&null!==(n=zt())?t=[t,n]:(t=null,o=r),t}function Ht(){var t,e,n,r;if(r=o,null!==(t=Wt())){for(e=[],n=Bt();null!==n;)e.push(n),n=Bt();null!==e?t=[t,e]:(t=null,o=r)}else t=null,o=r;return t}function Bt(){var t;return null===(t=y())&&null===(t=b())&&(t=E()),t}function Wt(){var t;return null===(t=b())&&null===(t=E())&&(59===e.charCodeAt(o)?(t=";",o++):(t=null,a('";"')),null===t&&(63===e.charCodeAt(o)?(t="?",o++):(t=null,a('"?"')),null===t&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,a('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,a('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,a('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,a('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,a('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,a('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,a('","'))))))))))),t}function zt(){var t,n,r,i,s,u;if(s=o,null!==(t=Vt())){for(n=[],u=o,47===e.charCodeAt(o)?(r="/",o++):(r=null,a('"/"')),null!==r&&null!==(i=Vt())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,47===e.charCodeAt(o)?(r="/",o++):(r=null,a('"/"')),null!==r&&null!==(i=Vt())?r=[r,i]:(r=null,o=u);null!==n?t=[t,n]:(t=null,o=s)}else t=null,o=s;return t}function Vt(){var t,n,r,i,s,u;for(s=o,t=[],n=Gt();null!==n;)t.push(n),n=Gt();if(null!==t){for(n=[],u=o,59===e.charCodeAt(o)?(r=";",o++):(r=null,a('";"')),null!==r&&null!==(i=Yt())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,59===e.charCodeAt(o)?(r=";",o++):(r=null,a('";"')),null!==r&&null!==(i=Yt())?r=[r,i]:(r=null,o=u);null!==n?t=[t,n]:(t=null,o=s)}else t=null,o=s;return t}function Yt(){var t,e;for(t=[],e=Gt();null!==e;)t.push(e),e=Gt();return t}function Gt(){var t;return null===(t=b())&&null===(t=E())&&(58===e.charCodeAt(o)?(t=":",o++):(t=null,a('":"')),null===t&&(64===e.charCodeAt(o)?(t="@",o++):(t=null,a('"@"')),null===t&&(38===e.charCodeAt(o)?(t="&",o++):(t=null,a('"&"')),null===t&&(61===e.charCodeAt(o)?(t="=",o++):(t=null,a('"="')),null===t&&(43===e.charCodeAt(o)?(t="+",o++):(t=null,a('"+"')),null===t&&(36===e.charCodeAt(o)?(t="$",o++):(t=null,a('"$"')),null===t&&(44===e.charCodeAt(o)?(t=",",o++):(t=null,a('","'))))))))),t}function Kt(){var t,n,r,i,s;if(i=o,s=o,null!==(t=f())){for(n=[],null===(r=f())&&null===(r=c())&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,a('"+"')),null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,a('"."')))));null!==r;)n.push(r),null===(r=f())&&null===(r=c())&&(43===e.charCodeAt(o)?(r="+",o++):(r=null,a('"+"')),null===r&&(45===e.charCodeAt(o)?(r="-",o++):(r=null,a('"-"')),null===r&&(46===e.charCodeAt(o)?(r=".",o++):(r=null,a('"."')))));null!==n?t=[t,n]:(t=null,o=s)}else t=null,o=s;return null!==t&&(t=function(t){Fn.scheme=e.substring(o,t)}(i)),null===t&&(o=i),t}function $t(){var t;return null===(t=Jt())&&(t=Xt()),t}function Jt(){var t,n,r,i;return r=o,i=o,null!==(t=et())?(64===e.charCodeAt(o)?(n="@",o++):(n=null,a('"@"')),null!==n?t=[t,n]:(t=null,o=i)):(t=null,o=i),null!==(t=null!==t?t:"")&&null!==(n=ot())?t=[t,n]:(t=null,o=r),t=null!==t?t:""}function Xt(){var t,n;if(null===(n=b())&&null===(n=E())&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,a('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,a('","')),null===n&&(59===e.charCodeAt(o)?(n=";",o++):(n=null,a('";"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null===n&&(64===e.charCodeAt(o)?(n="@",o++):(n=null,a('"@"')),null===n&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,a('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,a('"+"')))))))))),null!==n)for(t=[];null!==n;)t.push(n),null===(n=b())&&null===(n=E())&&(36===e.charCodeAt(o)?(n="$",o++):(n=null,a('"$"')),null===n&&(44===e.charCodeAt(o)?(n=",",o++):(n=null,a('","')),null===n&&(59===e.charCodeAt(o)?(n=";",o++):(n=null,a('";"')),null===n&&(58===e.charCodeAt(o)?(n=":",o++):(n=null,a('":"')),null===n&&(64===e.charCodeAt(o)?(n="@",o++):(n=null,a('"@"')),null===n&&(38===e.charCodeAt(o)?(n="&",o++):(n=null,a('"&"')),null===n&&(61===e.charCodeAt(o)?(n="=",o++):(n=null,a('"="')),null===n&&(43===e.charCodeAt(o)?(n="+",o++):(n=null,a('"+"'))))))))));else t=null;return t}function Qt(){var t,e;for(t=[],e=Bt();null!==e;)t.push(e),e=Bt();return t}function Zt(){var t,n,r,i,s,u,l,f;if(l=o,f=o,"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,a('"SIP"')),null!==t)if(47===e.charCodeAt(o)?(n="/",o++):(n=null,a('"/"')),null!==n){if(null!==(i=c()))for(r=[];null!==i;)r.push(i),i=c();else r=null;if(null!==r)if(46===e.charCodeAt(o)?(i=".",o++):(i=null,a('"."')),null!==i){if(null!==(u=c()))for(s=[];null!==u;)s.push(u),u=c();else s=null;null!==s?t=[t,n,r,i,s]:(t=null,o=f)}else t=null,o=f;else t=null,o=f}else t=null,o=f;else t=null,o=f;return null!==t&&(t=function(t){Fn.sip_version=e.substring(o,t)}(l)),null===t&&(o=l),t}function te(){var t;return"INVITE"===e.substr(o,6)?(t="INVITE",o+=6):(t=null,a('"INVITE"')),t}function ee(){var t;return"ACK"===e.substr(o,3)?(t="ACK",o+=3):(t=null,a('"ACK"')),t}function ne(){var t;return"OPTIONS"===e.substr(o,7)?(t="OPTIONS",o+=7):(t=null,a('"OPTIONS"')),t}function re(){var t;return"BYE"===e.substr(o,3)?(t="BYE",o+=3):(t=null,a('"BYE"')),t}function ie(){var t;return"CANCEL"===e.substr(o,6)?(t="CANCEL",o+=6):(t=null,a('"CANCEL"')),t}function oe(){var t;return"REGISTER"===e.substr(o,8)?(t="REGISTER",o+=8):(t=null,a('"REGISTER"')),t}function se(){var t;return"SUBSCRIBE"===e.substr(o,9)?(t="SUBSCRIBE",o+=9):(t=null,a('"SUBSCRIBE"')),t}function ue(){var t;return"NOTIFY"===e.substr(o,6)?(t="NOTIFY",o+=6):(t=null,a('"NOTIFY"')),t}function ae(){var t;return"REFER"===e.substr(o,5)?(t="REFER",o+=5):(t=null,a('"REFER"')),t}function le(){var t,n;return n=o,null===(t=te())&&null===(t=ee())&&null===(t=ne())&&null===(t=re())&&null===(t=ie())&&null===(t=oe())&&null===(t=se())&&null===(t=ue())&&null===(t=ae())&&(t=k()),null!==t&&(t=function(t){return Fn.method=e.substring(o,t),Fn.method}(n)),null===t&&(o=n),t}function ce(){var t,e,n,r,i,s;return s=o,null!==(t=Zt())&&null!==(e=v())&&null!==(n=fe())&&null!==(r=v())&&null!==(i=de())?t=[t,e,n,r,i]:(t=null,o=s),t}function fe(){var t,e,n;return e=o,null!==(t=he())&&(n=t,t=void(Fn.status_code=parseInt(n.join("")))),null===t&&(o=e),t}function he(){var t,e,n,r;return r=o,null!==(t=c())&&null!==(e=c())&&null!==(n=c())?t=[t,e,n]:(t=null,o=r),t}function de(){var t,n,r;for(r=o,t=[],null===(n=y())&&null===(n=b())&&null===(n=E())&&null===(n=O())&&null===(n=I())&&null===(n=v())&&(n=g());null!==n;)t.push(n),null===(n=y())&&null===(n=b())&&null===(n=E())&&null===(n=O())&&null===(n=I())&&null===(n=v())&&(n=g());return null!==t&&(t=function(t){Fn.reason_phrase=e.substring(o,t)}(r)),null===t&&(o=r),t}function pe(){var t,e,n,r,i,s,u;if(i=o,s=o,null===(t=J())&&(t=_e()),null!==t){for(e=[],u=o,null!==(n=H())&&null!==(r=ge())?n=[n,r]:(n=null,o=u);null!==n;)e.push(n),u=o,null!==(n=H())&&null!==(r=ge())?n=[n,r]:(n=null,o=u);null!==e?t=[t,e]:(t=null,o=s)}else t=null,o=s;return null!==t&&(t=function(t){var e;Fn.multi_header||(Fn.multi_header=[]);try{e=new qn(Fn.uri,Fn.display_name,Fn.params),delete Fn.uri,delete Fn.display_name,delete Fn.params}catch(t){e=null}Fn.multi_header.push({possition:o,offset:t,parsed:e})}(i)),null===t&&(o=i),t}function _e(){var t,e,n,r,i;return i=o,null!==(t=null!==(t=ve())?t:"")&&null!==(e=q())&&null!==(n=X())&&null!==(r=M())?t=[t,e,n,r]:(t=null,o=i),t}function ve(){var t,e,n,r,i,s,u,a;if(i=o,s=o,null!==(t=k())){for(e=[],u=o,null!==(n=w())&&null!==(r=k())?n=[n,r]:(n=null,o=u);null!==n;)e.push(n),u=o,null!==(n=w())&&null!==(r=k())?n=[n,r]:(n=null,o=u);null!==e?t=[t,e]:(t=null,o=s)}else t=null,o=s;return null===t&&(t=G()),null!==t&&(a=t,t=void(Fn.display_name="string"==typeof a?a:a[1].reduce((function(t,e){return t+e[0]+e[1]}),a[0]))),null===t&&(o=i),t}function ge(){var t;return null===(t=me())&&null===(t=ye())&&(t=Ee()),t}function me(){var t,n,r,i,s,u;return i=o,s=o,"q"===e.substr(o,1).toLowerCase()?(t=e.substr(o,1),o++):(t=null,a('"q"')),null!==t&&null!==(n=U())&&null!==(r=Te())?t=[t,n,r]:(t=null,o=s),null!==t&&(u=t[2],Fn.params||(Fn.params={}),t=void(Fn.params.q=u)),null===t&&(o=i),t}function ye(){var t,n,r,i,s,u;return i=o,s=o,"expires"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,a('"expires"')),null!==t&&null!==(n=U())&&null!==(r=be())?t=[t,n,r]:(t=null,o=s),null!==t&&(u=t[2],Fn.params||(Fn.params={}),t=void(Fn.params.expires=u)),null===t&&(o=i),t}function be(){var t,e,n;if(n=o,null!==(e=c()))for(t=[];null!==e;)t.push(e),e=c();else t=null;return null!==t&&(t=parseInt(t.join(""))),null===t&&(o=n),t}function Te(){var t,n,r,i,s,u,l,f;return u=o,l=o,48===e.charCodeAt(o)?(t="0",o++):(t=null,a('"0"')),null!==t?(f=o,46===e.charCodeAt(o)?(n=".",o++):(n=null,a('"."')),null!==n&&null!==(r=null!==(r=c())?r:"")&&null!==(i=null!==(i=c())?i:"")&&null!==(s=null!==(s=c())?s:"")?n=[n,r,i,s]:(n=null,o=f),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=l)):(t=null,o=l),null!==t&&(t=function(t){return parseFloat(e.substring(o,t))}(u)),null===t&&(o=u),t}function Ee(){var t,e,n,r,i,s,u,a;return r=o,i=o,null!==(t=k())?(s=o,null!==(e=U())&&null!==(n=we())?e=[e,n]:(e=null,o=s),null!==(e=null!==e?e:"")?t=[t,e]:(t=null,o=i)):(t=null,o=i),null!==t&&(u=t[0],a=t[1],Fn.params||(Fn.params={}),a=void 0===a?void 0:a[1],t=void(Fn.params[u.toLowerCase()]=a)),null===t&&(o=r),t}function we(){var t;return null===(t=k())&&null===(t=st())&&(t=Y()),t}function Ae(){var t;return"render"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,a('"render"')),null===t&&("session"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,a('"session"')),null===t&&("icon"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,a('"icon"')),null===t&&("alert"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"alert"')),null===t&&(t=k())))),t}function Se(){var t;return null===(t=Ce())&&(t=Ee()),t}function Ce(){var t,n,r,i;return i=o,"handling"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,a('"handling"')),null!==t&&null!==(n=U())?("optional"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,a('"optional"')),null===r&&("required"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,a('"required"')),null===r&&(r=k())),null!==r?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),t}function Re(){var t,e,n,r,i,s,u,a;if(u=o,null!==(t=Oe()))if(null!==(e=D()))if(null!==(n=Pe())){for(r=[],a=o,null!==(i=H())&&null!==(s=De())?i=[i,s]:(i=null,o=a);null!==i;)r.push(i),a=o,null!==(i=H())&&null!==(s=De())?i=[i,s]:(i=null,o=a);null!==r?t=[t,e,n,r]:(t=null,o=u)}else t=null,o=u;else t=null,o=u;else t=null,o=u;return t}function Oe(){var t;return null===(t=Ie())&&(t=ke()),t}function Ie(){var t;return"text"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,a('"text"')),null===t&&("image"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"image"')),null===t&&("audio"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"audio"')),null===t&&("video"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"video"')),null===t&&("application"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,a('"application"')),null===t&&(t=xe()))))),t}function ke(){var t;return"message"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,a('"message"')),null===t&&("multipart"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,a('"multipart"')),null===t&&(t=xe())),t}function xe(){var t;return null===(t=k())&&(t=Ne()),t}function Ne(){var t,n,r;return r=o,"x-"===e.substr(o,2).toLowerCase()?(t=e.substr(o,2),o+=2):(t=null,a('"x-"')),null!==t&&null!==(n=k())?t=[t,n]:(t=null,o=r),t}function Pe(){var t;return null===(t=xe())&&(t=k()),t}function De(){var t,e,n,r;return r=o,null!==(t=k())&&null!==(e=U())&&null!==(n=Ue())?t=[t,e,n]:(t=null,o=r),t}function Ue(){var t;return null===(t=k())&&(t=Y()),t}function Le(){var t,e,n,r;if(n=o,null!==(e=c()))for(t=[];null!==e;)t.push(e),e=c();else t=null;return null!==t&&(r=t,t=void(Fn.value=parseInt(r.join("")))),null===t&&(o=n),t}function je(){var t,n,r,i,s,u;if(s=o,null!==(t=x())){for(n=[],u=o,46===e.charCodeAt(o)?(r=".",o++):(r=null,a('"."')),null!==r&&null!==(i=x())?r=[r,i]:(r=null,o=u);null!==r;)n.push(r),u=o,46===e.charCodeAt(o)?(r=".",o++):(r=null,a('"."')),null!==r&&null!==(i=x())?r=[r,i]:(r=null,o=u);null!==n?t=[t,n]:(t=null,o=s)}else t=null,o=s;return t}function Me(){var t;return null===(t=qe())&&(t=Ee()),t}function qe(){var t,n,r,i,s,u;return i=o,s=o,"tag"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,a('"tag"')),null!==t&&null!==(n=U())&&null!==(r=k())?t=[t,n,r]:(t=null,o=s),null!==t&&(u=t[2],t=void(Fn.tag=u)),null===t&&(o=i),t}function Fe(){var t,n,r,i,s,u,l,c;if(l=o,"digest"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,a('"Digest"')),null!==t)if(null!==(n=w()))if(null!==(r=We())){for(i=[],c=o,null!==(s=F())&&null!==(u=We())?s=[s,u]:(s=null,o=c);null!==s;)i.push(s),c=o,null!==(s=F())&&null!==(u=We())?s=[s,u]:(s=null,o=c);null!==i?t=[t,n,r,i]:(t=null,o=l)}else t=null,o=l;else t=null,o=l;else t=null,o=l;return null===t&&(t=He()),t}function He(){var t,e,n,r,i,s,u,a;if(u=o,null!==(t=k()))if(null!==(e=w()))if(null!==(n=Be())){for(r=[],a=o,null!==(i=F())&&null!==(s=Be())?i=[i,s]:(i=null,o=a);null!==i;)r.push(i),a=o,null!==(i=F())&&null!==(s=Be())?i=[i,s]:(i=null,o=a);null!==r?t=[t,e,n,r]:(t=null,o=u)}else t=null,o=u;else t=null,o=u;else t=null,o=u;return t}function Be(){var t,e,n,r;return r=o,null!==(t=k())&&null!==(e=U())?(null===(n=k())&&(n=Y()),null!==n?t=[t,e,n]:(t=null,o=r)):(t=null,o=r),t}function We(){var t;return null===(t=ze())&&null===(t=Ye())&&null===(t=Ke())&&null===(t=Je())&&null===(t=Xe())&&null===(t=Qe())&&null===(t=Ze())&&(t=Be()),t}function ze(){var t,n,r,i;return i=o,"realm"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"realm"')),null!==t&&null!==(n=U())&&null!==(r=Ve())?t=[t,n,r]:(t=null,o=i),t}function Ve(){var t,e,n;return e=o,null!==(t=G())&&(n=t,t=void(Fn.realm=n)),null===t&&(o=e),t}function Ye(){var t,n,r,i,s,u,l,c,f;if(c=o,"domain"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,a('"domain"')),null!==t)if(null!==(n=U()))if(null!==(r=W()))if(null!==(i=Ge())){if(s=[],f=o,null!==(l=v()))for(u=[];null!==l;)u.push(l),l=v();else u=null;for(null!==u&&null!==(l=Ge())?u=[u,l]:(u=null,o=f);null!==u;){if(s.push(u),f=o,null!==(l=v()))for(u=[];null!==l;)u.push(l),l=v();else u=null;null!==u&&null!==(l=Ge())?u=[u,l]:(u=null,o=f)}null!==s&&null!==(u=z())?t=[t,n,r,i,s,u]:(t=null,o=c)}else t=null,o=c;else t=null,o=c;else t=null,o=c;else t=null,o=c;return t}function Ge(){var t;return null===(t=jt())&&(t=Ft()),t}function Ke(){var t,n,r,i;return i=o,"nonce"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"nonce"')),null!==t&&null!==(n=U())&&null!==(r=$e())?t=[t,n,r]:(t=null,o=i),t}function $e(){var t,e,n;return e=o,null!==(t=G())&&(n=t,t=void(Fn.nonce=n)),null===t&&(o=e),t}function Je(){var t,n,r,i,s,u;return i=o,s=o,"opaque"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,a('"opaque"')),null!==t&&null!==(n=U())&&null!==(r=G())?t=[t,n,r]:(t=null,o=s),null!==t&&(u=t[2],t=void(Fn.opaque=u)),null===t&&(o=i),t}function Xe(){var t,n,r,i,s;return i=o,"stale"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"stale"')),null!==t&&null!==(n=U())?(s=o,"true"===e.substr(o,4).toLowerCase()?(r=e.substr(o,4),o+=4):(r=null,a('"true"')),null!==r&&(r=void(Fn.stale=!0)),null===r&&(o=s),null===r&&(s=o,"false"===e.substr(o,5).toLowerCase()?(r=e.substr(o,5),o+=5):(r=null,a('"false"')),null!==r&&(r=void(Fn.stale=!1)),null===r&&(o=s)),null!==r?t=[t,n,r]:(t=null,o=i)):(t=null,o=i),t}function Qe(){var t,n,r,i,s,u;return i=o,s=o,"algorithm"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,a('"algorithm"')),null!==t&&null!==(n=U())?("md5"===e.substr(o,3).toLowerCase()?(r=e.substr(o,3),o+=3):(r=null,a('"MD5"')),null===r&&("md5-sess"===e.substr(o,8).toLowerCase()?(r=e.substr(o,8),o+=8):(r=null,a('"MD5-sess"')),null===r&&(r=k())),null!==r?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(u=t[2],t=void(Fn.algorithm=u.toUpperCase())),null===t&&(o=i),t}function Ze(){var t,n,r,i,s,u,l,c,f,h;if(c=o,"qop"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,a('"qop"')),null!==t)if(null!==(n=U()))if(null!==(r=W())){if(f=o,null!==(i=tn())){for(s=[],h=o,44===e.charCodeAt(o)?(u=",",o++):(u=null,a('","')),null!==u&&null!==(l=tn())?u=[u,l]:(u=null,o=h);null!==u;)s.push(u),h=o,44===e.charCodeAt(o)?(u=",",o++):(u=null,a('","')),null!==u&&null!==(l=tn())?u=[u,l]:(u=null,o=h);null!==s?i=[i,s]:(i=null,o=f)}else i=null,o=f;null!==i&&null!==(s=z())?t=[t,n,r,i,s]:(t=null,o=c)}else t=null,o=c;else t=null,o=c;else t=null,o=c;return t}function tn(){var t,n,r;return n=o,"auth-int"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,a('"auth-int"')),null===t&&("auth"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,a('"auth"')),null===t&&(t=k())),null!==t&&(r=t,Fn.qop||(Fn.qop=[]),t=void Fn.qop.push(r.toLowerCase())),null===t&&(o=n),t}function en(){var t,e,n,r,i,s,u;if(i=o,s=o,null!==(t=_e())){for(e=[],u=o,null!==(n=H())&&null!==(r=Ee())?n=[n,r]:(n=null,o=u);null!==n;)e.push(n),u=o,null!==(n=H())&&null!==(r=Ee())?n=[n,r]:(n=null,o=u);null!==e?t=[t,e]:(t=null,o=s)}else t=null,o=s;return null!==t&&(t=function(t){var e;Fn.multi_header||(Fn.multi_header=[]);try{e=new qn(Fn.uri,Fn.display_name,Fn.params),delete Fn.uri,delete Fn.display_name,delete Fn.params}catch(t){e=null}Fn.multi_header.push({possition:o,offset:t,parsed:e})}(i)),null===t&&(o=i),t}function nn(){var t;return null===(t=rn())&&(t=Ee()),t}function rn(){var t,n,r,i,s,u,l;if(s=o,u=o,"cause"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"cause"')),null!==t)if(null!==(n=U())){if(null!==(i=c()))for(r=[];null!==i;)r.push(i),i=c();else r=null;null!==r?t=[t,n,r]:(t=null,o=u)}else t=null,o=u;else t=null,o=u;return null!==t&&(l=t[2],t=void(Fn.cause=parseInt(l.join("")))),null===t&&(o=s),t}function on(){var t,e,n,r,i,s;if(i=o,null!==(t=_e())){for(e=[],s=o,null!==(n=H())&&null!==(r=Ee())?n=[n,r]:(n=null,o=s);null!==n;)e.push(n),s=o,null!==(n=H())&&null!==(r=Ee())?n=[n,r]:(n=null,o=s);null!==e?t=[t,e]:(t=null,o=i)}else t=null,o=i;return t}function sn(){var t,n;return n=o,"active"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,a('"active"')),null===t&&("pending"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,a('"pending"')),null===t&&("terminated"===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,a('"terminated"')),null===t&&(t=k()))),null!==t&&(t=function(t){Fn.state=e.substring(o,t)}(n)),null===t&&(o=n),t}function un(){var t,n,r,i,s,u,l,c;return i=o,s=o,"reason"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,a('"reason"')),null!==t&&null!==(n=U())&&null!==(r=an())?t=[t,n,r]:(t=null,o=s),null!==t&&(t=void(void 0!==(u=t[2])&&(Fn.reason=u))),null===t&&(o=i),null===t&&(i=o,s=o,"expires"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,a('"expires"')),null!==t&&null!==(n=U())&&null!==(r=be())?t=[t,n,r]:(t=null,o=s),null!==t&&(t=void(void 0!==(c=t[2])&&(Fn.expires=c))),null===t&&(o=i),null===t&&(i=o,s=o,"retry_after"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,a('"retry_after"')),null!==t&&null!==(n=U())&&null!==(r=be())?t=[t,n,r]:(t=null,o=s),null!==t&&(t=void(void 0!==(l=t[2])&&(Fn.retry_after=l))),null===t&&(o=i),null===t&&(t=Ee()))),t}function an(){var t;return"deactivated"===e.substr(o,11).toLowerCase()?(t=e.substr(o,11),o+=11):(t=null,a('"deactivated"')),null===t&&("probation"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,a('"probation"')),null===t&&("rejected"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,a('"rejected"')),null===t&&("timeout"===e.substr(o,7).toLowerCase()?(t=e.substr(o,7),o+=7):(t=null,a('"timeout"')),null===t&&("giveup"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,a('"giveup"')),null===t&&("noresource"===e.substr(o,10).toLowerCase()?(t=e.substr(o,10),o+=10):(t=null,a('"noresource"')),null===t&&("invariant"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,a('"invariant"')),null===t&&(t=k()))))))),t}function ln(){var t;return null===(t=qe())&&(t=Ee()),t}function cn(){var t,e,n,r,i,s,u,a;if(u=o,null!==(t=mn()))if(null!==(e=w()))if(null!==(n=Tn())){for(r=[],a=o,null!==(i=H())&&null!==(s=fn())?i=[i,s]:(i=null,o=a);null!==i;)r.push(i),a=o,null!==(i=H())&&null!==(s=fn())?i=[i,s]:(i=null,o=a);null!==r?t=[t,e,n,r]:(t=null,o=u)}else t=null,o=u;else t=null,o=u;else t=null,o=u;return t}function fn(){var t;return null===(t=hn())&&null===(t=dn())&&null===(t=pn())&&null===(t=_n())&&null===(t=vn())&&(t=Ee()),t}function hn(){var t,n,r,i,s,u;return i=o,s=o,"ttl"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,a('"ttl"')),null!==t&&null!==(n=U())&&null!==(r=An())?t=[t,n,r]:(t=null,o=s),null!==t&&(u=t[2],t=void(Fn.ttl=u)),null===t&&(o=i),t}function dn(){var t,n,r,i,s,u;return i=o,s=o,"maddr"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"maddr"')),null!==t&&null!==(n=U())&&null!==(r=st())?t=[t,n,r]:(t=null,o=s),null!==t&&(u=t[2],t=void(Fn.maddr=u)),null===t&&(o=i),t}function pn(){var t,n,r,i,s,u;return i=o,s=o,"received"===e.substr(o,8).toLowerCase()?(t=e.substr(o,8),o+=8):(t=null,a('"received"')),null!==t&&null!==(n=U())?(null===(r=pt())&&(r=ft()),null!==r?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(u=t[2],t=void(Fn.received=u)),null===t&&(o=i),t}function _n(){var t,n,r,i,s,u;return i=o,s=o,"branch"===e.substr(o,6).toLowerCase()?(t=e.substr(o,6),o+=6):(t=null,a('"branch"')),null!==t&&null!==(n=U())&&null!==(r=k())?t=[t,n,r]:(t=null,o=s),null!==t&&(u=t[2],t=void(Fn.branch=u)),null===t&&(o=i),t}function vn(){var t,n,r,i,s;return i=o,"rport"===e.substr(o,5).toLowerCase()?(t=e.substr(o,5),o+=5):(t=null,a('"rport"')),null!==t?(s=o,null!==(n=U())&&null!==(r=gn())?n=[n,r]:(n=null,o=s),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=i)):(t=null,o=i),t}function gn(){var t,e,n,r,i,s,u,a;return s=o,u=o,null!==(t=null!==(t=c())?t:"")&&null!==(e=null!==(e=c())?e:"")&&null!==(n=null!==(n=c())?n:"")&&null!==(r=null!==(r=c())?r:"")&&null!==(i=null!==(i=c())?i:"")?t=[t,e,n,r,i]:(t=null,o=u),null!==t&&(a=t,t=void(Fn.rport=parseInt(a.join("")))),null===t&&(o=s),t}function mn(){var t,e,n,r,i,s;return s=o,null!==(t=yn())&&null!==(e=D())&&null!==(n=k())&&null!==(r=D())&&null!==(i=bn())?t=[t,e,n,r,i]:(t=null,o=s),t}function yn(){var t,n,r;return n=o,"sip"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,a('"SIP"')),null===t&&(t=k()),null!==t&&(r=t,t=void(Fn.protocol=r)),null===t&&(o=n),t}function bn(){var t,n,r;return n=o,"udp"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,a('"UDP"')),null===t&&("tcp"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,a('"TCP"')),null===t&&("tls"===e.substr(o,3).toLowerCase()?(t=e.substr(o,3),o+=3):(t=null,a('"TLS"')),null===t&&("sctp"===e.substr(o,4).toLowerCase()?(t=e.substr(o,4),o+=4):(t=null,a('"SCTP"')),null===t&&(t=k())))),null!==t&&(r=t,t=void(Fn.transport=r)),null===t&&(o=n),t}function Tn(){var t,e,n,r,i;return r=o,null!==(t=En())?(i=o,null!==(e=B())&&null!==(n=wn())?e=[e,n]:(e=null,o=i),null!==(e=null!==e?e:"")?t=[t,e]:(t=null,o=r)):(t=null,o=r),t}function En(){var t,n;return n=o,null===(t=pt())&&null===(t=ct())&&(t=ut()),null!==t&&(t=function(t){Fn.host=e.substring(o,t)}(n)),null===t&&(o=n),t}function wn(){var t,e,n,r,i,s,u,a;return s=o,u=o,null!==(t=null!==(t=c())?t:"")&&null!==(e=null!==(e=c())?e:"")&&null!==(n=null!==(n=c())?n:"")&&null!==(r=null!==(r=c())?r:"")&&null!==(i=null!==(i=c())?i:"")?t=[t,e,n,r,i]:(t=null,o=u),null!==t&&(a=t,t=void(Fn.port=parseInt(a.join("")))),null===t&&(o=s),t}function An(){var t,e,n,r,i;return r=o,i=o,null!==(t=c())&&null!==(e=null!==(e=c())?e:"")&&null!==(n=null!==(n=c())?n:"")?t=[t,e,n]:(t=null,o=i),null!==t&&(t=parseInt(t.join(""))),null===t&&(o=r),t}function Sn(){var t,e,n;return e=o,null!==(t=be())&&(n=t,t=void(Fn.expires=n)),null===t&&(o=e),t}function Cn(){var t;return null===(t=Rn())&&(t=Ee()),t}function Rn(){var t,n,r,i,s,u;return i=o,s=o,"refresher"===e.substr(o,9).toLowerCase()?(t=e.substr(o,9),o+=9):(t=null,a('"refresher"')),null!==t&&null!==(n=U())?("uac"===e.substr(o,3).toLowerCase()?(r=e.substr(o,3),o+=3):(r=null,a('"uac"')),null===r&&("uas"===e.substr(o,3).toLowerCase()?(r=e.substr(o,3),o+=3):(r=null,a('"uas"'))),null!==r?t=[t,n,r]:(t=null,o=s)):(t=null,o=s),null!==t&&(u=t[2],t=void(Fn.refresher=u.toLowerCase())),null===t&&(o=i),t}function On(){var t,e;for(t=[],null===(e=R())&&null===(e=I())&&(e=w());null!==e;)t.push(e),null===(e=R())&&null===(e=I())&&(e=w());return t}function In(){var t,n,r,i,s,u,l,c,f,h,d;return h=o,d=o,null!==(t=xn())?(45===e.charCodeAt(o)?(n="-",o++):(n=null,a('"-"')),null!==n&&null!==(r=kn())?(45===e.charCodeAt(o)?(i="-",o++):(i=null,a('"-"')),null!==i&&null!==(s=kn())?(45===e.charCodeAt(o)?(u="-",o++):(u=null,a('"-"')),null!==u&&null!==(l=kn())?(45===e.charCodeAt(o)?(c="-",o++):(c=null,a('"-"')),null!==c&&null!==(f=Nn())?t=[t,n,r,i,s,u,l,c,f]:(t=null,o=d)):(t=null,o=d)):(t=null,o=d)):(t=null,o=d)):(t=null,o=d),null!==t&&(t=function(t,n){Fn=e.substring(o+5,t)}(h,t[0])),null===t&&(o=h),t}function kn(){var t,e,n,r,i;return i=o,null!==(t=h())&&null!==(e=h())&&null!==(n=h())&&null!==(r=h())?t=[t,e,n,r]:(t=null,o=i),t}function xn(){var t,e,n;return n=o,null!==(t=kn())&&null!==(e=kn())?t=[t,e]:(t=null,o=n),t}function Nn(){var t,e,n,r;return r=o,null!==(t=kn())&&null!==(e=kn())&&null!==(n=kn())?t=[t,e,n]:(t=null,o=r),t}function Pn(){var t,n,r,i,s,u;return i=o,s=o,null!==(t=N())?(u=o,64===e.charCodeAt(o)?(n="@",o++):(n=null,a('"@"')),null!==n&&null!==(r=N())?n=[n,r]:(n=null,o=u),null!==(n=null!==n?n:"")?t=[t,n]:(t=null,o=s)):(t=null,o=s),null!==t&&(t=function(t){Fn.call_id=e.substring(o,t)}(i)),null===t&&(o=i),t}function Dn(){var t;return null===(t=Un())&&null===(t=Ln())&&null===(t=jn())&&(t=Ee()),t}function Un(){var t,n,r,i,s,u;return i=o,s=o,"to-tag"===e.substr(o,6)?(t="to-tag",o+=6):(t=null,a('"to-tag"')),null!==t&&null!==(n=U())&&null!==(r=k())?t=[t,n,r]:(t=null,o=s),null!==t&&(u=t[2],t=void(Fn.to_tag=u)),null===t&&(o=i),t}function Ln(){var t,n,r,i,s,u;return i=o,s=o,"from-tag"===e.substr(o,8)?(t="from-tag",o+=8):(t=null,a('"from-tag"')),null!==t&&null!==(n=U())&&null!==(r=k())?t=[t,n,r]:(t=null,o=s),null!==t&&(u=t[2],t=void(Fn.from_tag=u)),null===t&&(o=i),t}function jn(){var t,n;return n=o,"early-only"===e.substr(o,10)?(t="early-only",o+=10):(t=null,a('"early-only"')),null!==t&&(t=void(Fn.early_only=!0)),null===t&&(o=n),t}var Mn=n(15),qn=n(25),Fn={};if(null===i[r]()||o!==e.length){var Hn=Math.max(o,s),Bn=Hn<e.length?e.charAt(Hn):null,Wn=function(){for(var t=1,n=1,r=!1,i=0;i<Math.max(o,s);i++){var u=e.charAt(i);"\n"===u?(r||t++,n=1,r=!1):"\r"===u||"\u2028"===u||"\u2029"===u?(t++,n=1,r=!0):(n++,r=!1)}return{line:t,column:n}}();return new this.SyntaxError(function(t){t.sort();for(var e=null,n=[],r=0;r<t.length;r++)t[r]!==e&&(n.push(t[r]),e=t[r]);return n}(u),Bn,Hn,Wn.line,Wn.column),-1}return Fn},toSource:function(){return this._source},SyntaxError:function(e,n,r,i,o){this.name="SyntaxError",this.expected=e,this.found=n,this.message=function(e,n){var r;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+r+" but "+(n?t(n):"end of input")+" found."}(e,n),this.offset=r,this.line=i,this.column=o}};return e.SyntaxError.prototype=Error.prototype,e}()},function(t,e,n){"use strict";n.d(e,"e",(function(){return y})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return g})),n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return m}));const r=Object.create(null);r.open="0",r.close="1",r.ping="2",r.pong="3",r.message="4",r.upgrade="5",r.noop="6";const i=Object.create(null);Object.keys(r).forEach(t=>{i[r[t]]=t});const o={type:"error",data:"parser error"},s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),u="function"==typeof ArrayBuffer,a=(t,e)=>{const n=new FileReader;return n.onload=function(){const t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)};var l=({type:t,data:e},n,i)=>{return s&&e instanceof Blob?n?i(e):a(e,i):u&&(e instanceof ArrayBuffer||(o=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer))?n?i(e):a(new Blob([e]),i):i(r[t]+(e||""));var o};const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<c.length;t++)f[c.charCodeAt(t)]=t;const h="function"==typeof ArrayBuffer,d=(t,e)=>{if(h){const n=(t=>{let e,n,r,i,o,s=.75*t.length,u=t.length,a=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);const l=new ArrayBuffer(s),c=new Uint8Array(l);for(e=0;e<u;e+=4)n=f[t.charCodeAt(e)],r=f[t.charCodeAt(e+1)],i=f[t.charCodeAt(e+2)],o=f[t.charCodeAt(e+3)],c[a++]=n<<2|r>>4,c[a++]=(15&r)<<4|i>>2,c[a++]=(3&i)<<6|63&o;return l})(t);return p(n,e)}return{base64:!0,data:t}},p=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};var _=(t,e)=>{if("string"!=typeof t)return{type:"message",data:p(t,e)};const n=t.charAt(0);return"b"===n?{type:"message",data:d(t.substring(1),e)}:i[n]?t.length>1?{type:i[n],data:t.substring(1)}:{type:i[n]}:o};const v=String.fromCharCode(30),g=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((t,o)=>{l(t,!1,t=>{r[o]=t,++i===n&&e(r.join(v))})})},m=(t,e)=>{const n=t.split(v),r=[];for(let t=0;t<n.length;t++){const i=_(n[t],e);if(r.push(i),"error"===i.type)break}return r},y=4},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return u}));var r=n(8);const i="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),o=r.a.WebSocket||r.a.MozWebSocket,s=!0,u="arraybuffer"},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var p=n(30),_=n(3),v=n(2),g=n(5),m=n(25),y=n(10),b=new _("SIPMessage"),T=function(){function t(e,n,r,i,o,s){if(f(this,t),!e||!n||!r)return null;i=i||{},this.ua=r,this.headers={},this.method=e,this.ruri=n,this.body=s,this.extraHeaders=g.cloneArray(o),i.route_set?this.setHeader("route",i.route_set):r.configuration.use_preloaded_route&&this.setHeader("route","<".concat(r.transport.sip_uri,";lr>")),this.setHeader("via",""),this.setHeader("max-forwards",v.MAX_FORWARDS);var u=i.to_uri||n,a=i.to_tag?{tag:i.to_tag}:null,l=void 0!==i.to_display_name?i.to_display_name:null;this.to=new m(u,l,a),this.setHeader("to",this.to.toString());var c,h=i.from_uri||r.configuration.uri,d={tag:i.from_tag||g.newTag()};c=void 0!==i.from_display_name?i.from_display_name:r.configuration.display_name?r.configuration.display_name:null,this.from=new m(h,c,d),this.setHeader("from",this.from.toString());var p=i.call_id||r.configuration.jssip_id+g.createRandomToken(15);this.call_id=p,this.setHeader("call-id",p);var _=i.cseq||Math.floor(1e4*Math.random());this.cseq=_,this.setHeader("cseq","".concat(_," ").concat(e))}return d(t,[{key:"setHeader",value:function(t,e){for(var n=new RegExp("^\\s*".concat(t,"\\s*:"),"i"),r=0;r<this.extraHeaders.length;r++)n.test(this.extraHeaders[r])&&this.extraHeaders.splice(r,1);this.headers[g.headerize(t)]=Array.isArray(e)?e:[e]}},{key:"getHeader",value:function(t){var e=this.headers[g.headerize(t)];if(e){if(e[0])return e[0]}else{var n,r=new RegExp("^\\s*".concat(t,"\\s*:"),"i"),i=l(this.extraHeaders);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(r.test(o))return o.substring(o.indexOf(":")+1).trim()}}catch(t){i.e(t)}finally{i.f()}}}},{key:"getHeaders",value:function(t){var e=this.headers[g.headerize(t)],n=[];if(e){var r,i=l(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(o)}}catch(t){i.e(t)}finally{i.f()}return n}var s,u=new RegExp("^\\s*".concat(t,"\\s*:"),"i"),a=l(this.extraHeaders);try{for(a.s();!(s=a.n()).done;){var c=s.value;u.test(c)&&n.push(c.substring(c.indexOf(":")+1).trim())}}catch(t){a.e(t)}finally{a.f()}return n}},{key:"hasHeader",value:function(t){if(this.headers[g.headerize(t)])return!0;var e,n=new RegExp("^\\s*".concat(t,"\\s*:"),"i"),r=l(this.extraHeaders);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(n.test(i))return!0}}catch(t){r.e(t)}finally{r.f()}return!1}},{key:"parseSDP",value:function(t){return!t&&this.sdp||(this.sdp=p.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){var t="".concat(this.method," ").concat(this.ruri," SIP/2.0\r\n");for(var e in this.headers)if(Object.prototype.hasOwnProperty.call(this.headers,e)){var n,r=l(this.headers[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;t+="".concat(e,": ").concat(i,"\r\n")}}catch(t){r.e(t)}finally{r.f()}}var o,s=l(this.extraHeaders);try{for(s.s();!(o=s.n()).done;){var u=o.value;t+="".concat(u.trim(),"\r\n")}}catch(t){s.e(t)}finally{s.f()}var a=[];switch(this.method){case v.REGISTER:a.push("path","gruu");break;case v.INVITE:this.ua.configuration.session_timers&&a.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&a.push("gruu"),a.push("ice","replaces");break;case v.UPDATE:this.ua.configuration.session_timers&&a.push("timer"),a.push("ice")}a.push("outbound");var c=this.ua.configuration.user_agent||v.USER_AGENT;if(t+="Allow: ".concat(v.ALLOWED_METHODS,"\r\n"),t+="Supported: ".concat(a,"\r\n"),t+="User-Agent: ".concat(c,"\r\n"),this.body){var f=g.str_utf8_length(this.body);t+="Content-Length: ".concat(f,"\r\n\r\n"),t+=this.body}else t+="Content-Length: 0\r\n\r\n";return t}},{key:"clone",value:function(){var e=new t(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach((function(t){e.headers[t]=this.headers[t].slice()}),this),e.body=this.body,e.extraHeaders=g.cloneArray(this.extraHeaders),e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e}}]),t}(),E=function(t){i(n,t);var e=s(n);function n(t,r,i,o,s){var u;return f(this,n),(u=e.call(this,v.INVITE,t,r,i,o,s)).transaction=null,u}return d(n,[{key:"cancel",value:function(t){this.transaction.cancel(t)}},{key:"clone",value:function(){var t=new n(this.ruri,this.ua);return Object.keys(this.headers).forEach((function(e){t.headers[e]=this.headers[e].slice()}),this),t.body=this.body,t.extraHeaders=g.cloneArray(this.extraHeaders),t.to=this.to,t.from=this.from,t.call_id=this.call_id,t.cseq=this.cseq,t.transaction=this.transaction,t}}]),n}(T),w=function(){function t(){f(this,t),this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}return d(t,[{key:"addHeader",value:function(t,e){var n={raw:e};t=g.headerize(t),this.headers[t]?this.headers[t].push(n):this.headers[t]=[n]}},{key:"getHeader",value:function(t){var e=this.headers[g.headerize(t)];if(e)return e[0]?e[0].raw:void 0}},{key:"getHeaders",value:function(t){var e=this.headers[g.headerize(t)],n=[];if(!e)return[];var r,i=l(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(o.raw)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"hasHeader",value:function(t){return!!this.headers[g.headerize(t)]}},{key:"parseHeader",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t=g.headerize(t),this.headers[t]){if(!(e>=this.headers[t].length)){var n=this.headers[t][e],r=n.raw;if(n.parsed)return n.parsed;var i=y.parse(r,t.replace(/-/g,"_"));return-1===i?(this.headers[t].splice(e,1),void b.debug('error parsing "'.concat(t,'" header field with value "').concat(r,'"'))):(n.parsed=i,i)}b.debug('not so many "'.concat(t,'" headers present'))}else b.debug('header "'.concat(t,'" not present'))}},{key:"s",value:function(t,e){return this.parseHeader(t,e)}},{key:"setHeader",value:function(t,e){var n={raw:e};this.headers[g.headerize(t)]=[n]}},{key:"parseSDP",value:function(t){return!t&&this.sdp||(this.sdp=p.parse(this.body||"")),this.sdp}},{key:"toString",value:function(){return this.data}}]),t}(),A=function(t){i(n,t);var e=s(n);function n(t){var r;return f(this,n),(r=e.call(this)).ua=t,r.headers={},r.ruri=null,r.transport=null,r.server_transaction=null,r}return d(n,[{key:"reply",value:function(t,e,n,r,i,o){var s=[],u=this.getHeader("To");if(e=e||null,!(t=t||null)||t<100||t>699)throw new TypeError("Invalid status_code: ".concat(t));if(e&&"string"!=typeof e&&!(e instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(e));e=e||v.REASON_PHRASE[t]||"",n=g.cloneArray(n);var a="SIP/2.0 ".concat(t," ").concat(e,"\r\n");if(this.method===v.INVITE&&t>100&&t<=200){var c,f=l(this.getHeaders("record-route"));try{for(f.s();!(c=f.n()).done;){var h=c.value;a+="Record-Route: ".concat(h,"\r\n")}}catch(t){f.e(t)}finally{f.f()}}var d,p=l(this.getHeaders("via"));try{for(p.s();!(d=p.n()).done;){var _=d.value;a+="Via: ".concat(_,"\r\n")}}catch(t){p.e(t)}finally{p.f()}!this.to_tag&&t>100?u+=";tag=".concat(g.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(u+=";tag=".concat(this.to_tag)),a+="To: ".concat(u,"\r\n"),a+="From: ".concat(this.getHeader("From"),"\r\n"),a+="Call-ID: ".concat(this.call_id,"\r\n"),a+="CSeq: ".concat(this.cseq," ").concat(this.method,"\r\n");var m,y=l(n);try{for(y.s();!(m=y.n()).done;){var b=m.value;a+="".concat(b.trim(),"\r\n")}}catch(t){y.e(t)}finally{y.f()}switch(this.method){case v.INVITE:this.ua.configuration.session_timers&&s.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&s.push("gruu"),s.push("ice","replaces");break;case v.UPDATE:this.ua.configuration.session_timers&&s.push("timer"),r&&s.push("ice"),s.push("replaces")}if(s.push("outbound"),this.method===v.OPTIONS?(a+="Allow: ".concat(v.ALLOWED_METHODS,"\r\n"),a+="Accept: ".concat(v.ACCEPTED_BODY_TYPES,"\r\n")):405===t?a+="Allow: ".concat(v.ALLOWED_METHODS,"\r\n"):415===t&&(a+="Accept: ".concat(v.ACCEPTED_BODY_TYPES,"\r\n")),a+="Supported: ".concat(s,"\r\n"),r){var T=g.str_utf8_length(r);a+="Content-Type: application/sdp\r\n",a+="Content-Length: ".concat(T,"\r\n\r\n"),a+=r}else a+="Content-Length: ".concat(0,"\r\n\r\n");this.server_transaction.receiveResponse(t,a,i,o)}},{key:"reply_sl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getHeaders("via");if(!t||t<100||t>699)throw new TypeError("Invalid status_code: ".concat(t));if(e&&"string"!=typeof e&&!(e instanceof String))throw new TypeError("Invalid reason_phrase: ".concat(e));e=e||v.REASON_PHRASE[t]||"";var r,i="SIP/2.0 ".concat(t," ").concat(e,"\r\n"),o=l(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;i+="Via: ".concat(s,"\r\n")}}catch(t){o.e(t)}finally{o.f()}var u=this.getHeader("To");!this.to_tag&&t>100?u+=";tag=".concat(g.newTag()):this.to_tag&&!this.s("to").hasParam("tag")&&(u+=";tag=".concat(this.to_tag)),i+="To: ".concat(u,"\r\n"),i+="From: ".concat(this.getHeader("From"),"\r\n"),i+="Call-ID: ".concat(this.call_id,"\r\n"),i+="CSeq: ".concat(this.cseq," ").concat(this.method,"\r\n"),i+="Content-Length: ".concat(0,"\r\n\r\n"),this.transport.send(i)}}]),n}(w),S=function(t){i(n,t);var e=s(n);function n(){var t;return f(this,n),(t=e.call(this)).headers={},t.status_code=null,t.reason_phrase=null,t}return n}(w);t.exports={OutgoingRequest:T,InitialOutgoingInviteRequest:E,IncomingRequest:A,IncomingResponse:S}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function s(t){var e=c();return function(){var n,r=h(t);if(e){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,h(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})(t)}function l(t,e,n){return(l=c()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){o(n,t);var e=s(n);function n(t,r){var o;return i(this,n),(o=e.call(this)).code=1,o.name="CONFIGURATION_ERROR",o.parameter=t,o.value=r,o.message=o.value?"Invalid value ".concat(JSON.stringify(o.value),' for parameter "').concat(o.parameter,'"'):"Missing parameter: ".concat(o.parameter),o}return n}(a(Error)),p=function(t){o(n,t);var e=s(n);function n(t){var r;return i(this,n),(r=e.call(this)).code=2,r.name="INVALID_STATE_ERROR",r.status=t,r.message="Invalid status: ".concat(t),r}return n}(a(Error)),_=function(t){o(n,t);var e=s(n);function n(t){var r;return i(this,n),(r=e.call(this)).code=3,r.name="NOT_SUPPORTED_ERROR",r.message=t,r}return n}(a(Error)),v=function(t){o(n,t);var e=s(n);function n(t){var r;return i(this,n),(r=e.call(this)).code=4,r.name="NOT_READY_ERROR",r.message=t,r}return n}(a(Error));t.exports={ConfigurationError:d,InvalidStateError:p,NotSupportedError:_,NotReadyError:v}},function(t,e,n){"use strict";function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,s=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw s}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}var a=n(2),l=n(5),c=n(10);t.exports=function(){function t(e,n,r,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(o(this,t),!r)throw new TypeError('missing or invalid "host" parameter');for(var l in this._parameters={},this._headers={},this._scheme=e||a.SIP,this._user=n,this._host=r,this._port=i,s)Object.prototype.hasOwnProperty.call(s,l)&&this.setParam(l,s[l]);for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&this.setHeader(c,u[c])}return u(t,null,[{key:"parse",value:function(t){return-1!==(t=c.parse(t,"SIP_URI"))?t:void 0}}]),u(t,[{key:"setParam",value:function(t,e){t&&(this._parameters[t.toLowerCase()]=null==e?null:e.toString())}},{key:"getParam",value:function(t){if(t)return this._parameters[t.toLowerCase()]}},{key:"hasParam",value:function(t){if(t)return!!this._parameters.hasOwnProperty(t.toLowerCase())}},{key:"deleteParam",value:function(t){if(t=t.toLowerCase(),this._parameters.hasOwnProperty(t)){var e=this._parameters[t];return delete this._parameters[t],e}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"setHeader",value:function(t,e){this._headers[l.headerize(t)]=Array.isArray(e)?e:[e]}},{key:"getHeader",value:function(t){if(t)return this._headers[l.headerize(t)]}},{key:"hasHeader",value:function(t){if(t)return!!this._headers.hasOwnProperty(l.headerize(t))}},{key:"deleteHeader",value:function(t){if(t=l.headerize(t),this._headers.hasOwnProperty(t)){var e=this._headers[t];return delete this._headers[t],e}}},{key:"clearHeaders",value:function(){this._headers={}}},{key:"clone",value:function(){return new t(this._scheme,this._user,this._host,this._port,JSON.parse(JSON.stringify(this._parameters)),JSON.parse(JSON.stringify(this._headers)))}},{key:"toString",value:function(){var t=[],e="".concat(this._scheme,":");for(var n in this._user&&(e+="".concat(l.escapeUser(this._user),"@")),e+=this._host,(this._port||0===this._port)&&(e+=":".concat(this._port)),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,n)&&(e+=";".concat(n),null!==this._parameters[n]&&(e+="=".concat(this._parameters[n])));for(var i in this._headers)if(Object.prototype.hasOwnProperty.call(this._headers,i)){var o,s=r(this._headers[i]);try{for(s.s();!(o=s.n()).done;){var u=o.value;t.push("".concat(i,"=").concat(u))}}catch(t){s.e(t)}finally{s.f()}}return t.length>0&&(e+="?".concat(t.join("&"))),e}},{key:"toAor",value:function(t){var e="".concat(this._scheme,":");return this._user&&(e+="".concat(l.escapeUser(this._user),"@")),e+=this._host,t&&(this._port||0===this._port)&&(e+=":".concat(this._port)),e}},{key:"scheme",get:function(){return this._scheme},set:function(t){this._scheme=t.toLowerCase()}},{key:"user",get:function(){return this._user},set:function(t){this._user=t}},{key:"host",get:function(){return this._host},set:function(t){this._host=t.toLowerCase()}},{key:"port",get:function(){return this._port},set:function(t){this._port=0===t?t:parseInt(t,10)||null}}]),t}()},function(t,e,n){"use strict";var r=n(4);function i(t,e,n,r,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=i.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(t){s[t]={value:t}})),Object.defineProperties(i,s),Object.defineProperty(o,"isAxiosError",{value:!0}),i.from=function(t,e,n,s,u,a){var l=Object.create(o);return r.toFlatObject(t,l,(function(t){return t!==Error.prototype})),i.call(l,t.message,e,n,s,u),l.name=t.name,a&&Object.assign(l,a),l},t.exports=i},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(11),i=n(6),o=n(7);class s extends Error{constructor(t,e,n){super(t),this.description=e,this.context=n,this.type="TransportError"}}class u extends i.a{constructor(t){super(),this.writable=!1,Object(o.b)(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,n){return super.emitReserved("error",new s(t,e,n)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=Object(r.a)(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}},function(t,e,n){"use strict";function r(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function i(t){let e={},n=t.split("&");for(let t=0,r=n.length;t<r;t++){let r=n[t].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";var r=n(28),i=n(2),o=n(14),s=n(5),u=n(49),a=n(15),l=n(25),c=n(10),f=n(68);n(26)("JsSIP")("version %s",r.version),t.exports={C:i,Exceptions:o,Utils:s,UA:u,URI:a,NameAddrHeader:l,WebSocketInterface:f,Grammar:c,debug:n(26),get name(){return r.title},get version(){return r.version}}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(3),o=n(2),s=n(55),u=n(21),a=new i("RequestSender"),l={onRequestTimeout:function(){},onTransportError:function(){},onReceiveResponse:function(){},onAuthenticated:function(){}};t.exports=function(){function t(e,n,r){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ua=e,this._eventHandlers=r,this._method=n.method,this._request=n,this._auth=null,this._challenged=!1,this._staled=!1,l)Object.prototype.hasOwnProperty.call(l,i)&&(this._eventHandlers[i]||(this._eventHandlers[i]=l[i]));e.status!==e.C.STATUS_USER_CLOSED||this._method===o.BYE&&this._method===o.ACK||this._eventHandlers.onTransportError()}var e,n,i;return e=t,(n=[{key:"send",value:function(){var t=this,e={onRequestTimeout:function(){t._eventHandlers.onRequestTimeout()},onTransportError:function(){t._eventHandlers.onTransportError()},onReceiveResponse:function(e){t._receiveResponse(e)}};switch(this._method){case"INVITE":this.clientTransaction=new u.InviteClientTransaction(this._ua,this._ua.transport,this._request,e);break;case"ACK":this.clientTransaction=new u.AckClientTransaction(this._ua,this._ua.transport,this._request,e);break;default:this.clientTransaction=new u.NonInviteClientTransaction(this._ua,this._ua.transport,this._request,e)}this._ua._configuration.authorization_jwt&&this._request.setHeader("Authorization",this._ua._configuration.authorization_jwt),this.clientTransaction.send()}},{key:"_receiveResponse",value:function(t){var e,n,r=t.status_code;if(401!==r&&407!==r||null===this._ua.configuration.password&&null===this._ua.configuration.ha1)this._eventHandlers.onReceiveResponse(t);else{if(401===t.status_code?(e=t.parseHeader("www-authenticate"),n="authorization"):(e=t.parseHeader("proxy-authenticate"),n="proxy-authorization"),!e)return a.debug("".concat(t.status_code," with wrong or missing challenge, cannot authenticate")),void this._eventHandlers.onReceiveResponse(t);if(!this._challenged||!this._staled&&!0===e.stale){if(this._auth||(this._auth=new s({username:this._ua.configuration.authorization_user,password:this._ua.configuration.password,realm:this._ua.configuration.realm,ha1:this._ua.configuration.ha1})),!this._auth.authenticate(this._request,e))return void this._eventHandlers.onReceiveResponse(t);this._challenged=!0,this._ua.set("realm",this._auth.get("realm")),this._ua.set("ha1",this._auth.get("ha1")),e.stale&&(this._staled=!0),this._request=this._request.clone(),this._request.cseq+=1,this._request.setHeader("cseq","".concat(this._request.cseq," ").concat(this._method)),this._request.setHeader(n,this._auth.toString()),this._eventHandlers.onAuthenticated(this._request),this.send()}else this._eventHandlers.onReceiveResponse(t)}}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=n(9).EventEmitter,p=n(3),_=n(2),v=n(13),g=n(32),m=new p("NonInviteClientTransaction"),y=new p("InviteClientTransaction"),b=new p("AckClientTransaction"),T=new p("NonInviteServerTransaction"),E=new p("InviteServerTransaction"),w={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"},A=function(t){u(n,t);var e=l(n);function n(t,r,o,s){var u;i(this,n),(u=e.call(this)).type=w.NON_INVITE_CLIENT,u.id="z9hG4bK".concat(Math.floor(1e7*Math.random())),u.ua=t,u.transport=r,u.request=o,u.eventHandlers=s;var a="SIP/2.0/".concat(r.via_transport);return a+=" ".concat(t.configuration.via_host,";branch=").concat(u.id),u.request.setHeader("via",a),u.ua.newTransaction(f(u)),u}return s(n,[{key:"stateChanged",value:function(t){this.state=t,this.emit("stateChanged")}},{key:"send",value:function(){var t=this;this.stateChanged(w.STATUS_TRYING),this.F=setTimeout((function(){t.timer_F()}),g.TIMER_F),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){m.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onTransportError()}},{key:"timer_F",value:function(){m.debug("Timer F expired for transaction ".concat(this.id)),this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout()}},{key:"timer_K",value:function(){this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"receiveResponse",value:function(t){var e=this,n=t.status_code;if(n<200)switch(this.state){case w.STATUS_TRYING:case w.STATUS_PROCEEDING:this.stateChanged(w.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(t)}else switch(this.state){case w.STATUS_TRYING:case w.STATUS_PROCEEDING:this.stateChanged(w.STATUS_COMPLETED),clearTimeout(this.F),408===n?this.eventHandlers.onRequestTimeout():this.eventHandlers.onReceiveResponse(t),this.K=setTimeout((function(){e.timer_K()}),g.TIMER_K)}}},{key:"C",get:function(){return w}}]),n}(d),S=function(t){u(n,t);var e=l(n);function n(t,r,o,s){var u;i(this,n),(u=e.call(this)).type=w.INVITE_CLIENT,u.id="z9hG4bK".concat(Math.floor(1e7*Math.random())),u.ua=t,u.transport=r,u.request=o,u.eventHandlers=s,o.transaction=f(u);var a="SIP/2.0/".concat(r.via_transport);return a+=" ".concat(t.configuration.via_host,";branch=").concat(u.id),u.request.setHeader("via",a),u.ua.newTransaction(f(u)),u}return s(n,[{key:"stateChanged",value:function(t){this.state=t,this.emit("stateChanged")}},{key:"send",value:function(){var t=this;this.stateChanged(w.STATUS_CALLING),this.B=setTimeout((function(){t.timer_B()}),g.TIMER_B),this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==w.STATUS_ACCEPTED&&(y.debug("transport error occurred, deleting transaction ".concat(this.id)),this.eventHandlers.onTransportError()),this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_M",value:function(){y.debug("Timer M expired for transaction ".concat(this.id)),this.state===w.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"timer_B",value:function(){y.debug("Timer B expired for transaction ".concat(this.id)),this.state===w.STATUS_CALLING&&(this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this),this.eventHandlers.onRequestTimeout())}},{key:"timer_D",value:function(){y.debug("Timer D expired for transaction ".concat(this.id)),clearTimeout(this.B),this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"sendACK",value:function(t){var e=this,n=new v.OutgoingRequest(_.ACK,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});n.setHeader("from",this.request.getHeader("from")),n.setHeader("via",this.request.getHeader("via")),n.setHeader("to",t.getHeader("to")),this.D=setTimeout((function(){e.timer_D()}),g.TIMER_D),this.transport.send(n)}},{key:"cancel",value:function(t){if(this.state===w.STATUS_PROCEEDING){var e=new v.OutgoingRequest(_.CANCEL,this.request.ruri,this.ua,{route_set:this.request.getHeaders("route"),call_id:this.request.getHeader("call-id"),cseq:this.request.cseq});e.setHeader("from",this.request.getHeader("from")),e.setHeader("via",this.request.getHeader("via")),e.setHeader("to",this.request.getHeader("to")),t&&e.setHeader("reason",t),this.transport.send(e)}}},{key:"receiveResponse",value:function(t){var e=this,n=t.status_code;if(n>=100&&n<=199)switch(this.state){case w.STATUS_CALLING:this.stateChanged(w.STATUS_PROCEEDING),this.eventHandlers.onReceiveResponse(t);break;case w.STATUS_PROCEEDING:this.eventHandlers.onReceiveResponse(t)}else if(n>=200&&n<=299)switch(this.state){case w.STATUS_CALLING:case w.STATUS_PROCEEDING:this.stateChanged(w.STATUS_ACCEPTED),this.M=setTimeout((function(){e.timer_M()}),g.TIMER_M),this.eventHandlers.onReceiveResponse(t);break;case w.STATUS_ACCEPTED:this.eventHandlers.onReceiveResponse(t)}else if(n>=300&&n<=699)switch(this.state){case w.STATUS_CALLING:case w.STATUS_PROCEEDING:this.stateChanged(w.STATUS_COMPLETED),this.sendACK(t),this.eventHandlers.onReceiveResponse(t);break;case w.STATUS_COMPLETED:this.sendACK(t)}}},{key:"C",get:function(){return w}}]),n}(d),C=function(t){u(n,t);var e=l(n);function n(t,r,o,s){var u;i(this,n),(u=e.call(this)).id="z9hG4bK".concat(Math.floor(1e7*Math.random())),u.transport=r,u.request=o,u.eventHandlers=s;var a="SIP/2.0/".concat(r.via_transport);return a+=" ".concat(t.configuration.via_host,";branch=").concat(u.id),u.request.setHeader("via",a),u}return s(n,[{key:"send",value:function(){this.transport.send(this.request)||this.onTransportError()}},{key:"onTransportError",value:function(){b.debug("transport error occurred for transaction ".concat(this.id)),this.eventHandlers.onTransportError()}},{key:"C",get:function(){return w}}]),n}(d),R=function(t){u(n,t);var e=l(n);function n(t,r,o){var s;return i(this,n),(s=e.call(this)).type=w.NON_INVITE_SERVER,s.id=o.via_branch,s.ua=t,s.transport=r,s.request=o,s.last_response="",o.server_transaction=f(s),s.state=w.STATUS_TRYING,t.newTransaction(f(s)),s}return s(n,[{key:"stateChanged",value:function(t){this.state=t,this.emit("stateChanged")}},{key:"timer_J",value:function(){T.debug("Timer J expired for transaction ".concat(this.id)),this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,T.debug("transport error occurred, deleting transaction ".concat(this.id)),clearTimeout(this.J),this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"receiveResponse",value:function(t,e,n,r){var i=this;if(100===t)switch(this.state){case w.STATUS_TRYING:this.stateChanged(w.STATUS_PROCEEDING),this.transport.send(e)||this.onTransportError();break;case w.STATUS_PROCEEDING:this.last_response=e,this.transport.send(e)?n&&n():(this.onTransportError(),r&&r())}else if(t>=200&&t<=699)switch(this.state){case w.STATUS_TRYING:case w.STATUS_PROCEEDING:this.stateChanged(w.STATUS_COMPLETED),this.last_response=e,this.J=setTimeout((function(){i.timer_J()}),g.TIMER_J),this.transport.send(e)?n&&n():(this.onTransportError(),r&&r())}}},{key:"C",get:function(){return w}}]),n}(d),O=function(t){u(n,t);var e=l(n);function n(t,r,o){var s;return i(this,n),(s=e.call(this)).type=w.INVITE_SERVER,s.id=o.via_branch,s.ua=t,s.transport=r,s.request=o,s.last_response="",o.server_transaction=f(s),s.state=w.STATUS_PROCEEDING,t.newTransaction(f(s)),s.resendProvisionalTimer=null,o.reply(100),s}return s(n,[{key:"stateChanged",value:function(t){this.state=t,this.emit("stateChanged")}},{key:"timer_H",value:function(){E.debug("Timer H expired for transaction ".concat(this.id)),this.state===w.STATUS_COMPLETED&&E.debug("ACK not received, dialog will be terminated"),this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_I",value:function(){this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this)}},{key:"timer_L",value:function(){E.debug("Timer L expired for transaction ".concat(this.id)),this.state===w.STATUS_ACCEPTED&&(this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"onTransportError",value:function(){this.transportError||(this.transportError=!0,E.debug("transport error occurred, deleting transaction ".concat(this.id)),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(w.STATUS_TERMINATED),this.ua.destroyTransaction(this))}},{key:"resend_provisional",value:function(){this.transport.send(this.last_response)||this.onTransportError()}},{key:"receiveResponse",value:function(t,e,n,r){var i=this;if(t>=100&&t<=199)switch(this.state){case w.STATUS_PROCEEDING:this.transport.send(e)||this.onTransportError(),this.last_response=e}if(t>100&&t<=199&&this.state===w.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval((function(){i.resend_provisional()}),g.PROVISIONAL_RESPONSE_INTERVAL));else if(t>=200&&t<=299)switch(this.state){case w.STATUS_PROCEEDING:this.stateChanged(w.STATUS_ACCEPTED),this.last_response=e,this.L=setTimeout((function(){i.timer_L()}),g.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case w.STATUS_ACCEPTED:this.transport.send(e)?n&&n():(this.onTransportError(),r&&r())}else if(t>=300&&t<=699)switch(this.state){case w.STATUS_PROCEEDING:null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(e)?(this.stateChanged(w.STATUS_COMPLETED),this.H=setTimeout((function(){i.timer_H()}),g.TIMER_H),n&&n()):(this.onTransportError(),r&&r())}}},{key:"C",get:function(){return w}}]),n}(d);t.exports={C:w,NonInviteClientTransaction:A,InviteClientTransaction:S,AckClientTransaction:C,NonInviteServerTransaction:R,InviteServerTransaction:O,checkTransaction:function(t,e){var n,r=t._transactions;switch(e.method){case _.INVITE:if(n=r.ist[e.via_branch]){switch(n.state){case w.STATUS_PROCEEDING:n.transport.send(n.last_response)}return!0}break;case _.ACK:if(!(n=r.ist[e.via_branch]))return!1;if(n.state===w.STATUS_ACCEPTED)return!1;if(n.state===w.STATUS_COMPLETED)return n.state=w.STATUS_CONFIRMED,n.I=setTimeout((function(){n.timer_I()}),g.TIMER_I),!0;break;case _.CANCEL:return(n=r.ist[e.via_branch])?(e.reply_sl(200),n.state!==w.STATUS_PROCEEDING):(e.reply_sl(481),!0);default:if(n=r.nist[e.via_branch]){switch(n.state){case w.STATUS_TRYING:break;case w.STATUS_PROCEEDING:case w.STATUS_COMPLETED:n.transport.send(n.last_response)}return!0}}}}},function(t,e,n){"use strict";var r=n(16);function i(t){r.call(this,null==t?"canceled":t,r.ERR_CANCELED),this.name="CanceledError"}n(4).inherits(i,r,{__CANCEL__:!0}),t.exports=i},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={};let o,s=0,u=0;function a(t){let e="";do{e=r[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function l(){const t=a(+new Date);return t!==o?(s=0,o=t):t+"."+a(s++)}for(;u<64;u++)i[r[u]]=u},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}var o=n(15),s=n(10);t.exports=function(){function t(e,n,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e&&e instanceof o))throw new TypeError('missing or invalid "uri" parameter');for(var i in this._uri=e,this._parameters={},this.display_name=n,r)Object.prototype.hasOwnProperty.call(r,i)&&this.setParam(i,r[i])}return i(t,null,[{key:"parse",value:function(t){return-1!==(t=s.parse(t,"Name_Addr_Header"))?t:void 0}}]),i(t,[{key:"setParam",value:function(t,e){t&&(this._parameters[t.toLowerCase()]=null==e?null:e.toString())}},{key:"getParam",value:function(t){if(t)return this._parameters[t.toLowerCase()]}},{key:"hasParam",value:function(t){if(t)return!!this._parameters.hasOwnProperty(t.toLowerCase())}},{key:"deleteParam",value:function(t){if(t=t.toLowerCase(),this._parameters.hasOwnProperty(t)){var e=this._parameters[t];return delete this._parameters[t],e}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"clone",value:function(){return new t(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}},{key:"_quote",value:function(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}},{key:"toString",value:function(){var t=this._display_name?'"'.concat(this._quote(this._display_name),'" '):"";for(var e in t+="<".concat(this._uri.toString(),">"),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,e)&&(t+=";".concat(e),null!==this._parameters[e]&&(t+="=".concat(this._parameters[e])));return t}},{key:"uri",get:function(){return this._uri}},{key:"display_name",get:function(){return this._display_name},set:function(t){this._display_name=0===t?"0":t}}]),t}()},function(t,e,n){(function(r){e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(i=r))}),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(50)(e);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(29))},function(t,e,n){"use strict";(function(e){var r=n(4),i=n(74),o=n(16),s=n(37),u=n(38),a={"Content-Type":"application/x-www-form-urlencoded"};function l(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var c,f={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(c=n(40)),c),transformRequest:[function(t,e){if(i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t))return t;if(r.isArrayBufferView(t))return t.buffer;if(r.isURLSearchParams(t))return l(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n,o=r.isObject(t),s=e&&e["Content-Type"];if((n=r.isFileList(t))||o&&"multipart/form-data"===s){var a=this.env&&this.env.FormData;return u(n?{"files[]":t}:t,a&&new a)}return o||"application/json"===s?(l(e,"application/json"),function(t,e,n){if(r.isString(t))try{return(e||JSON.parse)(t),r.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||f.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(s){if("SyntaxError"===t.name)throw o.from(t,o.ERR_BAD_RESPONSE,this,null,this.response);throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(85)},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){f.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){f.headers[t]=r.merge(a)})),t.exports=f}).call(this,n(29))},function(t){t.exports=JSON.parse('{"name":"jssip","title":"JsSIP","description":"the Javascript SIP library","version":"3.9.1","homepage":"https://jssip.net","contributors":["José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)","Iñaki Baz Castillo <ibc@aliax.net> (https://inakibaz.me)"],"types":"lib/JsSIP.d.ts","main":"lib-es5/JsSIP.js","keywords":["sip","websocket","webrtc","node","browser","library"],"license":"MIT","repository":{"type":"git","url":"https://github.com/versatica/JsSIP.git"},"bugs":{"url":"https://github.com/versatica/JsSIP/issues"},"dependencies":{"@types/debug":"^4.1.5","@types/node":"^14.14.34","debug":"^4.3.1","events":"^3.3.0","sdp-transform":"^2.14.1"},"devDependencies":{"@babel/core":"^7.13.10","@babel/preset-env":"^7.13.10","ansi-colors":"^3.2.4","browserify":"^16.5.1","eslint":"^5.16.0","fancy-log":"^1.3.3","gulp":"^4.0.2","gulp-babel":"^8.0.0","gulp-eslint":"^5.0.0","gulp-expect-file":"^1.0.2","gulp-header":"^2.0.9","gulp-nodeunit-runner":"^0.2.2","gulp-plumber":"^1.2.1","gulp-rename":"^1.4.0","gulp-uglify-es":"^1.0.4","pegjs":"^0.7.0","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"},"scripts":{"lint":"gulp lint","test":"gulp test","prepublishOnly":"gulp babel"}}')},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var a,l=[],c=!1,f=-1;function h(){c&&a&&(c=!1,a.length?l=a.concat(l):f=-1,l.length&&d())}function d(){if(!c){var t=u(h);c=!0;for(var e=l.length;e;){for(a=l,l=[];++f<e;)a&&a[f].run();f=-1,e=l.length}a=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function _(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=n(53),i=n(54);e.write=i,e.parse=r.parse,e.parseParams=r.parseParams,e.parseFmtpConfig=r.parseFmtpConfig,e.parsePayloads=r.parsePayloads,e.parseRemoteCandidates=r.parseRemoteCandidates,e.parseImageAttributes=r.parseImageAttributes,e.parseSimulcastStreamList=r.parseSimulcastStreamList},function(t,e){var n=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return null!=t.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return null!=t.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return null!=t.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=null!=t.raddr?" raddr %s rport %d":"%v%v",e+=null!=t.tcptype?" tcptype %s":"%v",null!=t.generation&&(e+=" generation %d"),e+=null!=t["network-id"]?" network-id %d":"%v",e+=null!=t["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return null!=t.attribute&&(e+=" %s",null!=t.value&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return null!=t.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(null!=t.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=null!=t.id?"id=%s %s":"%v%s",e+=null!=t.mediaClockValue?"=%s":"",e+=null!=t.rateNumerator?" rate=%s":"",e+=null!=t.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach((function(t){n[t].forEach((function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")}))}))},function(t,e,n){"use strict";var r=500;t.exports={T1:r,T2:4e3,T4:5e3,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,s=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw s}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=n(9).EventEmitter,d=n(30),p=n(3),_=n(2),v=n(14),g=n(21),m=n(5),y=n(32),b=n(13),T=n(56),E=n(20),w=n(58),A=n(59),S=n(60),C=n(61),R=n(15),O=new p("RTCSession"),I={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9},k=["audio","video"];t.exports=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=l(n);function n(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),O.debug("new"),(r=e.call(this))._id=null,r._ua=t,r._status=I.STATUS_NULL,r._dialog=null,r._earlyDialogs={},r._contact=null,r._from_tag=null,r._to_tag=null,r._connection=null,r._connectionPromiseQueue=Promise.resolve(),r._request=null,r._is_canceled=!1,r._cancel_reason="",r._is_confirmed=!1,r._late_sdp=!1,r._rtcOfferConstraints=null,r._rtcAnswerConstraints=null,r._localMediaStream=null,r._localMediaStreamLocallyGenerated=!1,r._rtcReady=!0,r._iceReady=!1,r._timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},r._direction=null,r._local_identity=null,r._remote_identity=null,r._start_time=null,r._end_time=null,r._tones=null,r._audioMuted=!1,r._videoMuted=!1,r._localHold=!1,r._remoteHold=!1,r._sessionTimers={enabled:r._ua.configuration.session_timers,refreshMethod:r._ua.configuration.session_timers_refresh_method,defaultExpires:_.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},r._referSubscribers={},r._data={},r}return u(n,null,[{key:"C",get:function(){return I}}]),u(n,[{key:"isInProgress",value:function(){switch(this._status){case I.STATUS_NULL:case I.STATUS_INVITE_SENT:case I.STATUS_1XX_RECEIVED:case I.STATUS_INVITE_RECEIVED:case I.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}}},{key:"isEstablished",value:function(){switch(this._status){case I.STATUS_ANSWERED:case I.STATUS_WAITING_FOR_ACK:case I.STATUS_CONFIRMED:return!0;default:return!1}}},{key:"isEnded",value:function(){switch(this._status){case I.STATUS_CANCELED:case I.STATUS_TERMINATED:return!0;default:return!1}}},{key:"isMuted",value:function(){return{audio:this._audioMuted,video:this._videoMuted}}},{key:"isOnHold",value:function(){return{local:this._localHold,remote:this._remoteHold}}},{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;O.debug("connect()");var r=t,i=m.cloneObject(e.eventHandlers),o=m.cloneArray(e.extraHeaders),s=m.cloneObject(e.mediaConstraints,{audio:!0,video:!0}),u=e.mediaStream||null,a=m.cloneObject(e.pcConfig,{iceServers:[]}),l=e.rtcConstraints||null,c=e.rtcOfferConstraints||null;if(this._rtcOfferConstraints=c,this._rtcAnswerConstraints=e.rtcAnswerConstraints||null,this._data=e.data||this._data,void 0===t)throw new TypeError("Not enough arguments");if(this._status!==I.STATUS_NULL)throw new v.InvalidStateError(this._status);if(!window.RTCPeerConnection)throw new v.NotSupportedError("WebRTC not supported");if(!(t=this._ua.normalizeTarget(t)))throw new TypeError("Invalid target: ".concat(r));for(var f in this._sessionTimers.enabled&&m.isDecimal(e.sessionTimersExpires)&&(e.sessionTimersExpires>=_.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=e.sessionTimersExpires:this._sessionTimers.defaultExpires=_.SESSION_EXPIRES),i)Object.prototype.hasOwnProperty.call(i,f)&&this.on(f,i[f]);this._from_tag=m.newTag();var h=e.anonymous||!1,d={from_tag:this._from_tag};this._contact=this._ua.contact.toString({anonymous:h,outbound:!0}),h?(d.from_display_name="Anonymous",d.from_uri=new R("sip","anonymous","anonymous.invalid"),o.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString())),o.push("Privacy: id")):e.fromUserName&&(d.from_uri=new R("sip",e.fromUserName,this._ua.configuration.uri.host),o.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),e.fromDisplayName&&(d.from_display_name=e.fromDisplayName),o.push("Contact: ".concat(this._contact)),o.push("Content-Type: application/sdp"),this._sessionTimers.enabled&&o.push("Session-Expires: ".concat(this._sessionTimers.defaultExpires).concat(this._ua.configuration.session_timers_force_refresher?";refresher=uac":"")),this._request=new b.InitialOutgoingInviteRequest(t,this._ua,d,o),this._id=this._request.call_id+this._from_tag,this._createRTCConnection(a,l),this._direction="outgoing",this._local_identity=this._request.from,this._remote_identity=this._request.to,n&&n(this),this._newRTCSession("local",this._request),this._sendInitialRequest(s,c,u)}},{key:"init_incoming",value:function(t,e){var n,r=this;O.debug("init_incoming()");var i=t.hasHeader("Content-Type")?t.getHeader("Content-Type").toLowerCase():void 0;t.body&&"application/sdp"!==i?t.reply(415):(this._status=I.STATUS_INVITE_RECEIVED,this._from_tag=t.from_tag,this._id=t.call_id+this._from_tag,this._request=t,this._contact=this._ua.contact.toString(),t.hasHeader("expires")&&(n=1e3*t.getHeader("expires")),t.to_tag=m.newTag(),this._createDialog(t,"UAS",!0)?(t.body?this._late_sdp=!1:this._late_sdp=!0,this._status=I.STATUS_WAITING_FOR_ANSWER,this._timers.userNoAnswerTimer=setTimeout((function(){t.reply(408),r._failed("local",null,_.causes.NO_ANSWER)}),this._ua.configuration.no_answer_timeout),n&&(this._timers.expiresTimer=setTimeout((function(){r._status===I.STATUS_WAITING_FOR_ANSWER&&(t.reply(487),r._failed("system",null,_.causes.EXPIRES))}),n)),this._direction="incoming",this._local_identity=t.to,this._remote_identity=t.from,e&&e(this),this._newRTCSession("remote",t),this._status!==I.STATUS_TERMINATED&&(t.reply(180,null,["Contact: ".concat(this._contact)]),this._progress("local",null))):t.reply(500,"Missing Contact header field"))}},{key:"answer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O.debug("answer()");var n=this._request,r=m.cloneArray(e.extraHeaders),o=m.cloneObject(e.mediaConstraints),s=e.mediaStream||null,u=m.cloneObject(e.pcConfig,{iceServers:[]}),a=e.rtcConstraints||null,l=e.rtcAnswerConstraints||null,c=m.cloneObject(e.rtcOfferConstraints),f=!1,h=!1,d=!1,p=!1;if(this._rtcAnswerConstraints=l,this._rtcOfferConstraints=e.rtcOfferConstraints||null,this._data=e.data||this._data,"incoming"!==this._direction)throw new v.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this._status!==I.STATUS_WAITING_FOR_ANSWER)throw new v.InvalidStateError(this._status);if(this._sessionTimers.enabled&&m.isDecimal(e.sessionTimersExpires)&&(e.sessionTimersExpires>=_.MIN_SESSION_EXPIRES?this._sessionTimers.defaultExpires=e.sessionTimersExpires:this._sessionTimers.defaultExpires=_.SESSION_EXPIRES),this._status=I.STATUS_ANSWERED,this._createDialog(n,"UAS")){clearTimeout(this._timers.userNoAnswerTimer),r.unshift("Contact: ".concat(this._contact));var g=n.parseSDP();Array.isArray(g.media)||(g.media=[g.media]);var y,b=i(g.media);try{for(b.s();!(y=b.n()).done;){var T=y.value;"audio"===T.type&&(f=!0,T.direction&&"sendrecv"!==T.direction||(d=!0)),"video"===T.type&&(h=!0,T.direction&&"sendrecv"!==T.direction||(p=!0))}}catch(t){b.e(t)}finally{b.f()}if(s&&!1===o.audio){var E,w=i(s.getAudioTracks());try{for(w.s();!(E=w.n()).done;){var A=E.value;s.removeTrack(A)}}catch(t){w.e(t)}finally{w.f()}}if(s&&!1===o.video){var S,C=i(s.getVideoTracks());try{for(C.s();!(S=C.n()).done;){var R=S.value;s.removeTrack(R)}}catch(t){C.e(t)}finally{C.f()}}s||void 0!==o.audio||(o.audio=d),s||void 0!==o.video||(o.video=p),s||f||c.offerToReceiveAudio||(o.audio=!1),s||h||c.offerToReceiveVideo||(o.video=!1),this._createRTCConnection(u,a),Promise.resolve().then((function(){return s||(o.audio||o.video?(t._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(o).catch((function(e){if(t._status===I.STATUS_TERMINATED)throw new Error("terminated");throw n.reply(480),t._failed("local",null,_.causes.USER_DENIED_MEDIA_ACCESS),O.warn('emit "getusermediafailed" [error:%o]',e),t.emit("getusermediafailed",e),new Error("getUserMedia() failed")}))):void 0)})).then((function(e){if(t._status===I.STATUS_TERMINATED)throw new Error("terminated");t._localMediaStream=e,e&&e.getTracks().forEach((function(n){t._connection.addTrack(n,e)}))})).then((function(){if(!t._late_sdp){var e={originator:"remote",type:"offer",sdp:n.body};O.debug('emit "sdp"'),t.emit("sdp",e);var r=new RTCSessionDescription({type:"offer",sdp:e.sdp});return t._connectionPromiseQueue=t._connectionPromiseQueue.then((function(){return t._connection.setRemoteDescription(r)})).catch((function(e){throw n.reply(488),t._failed("system",null,_.causes.WEBRTC_ERROR),O.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',e),t.emit("peerconnection:setremotedescriptionfailed",e),new Error("peerconnection.setRemoteDescription() failed")})),t._connectionPromiseQueue}})).then((function(){if(t._status===I.STATUS_TERMINATED)throw new Error("terminated");return t._connecting(n),t._late_sdp?t._createLocalDescription("offer",t._rtcOfferConstraints).catch((function(){throw n.reply(500),new Error("_createLocalDescription() failed")})):t._createLocalDescription("answer",l).catch((function(){throw n.reply(500),new Error("_createLocalDescription() failed")}))})).then((function(e){if(t._status===I.STATUS_TERMINATED)throw new Error("terminated");t._handleSessionTimersInIncomingRequest(n,r),n.reply(200,null,r,e,(function(){t._status=I.STATUS_WAITING_FOR_ACK,t._setInvite2xxTimer(n,e),t._setACKTimer(),t._accepted("local")}),(function(){t._failed("system",null,_.causes.CONNECTION_ERROR)}))})).catch((function(e){t._status!==I.STATUS_TERMINATED&&O.warn(e)}))}else n.reply(500,"Error creating dialog")}},{key:"terminate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O.debug("terminate()");var n,r=e.cause||_.causes.BYE,i=m.cloneArray(e.extraHeaders),o=e.body,s=e.status_code,u=e.reason_phrase;if(this._status===I.STATUS_TERMINATED)throw new v.InvalidStateError(this._status);switch(this._status){case I.STATUS_NULL:case I.STATUS_INVITE_SENT:case I.STATUS_1XX_RECEIVED:if(O.debug("canceling session"),s&&(s<200||s>=700))throw new TypeError("Invalid status_code: ".concat(s));s&&(u=u||_.REASON_PHRASE[s]||"",n="SIP ;cause=".concat(s,' ;text="').concat(u,'"')),this._status===I.STATUS_NULL||this._status===I.STATUS_INVITE_SENT?(this._is_canceled=!0,this._cancel_reason=n):this._status===I.STATUS_1XX_RECEIVED&&this._request.cancel(n),this._status=I.STATUS_CANCELED,this._failed("local",null,_.causes.CANCELED);break;case I.STATUS_WAITING_FOR_ANSWER:case I.STATUS_ANSWERED:if(O.debug("rejecting session"),(s=s||480)<300||s>=700)throw new TypeError("Invalid status_code: ".concat(s));this._request.reply(s,u,i,o),this._failed("local",null,_.causes.REJECTED);break;case I.STATUS_WAITING_FOR_ACK:case I.STATUS_CONFIRMED:if(O.debug("terminating session"),u=e.reason_phrase||_.REASON_PHRASE[s]||"",s&&(s<200||s>=700))throw new TypeError("Invalid status_code: ".concat(s));if(s&&i.push("Reason: SIP ;cause=".concat(s,'; text="').concat(u,'"')),this._status===I.STATUS_WAITING_FOR_ACK&&"incoming"===this._direction&&this._request.server_transaction.state!==g.C.STATUS_TERMINATED){var a=this._dialog;this.receiveRequest=function(e){e.method===_.ACK&&(t.sendRequest(_.BYE,{extraHeaders:i,body:o}),a.terminate())},this._request.server_transaction.on("stateChanged",(function(){t._request.server_transaction.state===g.C.STATUS_TERMINATED&&(t.sendRequest(_.BYE,{extraHeaders:i,body:o}),a.terminate())})),this._ended("local",null,r),this._dialog=a,this._ua.newDialog(a)}else this.sendRequest(_.BYE,{extraHeaders:i,body:o}),this._ended("local",null,r)}}},{key:"sendDTMF",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O.debug("sendDTMF() | tones: %s",t);var n=0,r=e.duration||null,i=e.interToneGap||null,o=e.transportType||_.DTMF_TRANSPORT.INFO;if(void 0===t)throw new TypeError("Not enough arguments");if(this._status!==I.STATUS_CONFIRMED&&this._status!==I.STATUS_WAITING_FOR_ACK&&this._status!==I.STATUS_1XX_RECEIVED)throw new v.InvalidStateError(this._status);if(o!==_.DTMF_TRANSPORT.INFO&&o!==_.DTMF_TRANSPORT.RFC2833)throw new TypeError("invalid transportType: ".concat(o));if("number"==typeof t&&(t=t.toString()),!t||"string"!=typeof t||!t.match(/^[0-9A-DR#*,]+$/i))throw new TypeError("Invalid tones: ".concat(t));if(r&&!m.isDecimal(r))throw new TypeError("Invalid tone duration: ".concat(r));if(r?r<w.C.MIN_DURATION?(O.debug('"duration" value is lower than the minimum allowed, setting it to '.concat(w.C.MIN_DURATION," milliseconds")),r=w.C.MIN_DURATION):r>w.C.MAX_DURATION?(O.debug('"duration" value is greater than the maximum allowed, setting it to '.concat(w.C.MAX_DURATION," milliseconds")),r=w.C.MAX_DURATION):r=Math.abs(r):r=w.C.DEFAULT_DURATION,e.duration=r,i&&!m.isDecimal(i))throw new TypeError("Invalid interToneGap: ".concat(i));if(i?i<w.C.MIN_INTER_TONE_GAP?(O.debug('"interToneGap" value is lower than the minimum allowed, setting it to '.concat(w.C.MIN_INTER_TONE_GAP," milliseconds")),i=w.C.MIN_INTER_TONE_GAP):i=Math.abs(i):i=w.C.DEFAULT_INTER_TONE_GAP,o!==_.DTMF_TRANSPORT.RFC2833)this._tones?this._tones+=t:(this._tones=t,u.call(this));else{var s=this._getDTMFRTPSender();s&&(t=s.toneBuffer+t,s.insertDTMF(t,r,i))}function u(){var t,o=this;if(this._status===I.STATUS_TERMINATED||!this._tones||n>=this._tones.length)this._tones=null;else{var s=this._tones[n];if(n+=1,","===s)t=2e3;else{var a=new w(this);e.eventHandlers={onFailed:function(){o._tones=null}},a.send(s,e),t=r+i}setTimeout(u.bind(this),t)}}}},{key:"sendInfo",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(O.debug("sendInfo()"),this._status!==I.STATUS_CONFIRMED&&this._status!==I.STATUS_WAITING_FOR_ACK&&this._status!==I.STATUS_1XX_RECEIVED)throw new v.InvalidStateError(this._status);var r=new A(this);r.send(t,e,n)}},{key:"mute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!1};O.debug("mute()");var e=!1,n=!1;!1===this._audioMuted&&t.audio&&(e=!0,this._audioMuted=!0,this._toggleMuteAudio(!0)),!1===this._videoMuted&&t.video&&(n=!0,this._videoMuted=!0,this._toggleMuteVideo(!0)),!0!==e&&!0!==n||this._onmute({audio:e,video:n})}},{key:"unmute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0,video:!0};O.debug("unmute()");var e=!1,n=!1;!0===this._audioMuted&&t.audio&&(e=!0,this._audioMuted=!1,!1===this._localHold&&this._toggleMuteAudio(!1)),!0===this._videoMuted&&t.video&&(n=!0,this._videoMuted=!1,!1===this._localHold&&this._toggleMuteVideo(!1)),!0!==e&&!0!==n||this._onunmute({audio:e,video:n})}},{key:"hold",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(O.debug("hold()"),this._status!==I.STATUS_WAITING_FOR_ACK&&this._status!==I.STATUS_CONFIRMED)return!1;if(!0===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!0,this._onhold("local");var r={succeeded:function(){n&&n()},failed:function(){t.terminate({cause:_.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}};return e.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:e.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:e.extraHeaders}),!0}},{key:"unhold",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(O.debug("unhold()"),this._status!==I.STATUS_WAITING_FOR_ACK&&this._status!==I.STATUS_CONFIRMED)return!1;if(!1===this._localHold)return!1;if(!this._isReadyToReOffer())return!1;this._localHold=!1,this._onunhold("local");var r={succeeded:function(){n&&n()},failed:function(){t.terminate({cause:_.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}};return e.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:r,extraHeaders:e.extraHeaders}):this._sendReinvite({eventHandlers:r,extraHeaders:e.extraHeaders}),!0}},{key:"renegotiate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;O.debug("renegotiate()");var r=e.rtcOfferConstraints||null;if(this._status!==I.STATUS_WAITING_FOR_ACK&&this._status!==I.STATUS_CONFIRMED)return!1;if(!this._isReadyToReOffer())return!1;var i={succeeded:function(){n&&n()},failed:function(){t.terminate({cause:_.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}};return this._setLocalMediaStatus(),e.useUpdate?this._sendUpdate({sdpOffer:!0,eventHandlers:i,rtcOfferConstraints:r,extraHeaders:e.extraHeaders}):this._sendReinvite({eventHandlers:i,rtcOfferConstraints:r,extraHeaders:e.extraHeaders}),!0}},{key:"refer",value:function(t,e){var n=this;O.debug("refer()");var r=t;if(this._status!==I.STATUS_WAITING_FOR_ACK&&this._status!==I.STATUS_CONFIRMED)return!1;if(!(t=this._ua.normalizeTarget(t)))throw new TypeError("Invalid target: ".concat(r));var i=new C(this);i.sendRefer(t,e);var o=i.id;return this._referSubscribers[o]=i,i.on("requestFailed",(function(){delete n._referSubscribers[o]})),i.on("accepted",(function(){delete n._referSubscribers[o]})),i.on("failed",(function(){delete n._referSubscribers[o]})),i}},{key:"sendRequest",value:function(t,e){return O.debug("sendRequest()"),this._dialog.sendRequest(t,e)}},{key:"receiveRequest",value:function(t){var e=this;if(O.debug("receiveRequest()"),t.method===_.CANCEL)this._status!==I.STATUS_WAITING_FOR_ANSWER&&this._status!==I.STATUS_ANSWERED||(this._status=I.STATUS_CANCELED,this._request.reply(487),this._failed("remote",t,_.causes.CANCELED));else switch(t.method){case _.ACK:if(this._status!==I.STATUS_WAITING_FOR_ACK)return;if(this._status=I.STATUS_CONFIRMED,clearTimeout(this._timers.ackTimer),clearTimeout(this._timers.invite2xxTimer),this._late_sdp){if(!t.body){this.terminate({cause:_.causes.MISSING_SDP,status_code:400});break}var n={originator:"remote",type:"answer",sdp:t.body};O.debug('emit "sdp"'),this.emit("sdp",n);var r=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._connection.setRemoteDescription(r)})).then((function(){e._is_confirmed||e._confirmed("remote",t)})).catch((function(t){e.terminate({cause:_.causes.BAD_MEDIA_DESCRIPTION,status_code:488}),O.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),e.emit("peerconnection:setremotedescriptionfailed",t)}))}else this._is_confirmed||this._confirmed("remote",t);break;case _.BYE:this._status===I.STATUS_CONFIRMED||this._status===I.STATUS_WAITING_FOR_ACK?(t.reply(200),this._ended("remote",t,_.causes.BYE)):this._status===I.STATUS_INVITE_RECEIVED||this._status===I.STATUS_WAITING_FOR_ANSWER?(t.reply(200),this._request.reply(487,"BYE Received"),this._ended("remote",t,_.causes.BYE)):t.reply(403,"Wrong Status");break;case _.INVITE:this._status===I.STATUS_CONFIRMED?t.hasHeader("replaces")?this._receiveReplaces(t):this._receiveReinvite(t):t.reply(403,"Wrong Status");break;case _.INFO:if(this._status===I.STATUS_1XX_RECEIVED||this._status===I.STATUS_WAITING_FOR_ANSWER||this._status===I.STATUS_ANSWERED||this._status===I.STATUS_WAITING_FOR_ACK||this._status===I.STATUS_CONFIRMED){var i=t.hasHeader("Content-Type")?t.getHeader("Content-Type").toLowerCase():void 0;i&&i.match(/^application\/dtmf-relay/i)?new w(this).init_incoming(t):void 0!==i?new A(this).init_incoming(t):t.reply(415)}else t.reply(403,"Wrong Status");break;case _.UPDATE:this._status===I.STATUS_CONFIRMED?this._receiveUpdate(t):t.reply(403,"Wrong Status");break;case _.REFER:this._status===I.STATUS_CONFIRMED?this._receiveRefer(t):t.reply(403,"Wrong Status");break;case _.NOTIFY:this._status===I.STATUS_CONFIRMED?this._receiveNotify(t):t.reply(403,"Wrong Status");break;default:t.reply(501)}}},{key:"onTransportError",value:function(){O.warn("onTransportError()"),this._status!==I.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:_.causes.CONNECTION_ERROR,cause:_.causes.CONNECTION_ERROR})}},{key:"onRequestTimeout",value:function(){O.warn("onRequestTimeout()"),this._status!==I.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:_.causes.REQUEST_TIMEOUT,cause:_.causes.REQUEST_TIMEOUT})}},{key:"onDialogError",value:function(){O.warn("onDialogError()"),this._status!==I.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:_.causes.DIALOG_ERROR,cause:_.causes.DIALOG_ERROR})}},{key:"newDTMF",value:function(t){O.debug("newDTMF()"),this.emit("newDTMF",t)}},{key:"newInfo",value:function(t){O.debug("newInfo()"),this.emit("newInfo",t)}},{key:"_isReadyToReOffer",value:function(){return this._rtcReady?this._dialog?!0!==this._dialog.uac_pending_reply&&!0!==this._dialog.uas_pending_reply||(O.debug("_isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):(O.debug("_isReadyToReOffer() | session not established yet"),!1):(O.debug("_isReadyToReOffer() | internal WebRTC status not ready"),!1)}},{key:"_close",value:function(){if(O.debug("close()"),this._localMediaStream&&this._localMediaStreamLocallyGenerated&&(O.debug("close() | closing local MediaStream"),m.closeMediaStream(this._localMediaStream)),this._status!==I.STATUS_TERMINATED){if(this._status=I.STATUS_TERMINATED,this._connection)try{this._connection.close()}catch(t){O.warn("close() | error closing the RTCPeerConnection: %o",t)}for(var t in this._timers)Object.prototype.hasOwnProperty.call(this._timers,t)&&clearTimeout(this._timers[t]);for(var e in clearTimeout(this._sessionTimers.timer),this._dialog&&(this._dialog.terminate(),delete this._dialog),this._earlyDialogs)Object.prototype.hasOwnProperty.call(this._earlyDialogs,e)&&(this._earlyDialogs[e].terminate(),delete this._earlyDialogs[e]);for(var n in this._referSubscribers)Object.prototype.hasOwnProperty.call(this._referSubscribers,n)&&delete this._referSubscribers[n];this._ua.destroyRTCSession(this)}}},{key:"_setInvite2xxTimer",value:function(t,e){var n=y.T1;this._timers.invite2xxTimer=setTimeout(function r(){this._status===I.STATUS_WAITING_FOR_ACK&&(t.reply(200,null,["Contact: ".concat(this._contact)],e),n<y.T2&&(n*=2)>y.T2&&(n=y.T2),this._timers.invite2xxTimer=setTimeout(r.bind(this),n))}.bind(this),n)}},{key:"_setACKTimer",value:function(){var t=this;this._timers.ackTimer=setTimeout((function(){t._status===I.STATUS_WAITING_FOR_ACK&&(O.debug("no ACK received, terminating the session"),clearTimeout(t._timers.invite2xxTimer),t.sendRequest(_.BYE),t._ended("remote",null,_.causes.NO_ACK))}),y.TIMER_H)}},{key:"_createRTCConnection",value:function(t,e){var n=this;this._connection=new RTCPeerConnection(t,e),this._connection.addEventListener("iceconnectionstatechange",(function(){"failed"===n._connection.iceConnectionState&&n.terminate({cause:_.causes.RTP_TIMEOUT,status_code:408,reason_phrase:_.causes.RTP_TIMEOUT})})),O.debug('emit "peerconnection"'),this.emit("peerconnection",{peerconnection:this._connection})}},{key:"_createLocalDescription",value:function(t,e){var n=this;if(O.debug("createLocalDescription()"),"offer"!==t&&"answer"!==t)throw new Error('createLocalDescription() | invalid type "'.concat(t,'"'));var r=this._connection;return this._rtcReady=!1,Promise.resolve().then((function(){return"offer"===t?r.createOffer(e).catch((function(t){return O.warn('emit "peerconnection:createofferfailed" [error:%o]',t),n.emit("peerconnection:createofferfailed",t),Promise.reject(t)})):r.createAnswer(e).catch((function(t){return O.warn('emit "peerconnection:createanswerfailed" [error:%o]',t),n.emit("peerconnection:createanswerfailed",t),Promise.reject(t)}))})).then((function(t){return r.setLocalDescription(t).catch((function(t){return n._rtcReady=!0,O.warn('emit "peerconnection:setlocaldescriptionfailed" [error:%o]',t),n.emit("peerconnection:setlocaldescriptionfailed",t),Promise.reject(t)}))})).then((function(){var i=e&&e.iceRestart;if("complete"===r.iceGatheringState&&!i||"gathering"===r.iceGatheringState&&n._iceReady){n._rtcReady=!0;var o={originator:"local",type:t,sdp:r.localDescription.sdp};return O.debug('emit "sdp"'),n.emit("sdp",o),Promise.resolve(o.sdp)}return new Promise((function(e){var i,o,s=!1;n._iceReady=!1;var u=function(){r.removeEventListener("icecandidate",i),r.removeEventListener("icegatheringstatechange",o),s=!0,n._rtcReady=!0,n._iceReady=!0;var u={originator:"local",type:t,sdp:r.localDescription.sdp};O.debug('emit "sdp"'),n.emit("sdp",u),e(u.sdp)};r.addEventListener("icecandidate",i=function(t){var e=t.candidate;e?n.emit("icecandidate",{candidate:e,ready:u}):s||u()}),r.addEventListener("icegatheringstatechange",o=function(){"complete"!==r.iceGatheringState||s||u()})}))}))}},{key:"_createDialog",value:function(t,e,n){var r="UAS"===e?t.to_tag:t.from_tag,i="UAS"===e?t.from_tag:t.to_tag,o=t.call_id+r+i,s=this._earlyDialogs[o];if(n)return!!s||((s=new T(this,t,e,T.C.STATUS_EARLY)).error?(O.debug(s.error),this._failed("remote",t,_.causes.INTERNAL_ERROR),!1):(this._earlyDialogs[o]=s,!0));if(this._from_tag=t.from_tag,this._to_tag=t.to_tag,s)return s.update(t,e),this._dialog=s,delete this._earlyDialogs[o],!0;var u=new T(this,t,e);return u.error?(O.debug(u.error),this._failed("remote",t,_.causes.INTERNAL_ERROR),!1):(this._dialog=u,!0)}},{key:"_receiveReinvite",value:function(t){var e=this;O.debug("receiveReinvite()");var n=t.hasHeader("Content-Type")?t.getHeader("Content-Type").toLowerCase():void 0,r={request:t,callback:void 0,reject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=!0;var n=e.status_code||403,r=e.reason_phrase||"",o=m.cloneArray(e.extraHeaders);if(this._status!==I.STATUS_CONFIRMED)return!1;if(n<300||n>=700)throw new TypeError("Invalid status_code: ".concat(n));t.reply(n,r,o)}.bind(this)},i=!1;if(this.emit("reinvite",r),!i){if(this._late_sdp=!1,!t.body)return this._late_sdp=!0,this._remoteHold&&(this._remoteHold=!1,this._onunhold("remote")),void(this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._createLocalDescription("offer",e._rtcOfferConstraints)})).then((function(t){o.call(e,t)})).catch((function(){t.reply(500)})));if("application/sdp"!==n)return O.debug("invalid Content-Type"),void t.reply(415);this._processInDialogSdpOffer(t).then((function(t){e._status!==I.STATUS_TERMINATED&&o.call(e,t)})).catch((function(t){O.warn(t)}))}function o(e){var n=this,i=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(t,i),this._late_sdp&&(e=this._mangleOffer(e)),t.reply(200,null,i,e,(function(){n._status=I.STATUS_WAITING_FOR_ACK,n._setInvite2xxTimer(t,e),n._setACKTimer()})),"function"==typeof r.callback&&r.callback()}}},{key:"_receiveUpdate",value:function(t){var e=this;O.debug("receiveUpdate()");var n=t.hasHeader("Content-Type")?t.getHeader("Content-Type").toLowerCase():void 0,r={request:t,callback:void 0,reject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i=!0;var n=e.status_code||403,r=e.reason_phrase||"",o=m.cloneArray(e.extraHeaders);if(this._status!==I.STATUS_CONFIRMED)return!1;if(n<300||n>=700)throw new TypeError("Invalid status_code: ".concat(n));t.reply(n,r,o)}.bind(this)},i=!1;if(this.emit("update",r),!i)if(t.body){if("application/sdp"!==n)return O.debug("invalid Content-Type"),void t.reply(415);this._processInDialogSdpOffer(t).then((function(t){e._status!==I.STATUS_TERMINATED&&o.call(e,t)})).catch((function(t){O.warn(t)}))}else o.call(this,null);function o(e){var n=["Contact: ".concat(this._contact)];this._handleSessionTimersInIncomingRequest(t,n),t.reply(200,null,n,e),"function"==typeof r.callback&&r.callback()}}},{key:"_processInDialogSdpOffer",value:function(t){var e=this;O.debug("_processInDialogSdpOffer()");var n,r=t.parseSDP(),o=!1,s=i(r.media);try{for(s.s();!(n=s.n()).done;){var u=n.value;if(-1!==k.indexOf(u.type)){var a=u.direction||r.direction||"sendrecv";if("sendonly"!==a&&"inactive"!==a){o=!1;break}o=!0}}}catch(t){s.e(t)}finally{s.f()}var l={originator:"remote",type:"offer",sdp:t.body};O.debug('emit "sdp"'),this.emit("sdp",l);var c=new RTCSessionDescription({type:"offer",sdp:l.sdp});return this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if(e._status===I.STATUS_TERMINATED)throw new Error("terminated");return e._connection.setRemoteDescription(c).catch((function(n){throw t.reply(488),O.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),e.emit("peerconnection:setremotedescriptionfailed",n),n}))})).then((function(){if(e._status===I.STATUS_TERMINATED)throw new Error("terminated");!0===e._remoteHold&&!1===o?(e._remoteHold=!1,e._onunhold("remote")):!1===e._remoteHold&&!0===o&&(e._remoteHold=!0,e._onhold("remote"))})).then((function(){if(e._status===I.STATUS_TERMINATED)throw new Error("terminated");return e._createLocalDescription("answer",e._rtcAnswerConstraints).catch((function(e){throw t.reply(500),O.warn('emit "peerconnection:createtelocaldescriptionfailed" [error:%o]',e),e}))})).catch((function(t){O.warn("_processInDialogSdpOffer() failed [error: %o]",t)})),this._connectionPromiseQueue}},{key:"_receiveRefer",value:function(t){var e=this;if(O.debug("receiveRefer()"),!t.refer_to)return O.debug("no Refer-To header field present in REFER"),void t.reply(400);if(t.refer_to.uri.scheme!==_.SIP)return O.debug("Refer-To header field points to a non-SIP URI scheme"),void t.reply(416);t.reply(202);var r=new S(this,t.cseq);function i(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e="function"==typeof e?e:null,this._status!==I.STATUS_WAITING_FOR_ACK&&this._status!==I.STATUS_CONFIRMED)return!1;var o=new n(this._ua);if(o.on("progress",(function(t){var e=t.response;r.notify(e.status_code,e.reason_phrase)})),o.on("accepted",(function(t){var e=t.response;r.notify(e.status_code,e.reason_phrase)})),o.on("_failed",(function(t){var e=t.message,n=t.cause;e?r.notify(e.status_code,e.reason_phrase):r.notify(487,n)})),t.refer_to.uri.hasHeader("replaces")){var s=decodeURIComponent(t.refer_to.uri.getHeader("replaces"));i.extraHeaders=m.cloneArray(i.extraHeaders),i.extraHeaders.push("Replaces: ".concat(s))}o.connect(t.refer_to.uri.toAor(),i,e)}function o(){r.notify(603)}O.debug('emit "refer"'),this.emit("refer",{request:t,accept:function(t,n){i.call(e,t,n)},reject:function(){o.call(e)}})}},{key:"_receiveNotify",value:function(t){switch(O.debug("receiveNotify()"),t.event||t.reply(400),t.event.event){case"refer":var e,n;if(t.event.params&&t.event.params.id)e=t.event.params.id,n=this._referSubscribers[e];else{if(1!==Object.keys(this._referSubscribers).length)return void t.reply(400,"Missing event id parameter");n=this._referSubscribers[Object.keys(this._referSubscribers)[0]]}if(!n)return void t.reply(481,"Subscription does not exist");n.receiveNotify(t),t.reply(200);break;default:t.reply(489)}}},{key:"_receiveReplaces",value:function(t){var e=this;function r(e){var r=this;if(this._status!==I.STATUS_WAITING_FOR_ACK&&this._status!==I.STATUS_CONFIRMED)return!1;var i=new n(this._ua);i.on("confirmed",(function(){r.terminate()})),i.init_incoming(t,e)}function i(){O.debug("Replaced INVITE rejected by the user"),t.reply(486)}O.debug("receiveReplaces()"),this.emit("replaces",{request:t,accept:function(t){r.call(e,t)},reject:function(){i.call(e)}})}},{key:"_sendInitialRequest",value:function(t,e,n){var r=this,i=new E(this._ua,this._request,{onRequestTimeout:function(){r.onRequestTimeout()},onTransportError:function(){r.onTransportError()},onAuthenticated:function(t){r._request=t},onReceiveResponse:function(t){r._receiveInviteResponse(t)}});Promise.resolve().then((function(){return n||(t.audio||t.video?(r._localMediaStreamLocallyGenerated=!0,navigator.mediaDevices.getUserMedia(t).catch((function(t){if(r._status===I.STATUS_TERMINATED)throw new Error("terminated");throw r._failed("local",null,_.causes.USER_DENIED_MEDIA_ACCESS),O.warn('emit "getusermediafailed" [error:%o]',t),r.emit("getusermediafailed",t),t}))):void 0)})).then((function(t){if(r._status===I.STATUS_TERMINATED)throw new Error("terminated");return r._localMediaStream=t,t&&t.getTracks().forEach((function(e){r._connection.addTrack(e,t)})),r._connecting(r._request),r._createLocalDescription("offer",e).catch((function(t){throw r._failed("local",null,_.causes.WEBRTC_ERROR),t}))})).then((function(t){if(r._is_canceled||r._status===I.STATUS_TERMINATED)throw new Error("terminated");r._request.body=t,r._status=I.STATUS_INVITE_SENT,O.debug('emit "sending" [request:%o]',r._request),r.emit("sending",{request:r._request}),i.send()})).catch((function(t){r._status!==I.STATUS_TERMINATED&&O.warn(t)}))}},{key:"_getDTMFRTPSender",value:function(){var t=this._connection.getSenders().find((function(t){return t.track&&"audio"===t.track.kind}));if(t&&t.dtmf)return t.dtmf;O.warn("sendDTMF() | no local audio track to send DTMF with")}},{key:"_receiveInviteResponse",value:function(t){var e=this;if(O.debug("receiveInviteResponse()"),this._dialog&&t.status_code>=200&&t.status_code<=299){if(this._dialog.id.call_id===t.call_id&&this._dialog.id.local_tag===t.from_tag&&this._dialog.id.remote_tag===t.to_tag)return void this.sendRequest(_.ACK);var n=new T(this,t,"UAC");return void 0!==n.error?void O.debug(n.error):(this.sendRequest(_.ACK),void this.sendRequest(_.BYE))}if(this._is_canceled)t.status_code>=100&&t.status_code<200?this._request.cancel(this._cancel_reason):t.status_code>=200&&t.status_code<299&&this._acceptAndTerminate(t);else if(this._status===I.STATUS_INVITE_SENT||this._status===I.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(t.status_code):this._status=I.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(t.status_code):if(!t.to_tag){O.debug("1xx response received without to tag");break}if(t.hasHeader("contact")&&!this._createDialog(t,"UAC",!0))break;if(this._status=I.STATUS_1XX_RECEIVED,!t.body){this._progress("remote",t);break}var r={originator:"remote",type:"answer",sdp:t.body};O.debug('emit "sdp"'),this.emit("sdp",r);var i=new RTCSessionDescription({type:"answer",sdp:r.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._connection.setRemoteDescription(i)})).then((function(){return e._progress("remote",t)})).catch((function(t){O.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),e.emit("peerconnection:setremotedescriptionfailed",t)}));break;case/^2[0-9]{2}$/.test(t.status_code):if(this._status=I.STATUS_CONFIRMED,!t.body){this._acceptAndTerminate(t,400,_.causes.MISSING_SDP),this._failed("remote",t,_.causes.BAD_MEDIA_DESCRIPTION);break}if(!this._createDialog(t,"UAC"))break;var o={originator:"remote",type:"answer",sdp:t.body};O.debug('emit "sdp"'),this.emit("sdp",o);var s=new RTCSessionDescription({type:"answer",sdp:o.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){if("stable"===e._connection.signalingState)return e._connection.createOffer(e._rtcOfferConstraints).then((function(t){return e._connection.setLocalDescription(t)})).catch((function(n){e._acceptAndTerminate(t,500,n.toString()),e._failed("local",t,_.causes.WEBRTC_ERROR)}))})).then((function(){e._connection.setRemoteDescription(s).then((function(){e._handleSessionTimersInIncomingResponse(t),e._accepted("remote",t),e.sendRequest(_.ACK),e._confirmed("local",null)})).catch((function(n){e._acceptAndTerminate(t,488,"Not Acceptable Here"),e._failed("remote",t,_.causes.BAD_MEDIA_DESCRIPTION),O.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',n),e.emit("peerconnection:setremotedescriptionfailed",n)}))}));break;default:var u=m.sipErrorCause(t.status_code);this._failed("remote",t,u)}}},{key:"_sendReinvite",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O.debug("sendReinvite()");var n=m.cloneArray(e.extraHeaders),r=m.cloneObject(e.eventHandlers),i=e.rtcOfferConstraints||this._rtcOfferConstraints||null,o=!1;function s(t){var e=this;if(this._status!==I.STATUS_TERMINATED&&(this.sendRequest(_.ACK),!o))if(this._handleSessionTimersInIncomingResponse(t),t.body)if(t.hasHeader("Content-Type")&&"application/sdp"===t.getHeader("Content-Type").toLowerCase()){var n={originator:"remote",type:"answer",sdp:t.body};O.debug('emit "sdp"'),this.emit("sdp",n);var i=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._connection.setRemoteDescription(i)})).then((function(){r.succeeded&&r.succeeded(t)})).catch((function(t){u.call(e),O.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),e.emit("peerconnection:setremotedescriptionfailed",t)}))}else u.call(this);else u.call(this)}function u(t){r.failed&&r.failed(t)}n.push("Contact: ".concat(this._contact)),n.push("Content-Type: application/sdp"),this._sessionTimers.running&&n.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._createLocalDescription("offer",i)})).then((function(e){var r={originator:"local",type:"offer",sdp:e=t._mangleOffer(e)};O.debug('emit "sdp"'),t.emit("sdp",r),t.sendRequest(_.INVITE,{extraHeaders:n,body:e,eventHandlers:{onSuccessResponse:function(e){s.call(t,e),o=!0},onErrorResponse:function(e){u.call(t,e)},onTransportError:function(){t.onTransportError()},onRequestTimeout:function(){t.onRequestTimeout()},onDialogError:function(){t.onDialogError()}}})})).catch((function(){u()}))}},{key:"_sendUpdate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O.debug("sendUpdate()");var n=m.cloneArray(e.extraHeaders),r=m.cloneObject(e.eventHandlers),i=e.rtcOfferConstraints||this._rtcOfferConstraints||null,o=e.sdpOffer||!1,s=!1;function u(t){var e=this;if(this._status!==I.STATUS_TERMINATED&&!s)if(this._handleSessionTimersInIncomingResponse(t),o){if(!t.body)return void a.call(this);if(!t.hasHeader("Content-Type")||"application/sdp"!==t.getHeader("Content-Type").toLowerCase())return void a.call(this);var n={originator:"remote",type:"answer",sdp:t.body};O.debug('emit "sdp"'),this.emit("sdp",n);var i=new RTCSessionDescription({type:"answer",sdp:n.sdp});this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return e._connection.setRemoteDescription(i)})).then((function(){r.succeeded&&r.succeeded(t)})).catch((function(t){a.call(e),O.warn('emit "peerconnection:setremotedescriptionfailed" [error:%o]',t),e.emit("peerconnection:setremotedescriptionfailed",t)}))}else r.succeeded&&r.succeeded(t)}function a(t){r.failed&&r.failed(t)}n.push("Contact: ".concat(this._contact)),this._sessionTimers.running&&n.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(this._sessionTimers.refresher?"uac":"uas")),o?(n.push("Content-Type: application/sdp"),this._connectionPromiseQueue=this._connectionPromiseQueue.then((function(){return t._createLocalDescription("offer",i)})).then((function(e){var r={originator:"local",type:"offer",sdp:e=t._mangleOffer(e)};O.debug('emit "sdp"'),t.emit("sdp",r),t.sendRequest(_.UPDATE,{extraHeaders:n,body:e,eventHandlers:{onSuccessResponse:function(e){u.call(t,e),s=!0},onErrorResponse:function(e){a.call(t,e)},onTransportError:function(){t.onTransportError()},onRequestTimeout:function(){t.onRequestTimeout()},onDialogError:function(){t.onDialogError()}}})})).catch((function(){a.call(t)}))):this.sendRequest(_.UPDATE,{extraHeaders:n,eventHandlers:{onSuccessResponse:function(e){u.call(t,e)},onErrorResponse:function(e){a.call(t,e)},onTransportError:function(){t.onTransportError()},onRequestTimeout:function(){t.onRequestTimeout()},onDialogError:function(){t.onDialogError()}}})}},{key:"_acceptAndTerminate",value:function(t,e,n){O.debug("acceptAndTerminate()");var r=[];e&&(n=n||_.REASON_PHRASE[e]||"",r.push("Reason: SIP ;cause=".concat(e,'; text="').concat(n,'"'))),(this._dialog||this._createDialog(t,"UAC"))&&(this.sendRequest(_.ACK),this.sendRequest(_.BYE,{extraHeaders:r})),this._status=I.STATUS_TERMINATED}},{key:"_mangleOffer",value:function(t){if(!this._localHold&&!this._remoteHold)return t;if(t=d.parse(t),this._localHold&&!this._remoteHold){O.debug("mangleOffer() | me on hold, mangling offer");var e,n=i(t.media);try{for(n.s();!(e=n.n()).done;){var r=e.value;-1!==k.indexOf(r.type)&&(r.direction?"sendrecv"===r.direction?r.direction="sendonly":"recvonly"===r.direction&&(r.direction="inactive"):r.direction="sendonly")}}catch(t){n.e(t)}finally{n.f()}}else if(this._localHold&&this._remoteHold){O.debug("mangleOffer() | both on hold, mangling offer");var o,s=i(t.media);try{for(s.s();!(o=s.n()).done;){var u=o.value;-1!==k.indexOf(u.type)&&(u.direction="inactive")}}catch(t){s.e(t)}finally{s.f()}}else if(this._remoteHold){O.debug("mangleOffer() | remote on hold, mangling offer");var a,l=i(t.media);try{for(l.s();!(a=l.n()).done;){var c=a.value;-1!==k.indexOf(c.type)&&(c.direction?"sendrecv"===c.direction?c.direction="recvonly":"recvonly"===c.direction&&(c.direction="inactive"):c.direction="recvonly")}}catch(t){l.e(t)}finally{l.f()}}return d.write(t)}},{key:"_setLocalMediaStatus",value:function(){var t=!0,e=!0;(this._localHold||this._remoteHold)&&(t=!1,e=!1),this._audioMuted&&(t=!1),this._videoMuted&&(e=!1),this._toggleMuteAudio(!t),this._toggleMuteVideo(!e)}},{key:"_handleSessionTimersInIncomingRequest",value:function(t,e){var n;this._sessionTimers.enabled&&(t.session_expires&&t.session_expires>=_.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=t.session_expires,n=t.session_expires_refresher||"uas"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,n="uas"),e.push("Session-Expires: ".concat(this._sessionTimers.currentExpires,";refresher=").concat(n)),this._sessionTimers.refresher="uas"===n,this._runSessionTimer())}},{key:"_handleSessionTimersInIncomingResponse",value:function(t){var e;this._sessionTimers.enabled&&(t.session_expires&&t.session_expires>=_.MIN_SESSION_EXPIRES?(this._sessionTimers.currentExpires=t.session_expires,e=t.session_expires_refresher||"uac"):(this._sessionTimers.currentExpires=this._sessionTimers.defaultExpires,e="uac"),this._sessionTimers.refresher="uac"===e,this._runSessionTimer())}},{key:"_runSessionTimer",value:function(){var t=this,e=this._sessionTimers.currentExpires;this._sessionTimers.running=!0,clearTimeout(this._sessionTimers.timer),this._sessionTimers.refresher?this._sessionTimers.timer=setTimeout((function(){t._status!==I.STATUS_TERMINATED&&t._isReadyToReOffer()&&(O.debug("runSessionTimer() | sending session refresh request"),t._sessionTimers.refreshMethod===_.UPDATE?t._sendUpdate():t._sendReinvite())}),500*e):this._sessionTimers.timer=setTimeout((function(){t._status!==I.STATUS_TERMINATED&&(O.warn("runSessionTimer() | timer expired, terminating the session"),t.terminate({cause:_.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))}),1100*e)}},{key:"_toggleMuteAudio",value:function(t){var e,n=i(this._connection.getSenders().filter((function(t){return t.track&&"audio"===t.track.kind})));try{for(n.s();!(e=n.n()).done;){e.value.track.enabled=!t}}catch(t){n.e(t)}finally{n.f()}}},{key:"_toggleMuteVideo",value:function(t){var e,n=i(this._connection.getSenders().filter((function(t){return t.track&&"video"===t.track.kind})));try{for(n.s();!(e=n.n()).done;){e.value.track.enabled=!t}}catch(t){n.e(t)}finally{n.f()}}},{key:"_newRTCSession",value:function(t,e){O.debug("newRTCSession()"),this._ua.newRTCSession(this,{originator:t,session:this,request:e})}},{key:"_connecting",value:function(t){O.debug("session connecting"),O.debug('emit "connecting"'),this.emit("connecting",{request:t})}},{key:"_progress",value:function(t,e){O.debug("session progress"),O.debug('emit "progress"'),this.emit("progress",{originator:t,response:e||null})}},{key:"_accepted",value:function(t,e){O.debug("session accepted"),this._start_time=new Date,O.debug('emit "accepted"'),this.emit("accepted",{originator:t,response:e||null})}},{key:"_confirmed",value:function(t,e){O.debug("session confirmed"),this._is_confirmed=!0,O.debug('emit "confirmed"'),this.emit("confirmed",{originator:t,ack:e||null})}},{key:"_ended",value:function(t,e,n){O.debug("session ended"),this._end_time=new Date,this._close(),O.debug('emit "ended"'),this.emit("ended",{originator:t,message:e||null,cause:n})}},{key:"_failed",value:function(t,e,n){O.debug("session failed"),O.debug('emit "_failed"'),this.emit("_failed",{originator:t,message:e||null,cause:n}),this._close(),O.debug('emit "failed"'),this.emit("failed",{originator:t,message:e||null,cause:n})}},{key:"_onhold",value:function(t){O.debug("session onhold"),this._setLocalMediaStatus(),O.debug('emit "hold"'),this.emit("hold",{originator:t})}},{key:"_onunhold",value:function(t){O.debug("session onunhold"),this._setLocalMediaStatus(),O.debug('emit "unhold"'),this.emit("unhold",{originator:t})}},{key:"_onmute",value:function(t){var e=t.audio,n=t.video;O.debug("session onmute"),this._setLocalMediaStatus(),O.debug('emit "muted"'),this.emit("muted",{audio:e,video:n})}},{key:"_onunmute",value:function(t){var e=t.audio,n=t.video;O.debug("session onunmute"),this._setLocalMediaStatus(),O.debug('emit "unmuted"'),this.emit("unmuted",{audio:e,video:n})}},{key:"C",get:function(){return I}},{key:"causes",get:function(){return _.causes}},{key:"id",get:function(){return this._id}},{key:"connection",get:function(){return this._connection}},{key:"contact",get:function(){return this._contact}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}},{key:"start_time",get:function(){return this._start_time}},{key:"end_time",get:function(){return this._end_time}},{key:"data",get:function(){return this._data},set:function(t){this._data=t}},{key:"status",get:function(){return this._status}}]),n}(h)},function(t,e,n){"use strict";var r=n(3),i=n(5),o=n(10),s=new r("Socket");e.isSocket=function(t){if(Array.isArray(t))return!1;if(void 0===t)return s.warn("undefined JsSIP.Socket instance"),!1;try{if(!i.isString(t.url))throw s.warn("missing or invalid JsSIP.Socket url property"),new Error("Missing or invalid JsSIP.Socket url property");if(!i.isString(t.via_transport))throw s.warn("missing or invalid JsSIP.Socket via_transport property"),new Error("Missing or invalid JsSIP.Socket via_transport property");if(-1===o.parse(t.sip_uri,"SIP_URI"))throw s.warn("missing or invalid JsSIP.Socket sip_uri property"),new Error("missing or invalid JsSIP.Socket sip_uri property")}catch(t){return!1}try{["connect","disconnect","send"].forEach((function(e){if(!i.isFunction(t[e]))throw s.warn("missing or invalid JsSIP.Socket method: ".concat(e)),new Error("Missing or invalid JsSIP.Socket method: ".concat(e))}))}catch(t){return!1}return!0}},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(4);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),o=s.join("&")}if(o){var u=t.indexOf("#");-1!==u&&(t=t.slice(0,u)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},function(t,e,n){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},function(t,e,n){"use strict";(function(e){var r=n(4);t.exports=function(t,n){n=n||new FormData;var i=[];function o(t){return null===t?"":r.isDate(t)?t.toISOString():r.isArrayBuffer(t)||r.isTypedArray(t)?"function"==typeof Blob?new Blob([t]):e.from(t):t}return function t(e,s){if(r.isPlainObject(e)||r.isArray(e)){if(-1!==i.indexOf(e))throw Error("Circular reference detected in "+s);i.push(e),r.forEach(e,(function(e,i){if(!r.isUndefined(e)){var u,a=s?s+"."+i:i;if(e&&!s&&"object"==typeof e)if(r.endsWith(i,"{}"))e=JSON.stringify(e);else if(r.endsWith(i,"[]")&&(u=r.toArray(e)))return void u.forEach((function(t){!r.isUndefined(t)&&n.append(a,o(t))}));t(e,a)}})),i.pop()}else n.append(s,o(e))}(t),n}}).call(this,n(39).Buffer)},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(75),i=n(76),o=n(77);function s(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=a.prototype:(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);a.TYPED_ARRAY_SUPPORT?(t=e).__proto__=a.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=u(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(a.isBuffer(e)){var n=0|d(e.length);return 0===(t=u(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(c(e),t=u(t,e<0?0:0|d(e)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function _(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=a.from(e,r)),a.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,s=1,u=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,u/=2,a/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var c=-1;for(o=n;o<u;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===a)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(n+a>u&&(n=u-a),o=n;o>=0;o--){for(var f=!0,h=0;h<a;h++)if(l(t,o+h)!==l(e,h)){f=!1;break}if(f)return o}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var u=parseInt(e.substr(2*s,2),16);if(isNaN(u))return s;t[n+s]=u}return s}function b(t,e,n,r){return B(F(e,t.length-n),t,n,r)}function T(t,e,n,r){return B(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function E(t,e,n,r){return T(t,e,n,r)}function w(t,e,n,r){return B(H(e),t,n,r)}function A(t,e,n,r){return B(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,u,a,l=t[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(a=(31&l)<<6|63&o)>127&&(c=a);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(a=(15&l)<<12|(63&o)<<6|63&s)>2047&&(a<55296||a>57343)&&(c=a);break;case 4:o=t[i+1],s=t[i+2],u=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&(a=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&u)>65535&&a<1114112&&(c=a)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=a,e.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,n){return l(null,t,e,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},a.allocUnsafe=function(t){return f(null,t)},a.allocUnsafeSlow=function(t){return f(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=a.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!a.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):_.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,n,r,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),u=Math.min(o,s),l=this.slice(r,i),c=t.slice(e,n),f=0;f<u;++f)if(l[f]!==c[f]){o=l[f],s=c[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},a.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},a.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return T(this,t,e,n);case"latin1":case"binary":return E(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=q(t[o]);return i}function k(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function x(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function U(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||U(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,o){return o||U(t,0,n,8),i.write(t,e,n,r,52,8),n+8}a.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),a.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=a.prototype;else{var i=e-t;n=new a(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},a.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},a.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},a.prototype.readUInt8=function(t,e){return e||x(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||x(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||x(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||x(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||x(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},a.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||x(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return e||x(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){e||x(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(t,e){e||x(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(t,e){return e||x(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||x(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||x(t,4,this.length),i.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||x(t,4,this.length),i.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||x(t,8,this.length),i.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||x(t,8,this.length),i.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},a.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},a.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=0,s=1,u=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+n},a.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var o=n-1,s=1,u=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/s>>0)-u&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},a.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=a.isBuffer(t)?t:F(new a(t,r).toString()),u=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%u]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function q(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(24))},function(t,e,n){"use strict";var r=n(4),i=n(78),o=n(79),s=n(36),u=n(41),a=n(82),l=n(83),c=n(37),f=n(16),h=n(22),d=n(84);t.exports=function(t){return new Promise((function(e,n){var p,_=t.data,v=t.headers,g=t.responseType;function m(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener("abort",p)}r.isFormData(_)&&r.isStandardBrowserEnv()&&delete v["Content-Type"];var y=new XMLHttpRequest;if(t.auth){var b=t.auth.username||"",T=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";v.Authorization="Basic "+btoa(b+":"+T)}var E=u(t.baseURL,t.url);function w(){if(y){var r="getAllResponseHeaders"in y?a(y.getAllResponseHeaders()):null,o={data:g&&"text"!==g&&"json"!==g?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:t,request:y};i((function(t){e(t),m()}),(function(t){n(t),m()}),o),y=null}}if(y.open(t.method.toUpperCase(),s(E,t.params,t.paramsSerializer),!0),y.timeout=t.timeout,"onloadend"in y?y.onloadend=w:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(w)},y.onabort=function(){y&&(n(new f("Request aborted",f.ECONNABORTED,t,y)),y=null)},y.onerror=function(){n(new f("Network Error",f.ERR_NETWORK,t,y,y)),y=null},y.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||c;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new f(e,r.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,t,y)),y=null},r.isStandardBrowserEnv()){var A=(t.withCredentials||l(E))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;A&&(v[t.xsrfHeaderName]=A)}"setRequestHeader"in y&&r.forEach(v,(function(t,e){void 0===_&&"content-type"===e.toLowerCase()?delete v[e]:y.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(y.withCredentials=!!t.withCredentials),g&&"json"!==g&&(y.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&y.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(t){y&&(n(!t||t&&t.type?new h:t),y.abort(),y=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal&&(t.signal.aborted?p():t.signal.addEventListener("abort",p))),_||(_=null);var S=d(E);S&&-1===["http","https","file"].indexOf(S)?n(new f("Unsupported protocol "+S+":",f.ERR_BAD_REQUEST,t)):y.send(_)}))}},function(t,e,n){"use strict";var r=n(80),i=n(81);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e){e=e||{};var n={};function i(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function o(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(t[n],e[n])}function s(t){if(!r.isUndefined(e[t]))return i(void 0,e[t])}function u(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(void 0,e[n])}function a(n){return n in e?i(t[n],e[n]):n in t?i(void 0,t[n]):void 0}var l={url:s,method:s,data:s,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:a};return r.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=l[t]||o,i=e(t);r.isUndefined(i)&&e!==a||(n[t]=i)})),n}},function(t,e){t.exports={version:"0.27.2"}},function(t,e,n){t.exports=n(69)},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c}));var r=n(17),i=n(18),o=n(23),s=n(7),u=n(12),a=n(11);const l="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class c extends r.a{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,n=l?{}:Object(s.c)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=u.d&&!l?e?new u.a(t,e):new u.a(t):new u.a(t,e,n)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||u.b,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Object(a.c)(r,this.supportsBinary,e=>{const n={};if(!u.d&&(r.options&&(n.compress=r.options.compress),this.opts.perMessageDeflate)){("string"==typeof e?t.byteLength(e):e.length)<this.opts.perMessageDeflate.threshold&&(n.compress=!1)}try{u.d?this.ws.send(e):this.ws.send(e,n)}catch(t){}i&&Object(u.c)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=Object(o.a)()),this.supportsBinary||(t.b64=1);const r=Object(i.b)(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}check(){return!!u.a}}}).call(this,n(39).Buffer)},function(t,e,n){const r=n(90).default;t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=c(t);if(e){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=n(9).EventEmitter,h=n(3),d=n(2),p=n(52),_=n(33),v=n(62),g=n(63),m=n(21),y=n(64),b=n(5),T=n(14),E=n(15),w=n(65),A=n(13),S=n(66),C=n(67),R=new h("UA"),O={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};function I(t){this.emit("connecting",t)}function k(t){this._status!==O.STATUS_USER_CLOSED&&(this._status=O.STATUS_READY,this._error=null,this.emit("connected",t),this._dynConfiguration.register&&this._registrator.register())}function x(t){for(var e=0,n=["nict","ict","nist","ist"];e<n.length;e++){var r=n[e];for(var i in this._transactions[r])Object.prototype.hasOwnProperty.call(this._transactions[r],i)&&this._transactions[r][i].onTransportError()}this.emit("disconnected",t),this._registrator.onTransportClosed(),this._status!==O.STATUS_USER_CLOSED&&(this._status=O.STATUS_NOT_READY,this._error=O.NETWORK_ERROR)}function N(t){var e=t.transport,n=t.message;if((n=w.parseMessage(n,this))&&!(this._status===O.STATUS_USER_CLOSED&&n instanceof A.IncomingRequest)&&S(n,this,e))if(n instanceof A.IncomingRequest)n.transport=e,this.receiveRequest(n);else if(n instanceof A.IncomingResponse){var r;switch(n.method){case d.INVITE:(r=this._transactions.ict[n.via_branch])&&r.receiveResponse(n);break;case d.ACK:break;default:(r=this._transactions.nict[n.via_branch])&&r.receiveResponse(n)}}}t.exports=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,t);var e=u(n);function n(t){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),R.debug("new() [configuration:%o]",t),(r=e.call(this))._cache={credentials:{}},r._configuration=Object.assign({},C.settings),r._dynConfiguration={},r._dialogs={},r._applicants={},r._sessions={},r._transport=null,r._contact=null,r._status=O.STATUS_INIT,r._error=null,r._transactions={nist:{},nict:{},ist:{},ict:{}},r._data={},r._closeTimer=null,void 0===t)throw new TypeError("Not enough arguments");try{r._loadConfig(t)}catch(t){throw r._status=O.STATUS_NOT_READY,r._error=O.CONFIGURATION_ERROR,t}return r._registrator=new p(l(r)),r}return o(n,null,[{key:"C",get:function(){return O}}]),o(n,[{key:"start",value:function(){R.debug("start()"),this._status===O.STATUS_INIT?this._transport.connect():this._status===O.STATUS_USER_CLOSED?(R.debug("restarting UA"),null!==this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null,this._transport.disconnect()),this._status=O.STATUS_INIT,this._transport.connect()):this._status===O.STATUS_READY?R.debug("UA is in READY status, not restarted"):R.debug("ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this._dynConfiguration.register=this._configuration.register}},{key:"register",value:function(){R.debug("register()"),this._dynConfiguration.register=!0,this._registrator.register()}},{key:"unregister",value:function(t){R.debug("unregister()"),this._dynConfiguration.register=!1,this._registrator.unregister(t)}},{key:"registrator",value:function(){return this._registrator}},{key:"isRegistered",value:function(){return this._registrator.registered}},{key:"isConnected",value:function(){return this._transport.isConnected()}},{key:"call",value:function(t,e){R.debug("call()");var n=new _(this);return n.connect(t,e),n}},{key:"sendMessage",value:function(t,e,n){R.debug("sendMessage()");var r=new v(this);return r.send(t,e,n),r}},{key:"sendOptions",value:function(t,e,n){R.debug("sendOptions()");var r=new g(this);return r.send(t,e,n),r}},{key:"terminateSessions",value:function(t){for(var e in R.debug("terminateSessions()"),this._sessions)this._sessions[e].isEnded()||this._sessions[e].terminate(t)}},{key:"stop",value:function(){var t=this;if(R.debug("stop()"),this._dynConfiguration={},this._status!==O.STATUS_USER_CLOSED){this._registrator.close();var e=Object.keys(this._sessions).length;for(var n in this._sessions)if(Object.prototype.hasOwnProperty.call(this._sessions,n)){R.debug("closing session ".concat(n));try{this._sessions[n].terminate()}catch(t){}}for(var r in this._applicants)if(Object.prototype.hasOwnProperty.call(this._applicants,r))try{this._applicants[r].close()}catch(t){}this._status=O.STATUS_USER_CLOSED,0===Object.keys(this._transactions.nict).length+Object.keys(this._transactions.nist).length+Object.keys(this._transactions.ict).length+Object.keys(this._transactions.ist).length&&0===e?this._transport.disconnect():this._closeTimer=setTimeout((function(){t._closeTimer=null,t._transport.disconnect()}),2e3)}else R.debug("UA already closed")}},{key:"normalizeTarget",value:function(t){return b.normalizeTarget(t,this._configuration.hostport_params)}},{key:"get",value:function(t){switch(t){case"authorization_user":return this._configuration.authorization_user;case"realm":return this._configuration.realm;case"ha1":return this._configuration.ha1;case"authorization_jwt":return this._configuration.authorization_jwt;default:return void R.warn('get() | cannot get "%s" parameter in runtime',t)}}},{key:"set",value:function(t,e){switch(t){case"authorization_user":this._configuration.authorization_user=String(e);break;case"password":this._configuration.password=String(e);break;case"realm":this._configuration.realm=String(e);break;case"ha1":this._configuration.ha1=String(e),this._configuration.password=null;break;case"authorization_jwt":this._configuration.authorization_jwt=String(e);break;case"display_name":this._configuration.display_name=e;break;default:return R.warn('set() | cannot set "%s" parameter in runtime',t),!1}return!0}},{key:"newTransaction",value:function(t){this._transactions[t.type][t.id]=t,this.emit("newTransaction",{transaction:t})}},{key:"destroyTransaction",value:function(t){delete this._transactions[t.type][t.id],this.emit("transactionDestroyed",{transaction:t})}},{key:"newDialog",value:function(t){this._dialogs[t.id]=t}},{key:"destroyDialog",value:function(t){delete this._dialogs[t.id]}},{key:"newMessage",value:function(t,e){this._applicants[t]=t,this.emit("newMessage",e)}},{key:"newOptions",value:function(t,e){this._applicants[t]=t,this.emit("newOptions",e)}},{key:"destroyMessage",value:function(t){delete this._applicants[t]}},{key:"newRTCSession",value:function(t,e){this._sessions[t.id]=t,this.emit("newRTCSession",e)}},{key:"destroyRTCSession",value:function(t){delete this._sessions[t.id]}},{key:"registered",value:function(t){this.emit("registered",t)}},{key:"unregistered",value:function(t){this.emit("unregistered",t)}},{key:"registrationFailed",value:function(t){this.emit("registrationFailed",t)}},{key:"receiveRequest",value:function(t){var e=t.method;if(t.ruri.user!==this._configuration.uri.user&&t.ruri.user!==this._contact.uri.user)return R.debug("Request-URI does not point to us"),void(t.method!==d.ACK&&t.reply_sl(404));if(t.ruri.scheme!==d.SIPS){if(!m.checkTransaction(this,t)){if(e===d.INVITE?new m.InviteServerTransaction(this,this._transport,t):e!==d.ACK&&e!==d.CANCEL&&new m.NonInviteServerTransaction(this,this._transport,t),e===d.OPTIONS){if(0===this.listeners("newOptions").length)return void t.reply(200);new g(this).init_incoming(t)}else if(e===d.MESSAGE){if(0===this.listeners("newMessage").length)return void t.reply(405);new v(this).init_incoming(t)}else if(e===d.INVITE&&!t.to_tag&&0===this.listeners("newRTCSession").length)return void t.reply(405);var n,r;if(t.to_tag)(n=this._findDialog(t.call_id,t.from_tag,t.to_tag))?n.receiveRequest(t):e===d.NOTIFY?(r=this._findSession(t))?r.receiveRequest(t):(R.debug("received NOTIFY request for a non existent subscription"),t.reply(481,"Subscription does not exist")):e!==d.ACK&&t.reply(481);else switch(e){case d.INVITE:if(window.RTCPeerConnection)if(t.hasHeader("replaces")){var i=t.replaces;(n=this._findDialog(i.call_id,i.from_tag,i.to_tag))?(r=n.owner).isEnded()?t.reply(603):r.receiveRequest(t):t.reply(481)}else(r=new _(this)).init_incoming(t);else R.warn("INVITE received but WebRTC is not supported"),t.reply(488);break;case d.BYE:t.reply(481);break;case d.CANCEL:(r=this._findSession(t))?r.receiveRequest(t):R.debug("received CANCEL request for a non existent session");break;case d.ACK:break;case d.NOTIFY:this.emit("sipEvent",{event:t.event,request:t}),t.reply(200);break;default:t.reply(405)}}}else t.reply_sl(416)}},{key:"_findSession",value:function(t){var e=t.call_id,n=t.from_tag,r=t.to_tag,i=e+n,o=this._sessions[i],s=e+r,u=this._sessions[s];return o||(u||null)}},{key:"_findDialog",value:function(t,e,n){var r=t+e+n,i=this._dialogs[r];return i||(r=t+n+e,(i=this._dialogs[r])||null)}},{key:"_loadConfig",value:function(t){try{C.load(this._configuration,t)}catch(t){throw t}0===this._configuration.display_name&&(this._configuration.display_name="0"),this._configuration.instance_id||(this._configuration.instance_id=b.newUUID()),this._configuration.jssip_id=b.createRandomToken(5);var e=this._configuration.uri.clone();e.user=null,this._configuration.hostport_params=e.toString().replace(/^sip:/i,"");try{this._transport=new y(this._configuration.sockets,{max_interval:this._configuration.connection_recovery_max_interval,min_interval:this._configuration.connection_recovery_min_interval}),this._transport.onconnecting=I.bind(this),this._transport.onconnect=k.bind(this),this._transport.ondisconnect=x.bind(this),this._transport.ondata=N.bind(this)}catch(t){throw R.warn(t),new T.ConfigurationError("sockets",this._configuration.sockets)}if(delete this._configuration.sockets,this._configuration.authorization_user||(this._configuration.authorization_user=this._configuration.uri.user),!this._configuration.registrar_server){var n=this._configuration.uri.clone();n.user=null,n.clearParams(),n.clearHeaders(),this._configuration.registrar_server=n}this._configuration.no_answer_timeout*=1e3,this._configuration.contact_uri?this._configuration.via_host=this._configuration.contact_uri.host:this._configuration.contact_uri=new E("sip",b.createRandomToken(8),this._configuration.via_host,null,{transport:"ws"}),this._contact={pub_gruu:null,temp_gruu:null,uri:this._configuration.contact_uri,toString:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.anonymous||null,n=t.outbound||null,r="<";return r+=e?this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":this.pub_gruu||this.uri.toString(),!n||(e?this.temp_gruu:this.pub_gruu)||(r+=";ob"),r+=">"}};var r=["authorization_user","password","realm","ha1","authorization_jwt","display_name","register"];for(var i in this._configuration)Object.prototype.hasOwnProperty.call(this._configuration,i)&&(-1!==r.indexOf(i)?Object.defineProperty(this._configuration,i,{writable:!0,configurable:!1}):Object.defineProperty(this._configuration,i,{writable:!1,configurable:!1}));for(var o in R.debug("configuration parameters after validation:"),this._configuration)if(Object.prototype.hasOwnProperty.call(C.settings,o))switch(o){case"uri":case"registrar_server":R.debug("- ".concat(o,": ").concat(this._configuration[o]));break;case"password":case"ha1":case"authorization_jwt":R.debug("- ".concat(o,": NOT SHOWN"));break;default:R.debug("- ".concat(o,": ").concat(JSON.stringify(this._configuration[o])))}}},{key:"C",get:function(){return O}},{key:"status",get:function(){return this._status}},{key:"contact",get:function(){return this._contact}},{key:"configuration",get:function(){return this._configuration}},{key:"transport",get:function(){return this._transport}}]),n}(f)},function(t,e,n){t.exports=function(t){function e(t){let n,i,o,s=null;function u(...t){if(!u.enabled)return;const r=u,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,i)=>{if("%%"===n)return"%";s++;const o=e.formatters[i];if("function"==typeof o){const e=t[s];n=o.call(r,e),t.splice(s,1),s--}return n}),e.formatArgs.call(r,t),(r.log||e.log).apply(r,t)}return u.namespace=t,u.useColors=e.useColors(),u.color=e.selectColor(t),u.extend=r,u.destroy=e.destroy,Object.defineProperty(u,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o),set:t=>{s=t}}),"function"==typeof e.init&&e.init(u),u}function r(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(i),...e.skips.map(i).map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(51),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(n=>{e[n]=t[n]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},function(t,e){var n=1e3,r=6e4,i=36e5,o=24*i;function s(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,e){e=e||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===u&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return s(t,e,o,"day");if(e>=i)return s(t,e,i,"hour");if(e>=r)return s(t,e,r,"minute");if(e>=n)return s(t,e,n,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=i)return Math.round(t/i)+"h";if(e>=r)return Math.round(t/r)+"m";if(e>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(3),o=n(5),s=n(2),u=n(13),a=n(20),l=new i("Registrator");t.exports=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._reg_id=1,this._ua=e,this._transport=n,this._registrar=e.configuration.registrar_server,this._expires=e.configuration.register_expires,this._call_id=o.createRandomToken(22),this._cseq=0,this._to_uri=e.configuration.uri,this._registrationTimer=null,this._registering=!1,this._registered=!1,this._contact=this._ua.contact.toString(),this._contact+=";+sip.ice",this._extraHeaders=[],this._extraContactParams="",this._sipInstance='"<urn:uuid:'.concat(this._ua.configuration.instance_id,'>"'),this._contact+=";reg-id=".concat(this._reg_id),this._contact+=";+sip.instance=".concat(this._sipInstance)}var e,n,i;return e=t,(n=[{key:"setExtraHeaders",value:function(t){Array.isArray(t)||(t=[]),this._extraHeaders=t.slice()}},{key:"setExtraContactParams",value:function(t){for(var e in t instanceof Object||(t={}),this._extraContactParams="",t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e];this._extraContactParams+=";".concat(e),n&&(this._extraContactParams+="=".concat(n))}}},{key:"register",value:function(){var t=this;if(this._registering)l.debug("Register request in progress...");else{var e=this._extraHeaders.slice();e.push("Contact: ".concat(this._contact,";expires=").concat(this._expires).concat(this._extraContactParams)),e.push("Expires: ".concat(this._expires));var n=new u.OutgoingRequest(s.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},e),r=new a(this._ua,n,{onRequestTimeout:function(){t._registrationFailure(null,s.causes.REQUEST_TIMEOUT)},onTransportError:function(){t._registrationFailure(null,s.causes.CONNECTION_ERROR)},onAuthenticated:function(){t._cseq+=1},onReceiveResponse:function(e){if(e.cseq===t._cseq)switch(null!==t._registrationTimer&&(clearTimeout(t._registrationTimer),t._registrationTimer=null),!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):if(t._registering=!1,!e.hasHeader("Contact")){l.debug("no Contact header in response to REGISTER, response ignored");break}var n=e.headers.Contact.reduce((function(t,e){return t.concat(e.parsed)}),[]),r=n.find((function(e){return t._sipInstance===e.getParam("+sip.instance")&&t._reg_id===parseInt(e.getParam("reg-id"))}));if(r||(r=n.find((function(e){return e.uri.user===t._ua.contact.uri.user}))),!r){l.debug("no Contact header pointing to us, response ignored");break}var i=r.getParam("expires");!i&&e.hasHeader("expires")&&(i=e.getHeader("expires")),i||(i=t._expires),(i=Number(i))<10&&(i=10);var u=i>64?1e3*i/2+Math.floor(1e3*(i/2-32)*Math.random()):1e3*i-5e3;t._registrationTimer=setTimeout((function(){t._registrationTimer=null,0===t._ua.listeners("registrationExpiring").length?t.register():t._ua.emit("registrationExpiring")}),u),r.hasParam("temp-gruu")&&(t._ua.contact.temp_gruu=r.getParam("temp-gruu").replace(/"/g,"")),r.hasParam("pub-gruu")&&(t._ua.contact.pub_gruu=r.getParam("pub-gruu").replace(/"/g,"")),t._registered||(t._registered=!0,t._ua.registered({response:e}));break;case/^423$/.test(e.status_code):e.hasHeader("min-expires")?(t._expires=Number(e.getHeader("min-expires")),t._expires<10&&(t._expires=10),t.register()):(l.debug("423 response received for REGISTER without Min-Expires"),t._registrationFailure(e,s.causes.SIP_FAILURE_CODE));break;default:var a=o.sipErrorCause(e.status_code);t._registrationFailure(e,a)}}});this._registering=!0,r.send()}}},{key:"unregister",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._registered){this._registered=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null);var n=this._extraHeaders.slice();e.all?n.push("Contact: *".concat(this._extraContactParams)):n.push("Contact: ".concat(this._contact,";expires=0").concat(this._extraContactParams)),n.push("Expires: 0");var r=new u.OutgoingRequest(s.REGISTER,this._registrar,this._ua,{to_uri:this._to_uri,call_id:this._call_id,cseq:this._cseq+=1},n),i=new a(this._ua,r,{onRequestTimeout:function(){t._unregistered(null,s.causes.REQUEST_TIMEOUT)},onTransportError:function(){t._unregistered(null,s.causes.CONNECTION_ERROR)},onAuthenticated:function(){t._cseq+=1},onReceiveResponse:function(e){switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):t._unregistered(e);break;default:var n=o.sipErrorCause(e.status_code);t._unregistered(e,n)}}});i.send()}else l.debug("already unregistered")}},{key:"close",value:function(){this._registered&&this.unregister()}},{key:"onTransportClosed",value:function(){this._registering=!1,null!==this._registrationTimer&&(clearTimeout(this._registrationTimer),this._registrationTimer=null),this._registered&&(this._registered=!1,this._ua.unregistered({}))}},{key:"_registrationFailure",value:function(t,e){this._registering=!1,this._ua.registrationFailed({response:t||null,cause:e}),this._registered&&(this._registered=!1,this._ua.unregistered({response:t||null,cause:e}))}},{key:"_unregistered",value:function(t,e){this._registering=!1,this._registered=!1,this._ua.unregistered({response:t||null,cause:e||null})}},{key:"registered",get:function(){return this._registered}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){var r=function(t){return String(Number(t))===t?Number(t):t},i=function(t,e,n){var i=t.name&&t.names;t.push&&!e[t.push]?e[t.push]=[]:i&&!e[t.name]&&(e[t.name]={});var o=t.push?{}:i?e[t.name]:e;!function(t,e,n,i){if(i&&!n)e[i]=r(t[1]);else for(var o=0;o<n.length;o+=1)null!=t[o+1]&&(e[n[o]]=r(t[o+1]))}(n.match(t.reg),o,t.names,t.name),t.push&&e[t.push].push(o)},o=n(31),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(t){var e={},n=[],r=e;return t.split(/(\r\n|\r|\n)/).filter(s).forEach((function(t){var e=t[0],s=t.slice(2);"m"===e&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var u=0;u<(o[e]||[]).length;u+=1){var a=o[e][u];if(a.reg.test(s))return i(a,r,s)}})),e.media=n,e};var u=function(t,e){var n=e.split(/=(.+)/,2);return 2===n.length?t[n[0]]=r(n[1]):1===n.length&&e.length>1&&(t[n[0]]=void 0),t};e.parseParams=function(t){return t.split(/;\s?/).reduce(u,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(t){return t.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(t){for(var e=[],n=t.split(" ").map(r),i=0;i<n.length;i+=3)e.push({component:n[i],ip:n[i+1],port:n[i+2]});return e},e.parseImageAttributes=function(t){return t.split(" ").map((function(t){return t.substring(1,t.length-1).split(",").reduce(u,{})}))},e.parseSimulcastStreamList=function(t){return t.split(";").map((function(t){return t.split(",").map((function(t){var e,n=!1;return"~"!==t[0]?e=r(t):(e=r(t.substring(1,t.length)),n=!0),{scid:e,paused:n}}))}))}},function(t,e,n){var r=n(31),i=/%[sdv%]/g,o=function(t){var e=1,n=arguments,r=n.length;return t.replace(i,(function(t){if(e>=r)return t;var i=n[e];switch(e+=1,t){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},s=function(t,e,n){var r=[t+"="+(e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format)];if(e.names)for(var i=0;i<e.names.length;i+=1){var s=e.names[i];e.name?r.push(n[e.name][s]):r.push(n[e.names[i]])}else r.push(n[e.name]);return o.apply(null,r)},u=["v","o","s","i","u","e","p","c","b","t","r","z","a"],a=["i","c","b","a"];t.exports=function(t,e){e=e||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(t){null==t.payloads&&(t.payloads="")}));var n=e.outerOrder||u,i=e.innerOrder||a,o=[];return n.forEach((function(e){r[e].forEach((function(n){n.name in t&&null!=t[n.name]?o.push(s(e,n,t)):n.push in t&&null!=t[n.push]&&t[n.push].forEach((function(t){o.push(s(e,n,t))}))}))})),t.media.forEach((function(t){o.push(s("m",r.m[0],t)),i.forEach((function(e){r[e].forEach((function(n){n.name in t&&null!=t[n.name]?o.push(s(e,n,t)):n.push in t&&null!=t[n.push]&&t[n.push].forEach((function(t){o.push(s(e,n,t))}))}))}))})),o.join("\r\n")+"\r\n"}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(3),o=n(5),s=new i("DigestAuthentication");t.exports=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._credentials=e,this._cnonce=null,this._nc=0,this._ncHex="00000000",this._algorithm=null,this._realm=null,this._nonce=null,this._opaque=null,this._stale=null,this._qop=null,this._method=null,this._uri=null,this._ha1=null,this._response=null}var e,n,i;return e=t,(n=[{key:"get",value:function(t){switch(t){case"realm":return this._realm;case"ha1":return this._ha1;default:return void s.warn('get() | cannot get "%s" parameter',t)}}},{key:"authenticate",value:function(t,e){var n=t.method,r=t.ruri,i=t.body,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._algorithm=e.algorithm,this._realm=e.realm,this._nonce=e.nonce,this._opaque=e.opaque,this._stale=e.stale,this._algorithm){if("MD5"!==this._algorithm)return s.warn('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this._algorithm="MD5";if(!this._nonce)return s.warn("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this._realm)return s.warn("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this._credentials.password){if(!this._credentials.ha1)return s.warn("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this._credentials.realm!==this._realm)return s.warn('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this._credentials.realm,this._realm),!1}if(e.qop)if(e.qop.indexOf("auth-int")>-1)this._qop="auth-int";else{if(!(e.qop.indexOf("auth")>-1))return s.warn('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this._qop="auth"}else this._qop=null;this._method=n,this._uri=r,this._cnonce=u||o.createRandomToken(12),this._nc+=1;var a,l,c=Number(this._nc).toString(16);return this._ncHex="00000000".substr(0,8-c.length)+c,4294967296===this._nc&&(this._nc=1,this._ncHex="00000001"),this._credentials.password?this._ha1=o.calculateMD5("".concat(this._credentials.username,":").concat(this._realm,":").concat(this._credentials.password)):this._ha1=this._credentials.ha1,"auth"===this._qop?(a="".concat(this._method,":").concat(this._uri),l=o.calculateMD5(a),s.debug('authenticate() | using qop=auth [a2:"%s"]',a),this._response=o.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth:").concat(l))):"auth-int"===this._qop?(a="".concat(this._method,":").concat(this._uri,":").concat(o.calculateMD5(i||"")),l=o.calculateMD5(a),s.debug('authenticate() | using qop=auth-int [a2:"%s"]',a),this._response=o.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(this._ncHex,":").concat(this._cnonce,":auth-int:").concat(l))):null===this._qop&&(a="".concat(this._method,":").concat(this._uri),l=o.calculateMD5(a),s.debug('authenticate() | using qop=null [a2:"%s"]',a),this._response=o.calculateMD5("".concat(this._ha1,":").concat(this._nonce,":").concat(l))),s.debug("authenticate() | response generated"),!0}},{key:"toString",value:function(){var t=[];if(!this._response)throw new Error("response field does not exist, cannot generate Authorization header");return t.push("algorithm=".concat(this._algorithm)),t.push('username="'.concat(this._credentials.username,'"')),t.push('realm="'.concat(this._realm,'"')),t.push('nonce="'.concat(this._nonce,'"')),t.push('uri="'.concat(this._uri,'"')),t.push('response="'.concat(this._response,'"')),this._opaque&&t.push('opaque="'.concat(this._opaque,'"')),this._qop&&(t.push("qop=".concat(this._qop)),t.push('cnonce="'.concat(this._cnonce,'"')),t.push("nc=".concat(this._ncHex))),"Digest ".concat(t.join(", "))}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var s=n(3),u=n(13),a=n(2),l=n(21),c=n(57),f=n(5),h=new s("Dialog"),d={STATUS_EARLY:1,STATUS_CONFIRMED:2};t.exports=function(){function t(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.STATUS_CONFIRMED;if(r(this,t),this._owner=e,this._ua=e._ua,this._uac_pending_reply=!1,this._uas_pending_reply=!1,!n.hasHeader("contact"))return{error:"unable to create a Dialog without Contact header field"};n instanceof u.IncomingResponse&&(o=n.status_code<200?d.STATUS_EARLY:d.STATUS_CONFIRMED);var s=n.parseHeader("contact");"UAS"===i?(this._id={call_id:n.call_id,local_tag:n.to_tag,remote_tag:n.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=o,this._remote_seqnum=n.cseq,this._local_uri=n.parseHeader("to").uri,this._remote_uri=n.parseHeader("from").uri,this._remote_target=s.uri,this._route_set=n.getHeaders("record-route"),this._ack_seqnum=this._remote_seqnum):"UAC"===i&&(this._id={call_id:n.call_id,local_tag:n.from_tag,remote_tag:n.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this._state=o,this._local_seqnum=n.cseq,this._local_uri=n.parseHeader("from").uri,this._remote_uri=n.parseHeader("to").uri,this._remote_target=s.uri,this._route_set=n.getHeaders("record-route").reverse(),this._ack_seqnum=null),this._ua.newDialog(this),h.debug("new ".concat(i," dialog created with status ").concat(this._state===d.STATUS_EARLY?"EARLY":"CONFIRMED"))}return o(t,null,[{key:"C",get:function(){return d}}]),o(t,[{key:"update",value:function(t,e){this._state=d.STATUS_CONFIRMED,h.debug("dialog ".concat(this._id.toString(),"  changed to CONFIRMED state")),"UAC"===e&&(this._route_set=t.getHeaders("record-route").reverse())}},{key:"terminate",value:function(){h.debug("dialog ".concat(this._id.toString()," deleted")),this._ua.destroyDialog(this)}},{key:"sendRequest",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=f.cloneArray(n.extraHeaders),i=f.cloneObject(n.eventHandlers),o=n.body||null,s=this._createRequest(t,r,o);i.onAuthenticated=function(){e._local_seqnum+=1};var u=new c(this,s,i);return u.send(),s}},{key:"receiveRequest",value:function(t){this._checkInDialogRequest(t)&&(t.method===a.ACK&&null!==this._ack_seqnum?this._ack_seqnum=null:t.method===a.INVITE&&(this._ack_seqnum=t.cseq),this._owner.receiveRequest(t))}},{key:"_createRequest",value:function(t,e,n){e=f.cloneArray(e),this._local_seqnum||(this._local_seqnum=Math.floor(1e4*Math.random()));var r=t===a.CANCEL||t===a.ACK?this._local_seqnum:this._local_seqnum+=1;return new u.OutgoingRequest(t,this._remote_target,this._ua,{cseq:r,call_id:this._id.call_id,from_uri:this._local_uri,from_tag:this._id.local_tag,to_uri:this._remote_uri,to_tag:this._id.remote_tag,route_set:this._route_set},e,n)}},{key:"_checkInDialogRequest",value:function(t){var e=this;if(this._remote_seqnum)if(t.cseq<this._remote_seqnum){if(t.method!==a.ACK)return t.reply(500),!1;if(null===this._ack_seqnum||t.cseq!==this._ack_seqnum)return!1}else t.cseq>this._remote_seqnum&&(this._remote_seqnum=t.cseq);else this._remote_seqnum=t.cseq;if(t.method===a.INVITE||t.method===a.UPDATE&&t.body){if(!0===this._uac_pending_reply)t.reply(491);else{if(!0===this._uas_pending_reply){var n=1+(10*Math.random()|0);return t.reply(500,null,["Retry-After:".concat(n)]),!1}this._uas_pending_reply=!0;t.server_transaction.on("stateChanged",(function n(){t.server_transaction.state!==l.C.STATUS_ACCEPTED&&t.server_transaction.state!==l.C.STATUS_COMPLETED&&t.server_transaction.state!==l.C.STATUS_TERMINATED||(t.server_transaction.removeListener("stateChanged",n),e._uas_pending_reply=!1)}))}t.hasHeader("contact")&&t.server_transaction.on("stateChanged",(function(){t.server_transaction.state===l.C.STATUS_ACCEPTED&&(e._remote_target=t.parseHeader("contact").uri)}))}else t.method===a.NOTIFY&&t.hasHeader("contact")&&t.server_transaction.on("stateChanged",(function(){t.server_transaction.state===l.C.STATUS_COMPLETED&&(e._remote_target=t.parseHeader("contact").uri)}));return!0}},{key:"id",get:function(){return this._id}},{key:"local_seqnum",get:function(){return this._local_seqnum},set:function(t){this._local_seqnum=t}},{key:"owner",get:function(){return this._owner}},{key:"uac_pending_reply",get:function(){return this._uac_pending_reply},set:function(t){this._uac_pending_reply=t}},{key:"uas_pending_reply",get:function(){return this._uas_pending_reply}}]),t}()},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(2),o=n(21),s=n(33),u=n(20),a={onRequestTimeout:function(){},onTransportError:function(){},onSuccessResponse:function(){},onErrorResponse:function(){},onAuthenticated:function(){},onDialogError:function(){}};t.exports=function(){function t(e,n,r){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dialog=e,this._ua=e._ua,this._request=n,this._eventHandlers=r,this._reattempt=!1,this._reattemptTimer=null,a)Object.prototype.hasOwnProperty.call(a,i)&&(this._eventHandlers[i]||(this._eventHandlers[i]=a[i]))}var e,n,l;return e=t,(n=[{key:"send",value:function(){var t=this,e=new u(this._ua,this._request,{onRequestTimeout:function(){t._eventHandlers.onRequestTimeout()},onTransportError:function(){t._eventHandlers.onTransportError()},onAuthenticated:function(e){t._eventHandlers.onAuthenticated(e)},onReceiveResponse:function(e){t._receiveResponse(e)}});e.send(),(this._request.method===i.INVITE||this._request.method===i.UPDATE&&this._request.body)&&e.clientTransaction.state!==o.C.STATUS_TERMINATED&&(this._dialog.uac_pending_reply=!0,e.clientTransaction.on("stateChanged",(function n(){e.clientTransaction.state!==o.C.STATUS_ACCEPTED&&e.clientTransaction.state!==o.C.STATUS_COMPLETED&&e.clientTransaction.state!==o.C.STATUS_TERMINATED||(e.clientTransaction.removeListener("stateChanged",n),t._dialog.uac_pending_reply=!1)})))}},{key:"_receiveResponse",value:function(t){var e=this;408===t.status_code||481===t.status_code?this._eventHandlers.onDialogError(t):t.method===i.INVITE&&491===t.status_code?this._reattempt?t.status_code>=200&&t.status_code<300?this._eventHandlers.onSuccessResponse(t):t.status_code>=300&&this._eventHandlers.onErrorResponse(t):(this._request.cseq=this._dialog.local_seqnum+=1,this._reattemptTimer=setTimeout((function(){e._dialog.owner.status!==s.C.STATUS_TERMINATED&&(e._reattempt=!0,e._request_sender.send())}),1e3)):t.status_code>=200&&t.status_code<300?this._eventHandlers.onSuccessResponse(t):t.status_code>=300&&this._eventHandlers.onErrorResponse(t)}},{key:"request",get:function(){return this._request}}])&&r(e.prototype,n),l&&r(e,l),t}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=n(9).EventEmitter,c=n(3),f=n(2),h=n(14),d=n(5),p=new c("RTCSession:DTMF"),_={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};t.exports=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(a,t);var e,n,r,u=s(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=u.call(this))._session=t,e._direction=null,e._tone=null,e._duration=null,e._request=null,e}return e=a,(n=[{key:"send",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===t)throw new TypeError("Not enough arguments");if(this._direction="outgoing",this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new h.InvalidStateError(this._session.status);var r=d.cloneArray(n.extraHeaders);if(this.eventHandlers=d.cloneObject(n.eventHandlers),"string"==typeof t)t=t.toUpperCase();else{if("number"!=typeof t)throw new TypeError("Invalid tone: ".concat(t));t=t.toString()}if(!t.match(/^[0-9A-DR#*]$/))throw new TypeError("Invalid tone: ".concat(t));this._tone=t,this._duration=n.duration,r.push("Content-Type: application/dtmf-relay");var i="Signal=".concat(this._tone,"\r\n");i+="Duration=".concat(this._duration),this._session.newDTMF({originator:"local",dtmf:this,request:this._request}),this._session.sendRequest(f.INFO,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(t){e.emit("succeeded",{originator:"remote",response:t})},onErrorResponse:function(t){e.eventHandlers.onFailed&&e.eventHandlers.onFailed(),e.emit("failed",{originator:"remote",response:t})},onRequestTimeout:function(){e._session.onRequestTimeout()},onTransportError:function(){e._session.onTransportError()},onDialogError:function(){e._session.onDialogError()}},body:i})}},{key:"init_incoming",value:function(t){var e=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,n=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;if(this._direction="incoming",this._request=t,t.reply(200),t.body){var r=t.body.split("\n");r.length>=1&&e.test(r[0])&&(this._tone=r[0].replace(e,"$2")),r.length>=2&&n.test(r[1])&&(this._duration=parseInt(r[1].replace(n,"$2"),10))}this._duration||(this._duration=_.DEFAULT_DURATION),this._tone?this._session.newDTMF({originator:"remote",dtmf:this,request:t}):p.debug("invalid INFO DTMF received, discarded")}},{key:"tone",get:function(){return this._tone}},{key:"duration",get:function(){return this._duration}}])&&i(e.prototype,n),r&&i(e,r),a}(l),t.exports.C=_},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=n(9).EventEmitter,c=n(2),f=n(14),h=n(5);t.exports=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(a,t);var e,n,r,u=s(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=u.call(this))._session=t,e._direction=null,e._contentType=null,e._body=null,e}return e=a,(n=[{key:"send",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._direction="outgoing",void 0===t)throw new TypeError("Not enough arguments");if(this._session.status!==this._session.C.STATUS_CONFIRMED&&this._session.status!==this._session.C.STATUS_WAITING_FOR_ACK)throw new f.InvalidStateError(this._session.status);this._contentType=t,this._body=e;var i=h.cloneArray(r.extraHeaders);i.push("Content-Type: ".concat(t)),this._session.newInfo({originator:"local",info:this,request:this.request}),this._session.sendRequest(c.INFO,{extraHeaders:i,eventHandlers:{onSuccessResponse:function(t){n.emit("succeeded",{originator:"remote",response:t})},onErrorResponse:function(t){n.emit("failed",{originator:"remote",response:t})},onTransportError:function(){n._session.onTransportError()},onRequestTimeout:function(){n._session.onRequestTimeout()},onDialogError:function(){n._session.onDialogError()}},body:e})}},{key:"init_incoming",value:function(t){this._direction="incoming",this.request=t,t.reply(200),this._contentType=t.hasHeader("Content-Type")?t.getHeader("Content-Type").toLowerCase():void 0,this._body=t.body,this._session.newInfo({originator:"remote",info:this,request:t})}},{key:"contentType",get:function(){return this._contentType}},{key:"body",get:function(){return this._body}}])&&i(e.prototype,n),r&&i(e,r),a}(l)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(3),o=n(2),s=new i("RTCSession:ReferNotifier"),u="refer",a="message/sipfrag;version=2.0",l=300;t.exports=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._session=e,this._id=n,this._expires=r||l,this._active=!0,this.notify(100)}var e,n,i;return e=t,(n=[{key:"notify",value:function(t,e){var n;s.debug("notify()"),!1!==this._active&&(e=e||o.REASON_PHRASE[t]||"",n=t>=200?"terminated;reason=noresource":"active;expires=".concat(this._expires),this._session.sendRequest(o.NOTIFY,{extraHeaders:["Event: ".concat(u,";id=").concat(this._id),"Subscription-State: ".concat(n),"Content-Type: ".concat(a)],body:"SIP/2.0 ".concat(t," ").concat(e),eventHandlers:{onErrorResponse:function(){this._active=!1}}}))}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=n(9).EventEmitter,c=n(3),f=n(2),h=n(10),d=n(5),p=new c("RTCSession:ReferSubscriber");t.exports=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(a,t);var e,n,r,u=s(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=u.call(this))._id=null,e._session=t,e}return e=a,(n=[{key:"sendRefer",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p.debug("sendRefer()");var r=d.cloneArray(n.extraHeaders),i=d.cloneObject(n.eventHandlers);for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&this.on(o,i[o]);var s=null;n.replaces&&(s=n.replaces._request.call_id,s+=";to-tag=".concat(n.replaces._to_tag),s+=";from-tag=".concat(n.replaces._from_tag),s=encodeURIComponent(s));var u="Refer-To: <".concat(t).concat(s?"?Replaces=".concat(s):"",">");if(r.push(u),!r.some((function(t){return t.toLowerCase().startsWith("referred-by:")}))){var a="Referred-By: <".concat(this._session._ua._configuration.uri._scheme,":").concat(this._session._ua._configuration.uri._user,"@").concat(this._session._ua._configuration.uri._host,">");r.push(a)}r.push("Contact: ".concat(this._session.contact));var l=this._session.sendRequest(f.REFER,{extraHeaders:r,eventHandlers:{onSuccessResponse:function(t){e._requestSucceeded(t)},onErrorResponse:function(t){e._requestFailed(t,f.causes.REJECTED)},onTransportError:function(){e._requestFailed(null,f.causes.CONNECTION_ERROR)},onRequestTimeout:function(){e._requestFailed(null,f.causes.REQUEST_TIMEOUT)},onDialogError:function(){e._requestFailed(null,f.causes.DIALOG_ERROR)}}});this._id=l.cseq}},{key:"receiveNotify",value:function(t){if(p.debug("receiveNotify()"),t.body){var e=h.parse(t.body.trim(),"Status_Line");if(-1!==e)switch(!0){case/^100$/.test(e.status_code):this.emit("trying",{request:t,status_line:e});break;case/^1[0-9]{2}$/.test(e.status_code):this.emit("progress",{request:t,status_line:e});break;case/^2[0-9]{2}$/.test(e.status_code):this.emit("accepted",{request:t,status_line:e});break;default:this.emit("failed",{request:t,status_line:e})}else p.debug('receiveNotify() | error parsing NOTIFY body: "'.concat(t.body,'"'))}}},{key:"_requestSucceeded",value:function(t){p.debug("REFER succeeded"),p.debug('emit "requestSucceeded"'),this.emit("requestSucceeded",{response:t})}},{key:"_requestFailed",value:function(t,e){p.debug("REFER failed"),p.debug('emit "requestFailed"'),this.emit("requestFailed",{response:t||null,cause:e})}},{key:"id",get:function(){return this._id}}])&&i(e.prototype,n),r&&i(e,r),a}(l)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=n(9).EventEmitter,c=n(3),f=n(2),h=n(13),d=n(5),p=n(20),_=n(14),v=n(15),g=new c("Message");t.exports=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(a,t);var e,n,r,u=s(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=u.call(this))._ua=t,e._request=null,e._closed=!1,e._direction=null,e._local_identity=null,e._remote_identity=null,e._is_replied=!1,e._data={},e}return e=a,(n=[{key:"send",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t;if(void 0===t||void 0===e)throw new TypeError("Not enough arguments");if(!(t=this._ua.normalizeTarget(t)))throw new TypeError("Invalid target: ".concat(i));var o=d.cloneArray(r.extraHeaders),s=d.cloneObject(r.eventHandlers),u=r.contentType||"text/plain",a={};for(var l in r.fromUserName&&(a.from_uri=new v("sip",r.fromUserName,this._ua.configuration.uri.host),o.push("P-Preferred-Identity: ".concat(this._ua.configuration.uri.toString()))),r.fromDisplayName&&(a.from_display_name=r.fromDisplayName),s)Object.prototype.hasOwnProperty.call(s,l)&&this.on(l,s[l]);o.push("Content-Type: ".concat(u)),this._request=new h.OutgoingRequest(f.MESSAGE,t,this._ua,a,o),e&&(this._request.body=e);var c=new p(this._ua,this._request,{onRequestTimeout:function(){n._onRequestTimeout()},onTransportError:function(){n._onTransportError()},onReceiveResponse:function(t){n._receiveResponse(t)}});this._newMessage("local",this._request),c.send()}},{key:"init_incoming",value:function(t){this._request=t,this._newMessage("remote",t),this._is_replied||(this._is_replied=!0,t.reply(200)),this._close()}},{key:"accept",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=d.cloneArray(t.extraHeaders),n=t.body;if("incoming"!==this._direction)throw new _.NotSupportedError('"accept" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");this._is_replied=!0,this._request.reply(200,null,e,n)}},{key:"reject",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.status_code||480,n=t.reason_phrase,r=d.cloneArray(t.extraHeaders),i=t.body;if("incoming"!==this._direction)throw new _.NotSupportedError('"reject" not supported for outgoing Message');if(this._is_replied)throw new Error("incoming Message already replied");if(e<300||e>=700)throw new TypeError("Invalid status_code: ".concat(e));this._is_replied=!0,this._request.reply(e,n,r,i)}},{key:"_receiveResponse",value:function(t){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):this._succeeded("remote",t);break;default:var e=d.sipErrorCause(t.status_code);this._failed("remote",t,e)}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,f.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,f.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newMessage",value:function(t,e){"remote"===t?(this._direction="incoming",this._local_identity=e.to,this._remote_identity=e.from):"local"===t&&(this._direction="outgoing",this._local_identity=e.from,this._remote_identity=e.to),this._ua.newMessage(this,{originator:t,message:this,request:e})}},{key:"_failed",value:function(t,e,n){g.debug("MESSAGE failed"),this._close(),g.debug('emit "failed"'),this.emit("failed",{originator:t,response:e||null,cause:n})}},{key:"_succeeded",value:function(t,e){g.debug("MESSAGE succeeded"),this._close(),g.debug('emit "succeeded"'),this.emit("succeeded",{originator:t,response:e})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}])&&i(e.prototype,n),r&&i(e,r),a}(l)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=a(t);if(e){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=n(9).EventEmitter,c=n(3),f=n(2),h=n(13),d=n(5),p=n(20),_=n(14),v=new c("Options");t.exports=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(a,t);var e,n,r,u=s(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=u.call(this))._ua=t,e._request=null,e._closed=!1,e._direction=null,e._local_identity=null,e._remote_identity=null,e._is_replied=!1,e._data={},e}return e=a,(n=[{key:"send",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t;if(void 0===t)throw new TypeError("A target is required for OPTIONS");if(!(t=this._ua.normalizeTarget(t)))throw new TypeError("Invalid target: ".concat(i));var o=d.cloneArray(r.extraHeaders),s=d.cloneObject(r.eventHandlers),u=r.contentType||"application/sdp";for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&this.on(a,s[a]);o.push("Content-Type: ".concat(u)),this._request=new h.OutgoingRequest(f.OPTIONS,t,this._ua,null,o),e&&(this._request.body=e);var l=new p(this._ua,this._request,{onRequestTimeout:function(){n._onRequestTimeout()},onTransportError:function(){n._onTransportError()},onReceiveResponse:function(t){n._receiveResponse(t)}});this._newOptions("local",this._request),l.send()}},{key:"init_incoming",value:function(t){this._request=t,this._newOptions("remote",t),this._is_replied||(this._is_replied=!0,t.reply(200)),this._close()}},{key:"accept",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=d.cloneArray(t.extraHeaders),n=t.body;if("incoming"!==this._direction)throw new _.NotSupportedError('"accept" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");this._is_replied=!0,this._request.reply(200,null,e,n)}},{key:"reject",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.status_code||480,n=t.reason_phrase,r=d.cloneArray(t.extraHeaders),i=t.body;if("incoming"!==this._direction)throw new _.NotSupportedError('"reject" not supported for outgoing Options');if(this._is_replied)throw new Error("incoming Options already replied");if(e<300||e>=700)throw new TypeError("Invalid status_code: ".concat(e));this._is_replied=!0,this._request.reply(e,n,r,i)}},{key:"_receiveResponse",value:function(t){if(!this._closed)switch(!0){case/^1[0-9]{2}$/.test(t.status_code):break;case/^2[0-9]{2}$/.test(t.status_code):this._succeeded("remote",t);break;default:var e=d.sipErrorCause(t.status_code);this._failed("remote",t,e)}}},{key:"_onRequestTimeout",value:function(){this._closed||this._failed("system",null,f.causes.REQUEST_TIMEOUT)}},{key:"_onTransportError",value:function(){this._closed||this._failed("system",null,f.causes.CONNECTION_ERROR)}},{key:"_close",value:function(){this._closed=!0,this._ua.destroyMessage(this)}},{key:"_newOptions",value:function(t,e){"remote"===t?(this._direction="incoming",this._local_identity=e.to,this._remote_identity=e.from):"local"===t&&(this._direction="outgoing",this._local_identity=e.from,this._remote_identity=e.to),this._ua.newOptions(this,{originator:t,message:this,request:e})}},{key:"_failed",value:function(t,e,n){v.debug("OPTIONS failed"),this._close(),v.debug('emit "failed"'),this.emit("failed",{originator:t,response:e||null,cause:n})}},{key:"_succeeded",value:function(t,e){v.debug("OPTIONS succeeded"),this._close(),v.debug('emit "succeeded"'),this.emit("succeeded",{originator:t,response:e})}},{key:"direction",get:function(){return this._direction}},{key:"local_identity",get:function(){return this._local_identity}},{key:"remote_identity",get:function(){return this._remote_identity}}])&&i(e.prototype,n),r&&i(e,r),a}(l)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=n(3),s=n(34),u=n(2),a=new o("Transport"),l={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:u.CONNECTION_RECOVERY_MIN_INTERVAL,max_interval:u.CONNECTION_RECOVERY_MAX_INTERVAL}};t.exports=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.recovery_options;r(this,t),a.debug("new()"),this.status=l.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=n,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1;try{this.textDecoder=new TextDecoder("utf8")}catch(t){a.warn("cannot use TextDecoder: ".concat(t))}if(void 0===e)throw new TypeError("Invalid argument. undefined 'sockets' argument");e instanceof Array||(e=[e]),e.forEach((function(t){if(!s.isSocket(t.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(t.weight&&!Number(t.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:t.socket,weight:t.weight||0,status:l.SOCKET_STATUS_READY})}),this),this._getSocket()}var e,n,o;return e=t,(n=[{key:"connect",value:function(){a.debug("connect()"),this.isConnected()?a.debug("Transport is already connected"):this.isConnecting()?a.debug("Transport is connecting"):(this.close_requested=!1,this.status=l.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),this.close_requested||(this.socket.onconnect=this._onConnect.bind(this),this.socket.ondisconnect=this._onDisconnect.bind(this),this.socket.ondata=this._onData.bind(this),this.socket.connect()))}},{key:"disconnect",value:function(){a.debug("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=l.STATUS_DISCONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect({socket:this.socket,error:!1})}},{key:"send",value:function(t){if(a.debug("send()"),!this.isConnected())return a.warn("unable to send message, transport is not connected"),!1;var e=t.toString();return a.debug("sending message:\n\n".concat(e,"\n")),this.socket.send(e)}},{key:"isConnected",value:function(){return this.status===l.STATUS_CONNECTED}},{key:"isConnecting",value:function(){return this.status===l.STATUS_CONNECTING}},{key:"_reconnect",value:function(){var t=this;this.recover_attempts+=1;var e=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1);e<this.recovery_options.min_interval?e=this.recovery_options.min_interval:e>this.recovery_options.max_interval&&(e=this.recovery_options.max_interval),a.debug("reconnection attempt: ".concat(this.recover_attempts,". next connection attempt in ").concat(e," seconds")),this.recovery_timer=setTimeout((function(){t.close_requested||t.isConnected()||t.isConnecting()||(t._getSocket(),t.connect())}),1e3*e)}},{key:"_getSocket",value:function(){var t=[];if(this.sockets.forEach((function(e){e.status!==l.SOCKET_STATUS_ERROR&&(0===t.length?t.push(e):e.weight>t[0].weight?t=[e]:e.weight===t[0].weight&&t.push(e))})),0===t.length)return this.sockets.forEach((function(t){t.status=l.SOCKET_STATUS_READY})),void this._getSocket();var e=Math.floor(Math.random()*t.length);this.socket=t[e].socket}},{key:"_onConnect",value:function(){this.recover_attempts=0,this.status=l.STATUS_CONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}},{key:"_onDisconnect",value:function(t,e,n){this.status=l.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:t,code:e,reason:n}),this.close_requested||(this.sockets.forEach((function(t){this.socket===t.socket&&(t.status=l.SOCKET_STATUS_ERROR)}),this),this._reconnect(t))}},{key:"_onData",value:function(t){if("\r\n"!==t){if("string"!=typeof t){try{t=this.textDecoder?this.textDecoder.decode(t):String.fromCharCode.apply(null,new Uint8Array(t))}catch(t){return void a.debug("received binary message failed to be converted into string, message discarded")}a.debug("received binary message:\n\n".concat(t,"\n"))}else a.debug("received text message:\n\n".concat(t,"\n"));this.ondata({transport:this,message:t})}else a.debug("received message with CRLF Keep Alive response")}},{key:"via_transport",get:function(){return this.socket.via_transport}},{key:"url",get:function(){return this.socket.url}},{key:"sip_uri",get:function(){return this.socket.sip_uri}}])&&i(e.prototype,n),o&&i(e,o),t}()},function(t,e,n){"use strict";function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,s=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw s}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o=n(3),s=n(10),u=n(13),a=new o("Parser");function l(t,e){var n=e,r=0,i=0;if(t.substring(n,n+2).match(/(^\r\n)/))return-2;for(;0===r;){if(-1===(i=t.indexOf("\r\n",n)))return i;!t.substring(i+2,i+4).match(/(^\r\n)/)&&t.charAt(i+2).match(/(^\s+)/)?n=i+2:r=i}return r}function c(t,e,n,i){var o,a=e.indexOf(":",n),l=e.substring(n,a).trim(),c=e.substring(a+1,i).trim();switch(l.toLowerCase()){case"via":case"v":t.addHeader("via",c),1===t.getHeaders("via").length?(o=t.parseHeader("Via"))&&(t.via=o,t.via_branch=o.branch):o=0;break;case"from":case"f":t.setHeader("from",c),(o=t.parseHeader("from"))&&(t.from=o,t.from_tag=o.getParam("tag"));break;case"to":case"t":t.setHeader("to",c),(o=t.parseHeader("to"))&&(t.to=o,t.to_tag=o.getParam("tag"));break;case"record-route":if(-1===(o=s.parse(c,"Record_Route")))o=void 0;else{var f,h=r(o);try{for(h.s();!(f=h.n()).done;){var d=f.value;t.addHeader("record-route",c.substring(d.possition,d.offset)),t.headers["Record-Route"][t.getHeaders("record-route").length-1].parsed=d.parsed}}catch(t){h.e(t)}finally{h.f()}}break;case"call-id":case"i":t.setHeader("call-id",c),(o=t.parseHeader("call-id"))&&(t.call_id=c);break;case"contact":case"m":if(-1===(o=s.parse(c,"Contact")))o=void 0;else{var p,_=r(o);try{for(_.s();!(p=_.n()).done;){var v=p.value;t.addHeader("contact",c.substring(v.possition,v.offset)),t.headers.Contact[t.getHeaders("contact").length-1].parsed=v.parsed}}catch(t){_.e(t)}finally{_.f()}}break;case"content-length":case"l":t.setHeader("content-length",c),o=t.parseHeader("content-length");break;case"content-type":case"c":t.setHeader("content-type",c),o=t.parseHeader("content-type");break;case"cseq":t.setHeader("cseq",c),(o=t.parseHeader("cseq"))&&(t.cseq=o.value),t instanceof u.IncomingResponse&&(t.method=o.method);break;case"max-forwards":t.setHeader("max-forwards",c),o=t.parseHeader("max-forwards");break;case"www-authenticate":t.setHeader("www-authenticate",c),o=t.parseHeader("www-authenticate");break;case"proxy-authenticate":t.setHeader("proxy-authenticate",c),o=t.parseHeader("proxy-authenticate");break;case"session-expires":case"x":t.setHeader("session-expires",c),(o=t.parseHeader("session-expires"))&&(t.session_expires=o.expires,t.session_expires_refresher=o.refresher);break;case"refer-to":case"r":t.setHeader("refer-to",c),(o=t.parseHeader("refer-to"))&&(t.refer_to=o);break;case"replaces":t.setHeader("replaces",c),(o=t.parseHeader("replaces"))&&(t.replaces=o);break;case"event":case"o":t.setHeader("event",c),(o=t.parseHeader("event"))&&(t.event=o);break;default:t.addHeader(l,c),o=0}return void 0!==o||{error:'error parsing header "'.concat(l,'"')}}e.parseMessage=function(t,e){var n,r,i=t.indexOf("\r\n");if(-1!==i){var o=t.substring(0,i),f=s.parse(o,"Request_Response");if(-1!==f){f.status_code?((n=new u.IncomingResponse).status_code=f.status_code,n.reason_phrase=f.reason_phrase):((n=new u.IncomingRequest(e)).method=f.method,n.ruri=f.uri),n.data=t;for(var h=i+2;;){if(-2===(i=l(t,h))){r=h+2;break}if(-1===i)return void a.warn("parseMessage() | malformed message");if(!0!==(f=c(n,t,h,i)))return void a.warn("parseMessage() |",f.error);h=i+2}if(n.hasHeader("content-length")){var d=n.getHeader("content-length");n.body=t.substr(r,d)}else n.body=t.substring(r);return n}a.warn('parseMessage() | error parsing first line of SIP message: "'.concat(o,'"'))}else a.warn("parseMessage() | no CRLF found, not a SIP message")}},function(t,e,n){"use strict";function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,s=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw s}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o,s,u,a=n(3),l=n(2),c=n(13),f=n(5),h=new a("sanityCheck"),d=[function(){for(var t=0,e=["from","to","call_id","cseq","via"];t<e.length;t++){var n=e[t];if(!o.hasHeader(n))return h.debug("missing mandatory header field : ".concat(n,", dropping the response")),!1}}],p=[function(){if("sip"!==o.s("to").uri.scheme)return v(416),!1},function(){if(!o.to_tag&&o.call_id.substr(0,5)===s.configuration.jssip_id)return v(482),!1},function(){var t=f.str_utf8_length(o.body),e=o.getHeader("content-length");if(t<e)return v(400),!1},function(){var t,e=o.from_tag,n=o.call_id,r=o.cseq;if(o.to_tag)return;if(o.method===l.INVITE){if(s._transactions.ist[o.via_branch])return!1;for(var i in s._transactions.ist)if(Object.prototype.hasOwnProperty.call(s._transactions.ist,i)&&(t=s._transactions.ist[i]).request.from_tag===e&&t.request.call_id===n&&t.request.cseq===r)return v(482),!1}else{if(s._transactions.nist[o.via_branch])return!1;for(var u in s._transactions.nist)if(Object.prototype.hasOwnProperty.call(s._transactions.nist,u)&&(t=s._transactions.nist[u]).request.from_tag===e&&t.request.call_id===n&&t.request.cseq===r)return v(482),!1}}],_=[function(){if(o.getHeaders("via").length>1)return h.debug("more than one Via header field present in the response, dropping the response"),!1},function(){var t=f.str_utf8_length(o.body),e=o.getHeader("content-length");if(t<e)return h.debug("message body length is lower than the value in Content-Length header field, dropping the response"),!1}];function v(t){var e,n,i=o.getHeaders("via"),s="SIP/2.0 ".concat(t," ").concat(l.REASON_PHRASE[t],"\r\n"),a=r(i);try{for(a.s();!(n=a.n()).done;){var c=n.value;s+="Via: ".concat(c,"\r\n")}}catch(t){a.e(t)}finally{a.f()}e=o.getHeader("To"),o.to_tag||(e+=";tag=".concat(f.newTag())),s+="To: ".concat(e,"\r\n"),s+="From: ".concat(o.getHeader("From"),"\r\n"),s+="Call-ID: ".concat(o.call_id,"\r\n"),s+="CSeq: ".concat(o.cseq," ").concat(o.method,"\r\n"),s+="\r\n",u.send(s)}t.exports=function(t,e,n){o=t,s=e,u=n;var i,a=r(d);try{for(a.s();!(i=a.n()).done;){if(!1===(0,i.value)())return!1}}catch(t){a.e(t)}finally{a.f()}if(o instanceof c.IncomingRequest){var l,f=r(p);try{for(f.s();!(l=f.n()).done;){if(!1===(0,l.value)())return!1}}catch(t){f.e(t)}finally{f.f()}}else if(o instanceof c.IncomingResponse){var h,v=r(_);try{for(v.s();!(h=v.n()).done;){if(!1===(0,h.value)())return!1}}catch(t){v.e(t)}finally{v.f()}}return!0}},function(t,e,n){"use strict";function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,s=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw s}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o=n(5),s=n(2),u=n(10),a=n(15),l=n(34),c=n(14);e.settings={authorization_user:null,password:null,realm:null,ha1:null,authorization_jwt:null,display_name:null,uri:null,contact_uri:null,instance_id:null,use_preloaded_route:!1,session_timers:!0,session_timers_refresh_method:s.UPDATE,session_timers_force_refresher:!1,no_answer_timeout:60,register:!0,register_expires:600,registrar_server:null,sockets:null,connection_recovery_max_interval:s.CONNECTION_RECOVERY_MAX_INTERVAL,connection_recovery_min_interval:s.CONNECTION_RECOVERY_MIN_INTERVAL,via_host:"".concat(o.createRandomToken(12),".invalid")};var f={mandatory:{sockets:function(t){var e=[];if(l.isSocket(t))e.push({socket:t});else{if(!Array.isArray(t)||!t.length)return;var n,i=r(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;Object.prototype.hasOwnProperty.call(o,"socket")&&l.isSocket(o.socket)?e.push(o):l.isSocket(o)&&e.push({socket:o})}}catch(t){i.e(t)}finally{i.f()}}return e},uri:function(t){/^sip:/i.test(t)||(t="".concat(s.SIP,":").concat(t));var e=a.parse(t);return e&&e.user?e:void 0}},optional:{authorization_user:function(t){return-1===u.parse('"'.concat(t,'"'),"quoted_string")?void 0:t},authorization_jwt:function(t){if("string"==typeof t)return t},user_agent:function(t){if("string"==typeof t)return t},connection_recovery_max_interval:function(t){if(o.isDecimal(t)){var e=Number(t);if(e>0)return e}},connection_recovery_min_interval:function(t){if(o.isDecimal(t)){var e=Number(t);if(e>0)return e}},contact_uri:function(t){if("string"==typeof t){var e=u.parse(t,"SIP_URI");if(-1!==e)return e}},display_name:function(t){return t},instance_id:function(t){return/^uuid:/i.test(t)&&(t=t.substr(5)),-1===u.parse(t,"uuid")?void 0:t},no_answer_timeout:function(t){if(o.isDecimal(t)){var e=Number(t);if(e>0)return e}},session_timers:function(t){if("boolean"==typeof t)return t},session_timers_refresh_method:function(t){if("string"==typeof t&&((t=t.toUpperCase())===s.INVITE||t===s.UPDATE))return t},session_timers_force_refresher:function(t){if("boolean"==typeof t)return t},password:function(t){return String(t)},realm:function(t){return String(t)},ha1:function(t){return String(t)},register:function(t){if("boolean"==typeof t)return t},register_expires:function(t){if(o.isDecimal(t)){var e=Number(t);if(e>0)return e}},registrar_server:function(t){/^sip:/i.test(t)||(t="".concat(s.SIP,":").concat(t));var e=a.parse(t);return e?e.user?void 0:e:void 0},use_preloaded_route:function(t){if("boolean"==typeof t)return t}}};e.load=function(t,e){for(var n in f.mandatory){if(!e.hasOwnProperty(n))throw new c.ConfigurationError(n);var r=e[n],i=f.mandatory[n](r);if(void 0===i)throw new c.ConfigurationError(n,r);t[n]=i}for(var s in f.optional)if(e.hasOwnProperty(s)){var u=e[s];if(o.isEmpty(u))continue;var a=f.optional[s](u);if(void 0===a)throw new c.ConfigurationError(s,u);t[s]=a}}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=n(3),o=n(10),s=new i("WebSocketInterface");t.exports=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s.debug('new() [url:"%s"]',e),this._url=e,this._sip_uri=null,this._via_transport=null,this._ws=null;var n=o.parse(e,"absoluteURI");if(-1===n)throw s.warn("invalid WebSocket URI: ".concat(e)),new TypeError("Invalid argument: ".concat(e));if("wss"!==n.scheme&&"ws"!==n.scheme)throw s.warn("invalid WebSocket URI scheme: ".concat(n.scheme)),new TypeError("Invalid argument: ".concat(e));this._sip_uri="sip:".concat(n.host).concat(n.port?":".concat(n.port):"",";transport=ws"),this._via_transport=n.scheme.toUpperCase()}var e,n,i;return e=t,(n=[{key:"connect",value:function(){if(s.debug("connect()"),this.isConnected())s.debug("WebSocket ".concat(this._url," is already connected"));else if(this.isConnecting())s.debug("WebSocket ".concat(this._url," is connecting"));else{this._ws&&this.disconnect(),s.debug("connecting to WebSocket ".concat(this._url));try{this._ws=new WebSocket(this._url,"sip"),this._ws.binaryType="arraybuffer",this._ws.onopen=this._onOpen.bind(this),this._ws.onclose=this._onClose.bind(this),this._ws.onmessage=this._onMessage.bind(this),this._ws.onerror=this._onError.bind(this)}catch(t){this._onError(t)}}}},{key:"disconnect",value:function(){s.debug("disconnect()"),this._ws&&(this._ws.onopen=function(){},this._ws.onclose=function(){},this._ws.onmessage=function(){},this._ws.onerror=function(){},this._ws.close(),this._ws=null)}},{key:"send",value:function(t){return s.debug("send()"),this.isConnected()?(this._ws.send(t),!0):(s.warn("unable to send message, WebSocket is not open"),!1)}},{key:"isConnected",value:function(){return this._ws&&this._ws.readyState===this._ws.OPEN}},{key:"isConnecting",value:function(){return this._ws&&this._ws.readyState===this._ws.CONNECTING}},{key:"_onOpen",value:function(){s.debug("WebSocket ".concat(this._url," connected")),this.onconnect()}},{key:"_onClose",value:function(t){var e=t.wasClean,n=t.code,r=t.reason;s.debug("WebSocket ".concat(this._url," closed")),!1===e&&s.debug("WebSocket abrupt disconnection"),this.ondisconnect(!e,n,r)}},{key:"_onMessage",value:function(t){var e=t.data;s.debug("received WebSocket message"),this.ondata(e)}},{key:"_onError",value:function(t){s.warn("WebSocket ".concat(this._url," error: "),t)}},{key:"via_transport",get:function(){return this._via_transport},set:function(t){this._via_transport=t.toUpperCase()}},{key:"sip_uri",get:function(){return this._sip_uri}},{key:"url",get:function(){return this._url}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){"use strict";var r=n(4),i=n(35),o=n(70),s=n(43);var u=function t(e){var n=new o(e),u=i(o.prototype.request,n);return r.extend(u,o.prototype,n),r.extend(u,n),u.create=function(n){return t(s(e,n))},u}(n(27));u.Axios=o,u.CanceledError=n(22),u.CancelToken=n(87),u.isCancel=n(42),u.VERSION=n(44).version,u.toFormData=n(38),u.AxiosError=n(16),u.Cancel=u.CanceledError,u.all=function(t){return Promise.all(t)},u.spread=n(88),u.isAxiosError=n(89),t.exports=u,t.exports.default=u},function(t,e,n){"use strict";var r=n(4),i=n(36),o=n(71),s=n(72),u=n(43),a=n(41),l=n(86),c=l.validators;function f(t){this.defaults=t,this.interceptors={request:new o,response:new o}}f.prototype.request=function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},(e=u(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&l.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var o,a=[];if(this.interceptors.response.forEach((function(t){a.push(t.fulfilled,t.rejected)})),!i){var f=[s,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(a),o=Promise.resolve(e);f.length;)o=o.then(f.shift(),f.shift());return o}for(var h=e;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(t){p(t);break}}try{o=s(h)}catch(t){return Promise.reject(t)}for(;a.length;)o=o.then(a.shift(),a.shift());return o},f.prototype.getUri=function(t){t=u(this.defaults,t);var e=a(t.baseURL,t.url);return i(e,t.params,t.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(t){f.prototype[t]=function(e,n){return this.request(u(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(u(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[t]=e(),f.prototype[t+"Form"]=e(!0)})),t.exports=f},function(t,e,n){"use strict";var r=n(4);function i(){this.handlers=[]}i.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,n){"use strict";var r=n(4),i=n(73),o=n(42),s=n(27),u=n(22);function a(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new u}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return a(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,n){"use strict";var r=n(4),i=n(27);t.exports=function(t,e,n){var o=this||i;return r.forEach(n,(function(n){t=n.call(o,t,e)})),t}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=l(t),s=r[0],u=r[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,u)),c=0,f=u>0?s-4:s;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],a[c++]=e>>16&255,a[c++]=e>>8&255,a[c++]=255&e;2===u&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,a[c++]=255&e);1===u&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,a[c++]=e>>8&255,a[c++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,u=n-i;s<u;s+=16383)o.push(c(t,s,s+16383>u?u:s+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,a=s.length;u<a;++u)r[u]=s[u],i[s.charCodeAt(u)]=u;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,o,s=[],u=e;u<n;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,u=8*i-r-1,a=(1<<u)-1,l=a>>1,c=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=u;c>0;o=256*o+t[e+f],f+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===a)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=l}return(d?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,u,a,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),(e+=s+f>=1?h/a:h*Math.pow(2,1-f))*a>=2&&(s++,a/=2),s+f>=c?(u=0,s=c):s+f>=1?(u=(e*a-1)*Math.pow(2,i),s+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&u,d+=p,u/=256,i-=8);for(s=s<<i|u,l+=i;l>0;t[n+d]=255&s,d+=p,s/=256,l-=8);t[n+d-p]|=128*_}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";var r=n(16);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}},function(t,e,n){"use strict";var r=n(4);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,s){var u=[];u.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(i)&&u.push("path="+i),r.isString(o)&&u.push("domain="+o),!0===s&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(4),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}})),s):s}},function(t,e,n){"use strict";var r=n(4);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";t.exports=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}},function(t,e){t.exports=null},function(t,e,n){"use strict";var r=n(44).version,i=n(16),o={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){o[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var s={};o.transitional=function(t,e,n){function o(t,e){return"[Axios v"+r+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,u){if(!1===t)throw new i(o(r," has been removed"+(e?" in "+e:"")),i.ERR_DEPRECATED);return e&&!s[r]&&(s[r]=!0,console.warn(o(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,u)}},t.exports={assertOptions:function(t,e,n){if("object"!=typeof t)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),o=r.length;o-- >0;){var s=r[o],u=e[s];if(u){var a=t[s],l=void 0===a||u(a,s,t);if(!0!==l)throw new i("option "+s+" must be "+l,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+s,i.ERR_BAD_OPTION)}},validators:o}},function(t,e,n){"use strict";var r=n(22);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},i.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t){return r.isObject(t)&&!0===t.isAxiosError}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"VERSION",(function(){return l.e})),n.d(r,"restArguments",(function(){return c})),n.d(r,"isObject",(function(){return f})),n.d(r,"isNull",(function(){return h})),n.d(r,"isUndefined",(function(){return d})),n.d(r,"isBoolean",(function(){return p})),n.d(r,"isElement",(function(){return _})),n.d(r,"isString",(function(){return g})),n.d(r,"isNumber",(function(){return m})),n.d(r,"isDate",(function(){return y})),n.d(r,"isRegExp",(function(){return b})),n.d(r,"isError",(function(){return T})),n.d(r,"isSymbol",(function(){return E})),n.d(r,"isArrayBuffer",(function(){return w})),n.d(r,"isDataView",(function(){return x})),n.d(r,"isArray",(function(){return N})),n.d(r,"isFunction",(function(){return C})),n.d(r,"isArguments",(function(){return U})),n.d(r,"isFinite",(function(){return L})),n.d(r,"isNaN",(function(){return j})),n.d(r,"isTypedArray",(function(){return z})),n.d(r,"isEmpty",(function(){return K})),n.d(r,"isMatch",(function(){return $})),n.d(r,"isEqual",(function(){return Z})),n.d(r,"isMap",(function(){return at})),n.d(r,"isWeakMap",(function(){return lt})),n.d(r,"isSet",(function(){return ct})),n.d(r,"isWeakSet",(function(){return ft})),n.d(r,"keys",(function(){return G})),n.d(r,"allKeys",(function(){return tt})),n.d(r,"values",(function(){return ht})),n.d(r,"pairs",(function(){return dt})),n.d(r,"invert",(function(){return pt})),n.d(r,"functions",(function(){return _t})),n.d(r,"methods",(function(){return _t})),n.d(r,"extend",(function(){return gt})),n.d(r,"extendOwn",(function(){return mt})),n.d(r,"assign",(function(){return mt})),n.d(r,"defaults",(function(){return yt})),n.d(r,"create",(function(){return Tt})),n.d(r,"clone",(function(){return Et})),n.d(r,"tap",(function(){return wt})),n.d(r,"get",(function(){return Rt})),n.d(r,"has",(function(){return Ot})),n.d(r,"mapObject",(function(){return Lt})),n.d(r,"identity",(function(){return It})),n.d(r,"constant",(function(){return M})),n.d(r,"noop",(function(){return jt})),n.d(r,"toPath",(function(){return At})),n.d(r,"property",(function(){return xt})),n.d(r,"propertyOf",(function(){return Mt})),n.d(r,"matcher",(function(){return kt})),n.d(r,"matches",(function(){return kt})),n.d(r,"times",(function(){return qt})),n.d(r,"random",(function(){return Ft})),n.d(r,"now",(function(){return Ht})),n.d(r,"escape",(function(){return zt})),n.d(r,"unescape",(function(){return Vt})),n.d(r,"templateSettings",(function(){return Yt})),n.d(r,"template",(function(){return Qt})),n.d(r,"result",(function(){return Zt})),n.d(r,"uniqueId",(function(){return ee})),n.d(r,"chain",(function(){return ne})),n.d(r,"iteratee",(function(){return Dt})),n.d(r,"partial",(function(){return oe})),n.d(r,"bind",(function(){return se})),n.d(r,"bindAll",(function(){return le})),n.d(r,"memoize",(function(){return ce})),n.d(r,"delay",(function(){return fe})),n.d(r,"defer",(function(){return he})),n.d(r,"throttle",(function(){return de})),n.d(r,"debounce",(function(){return pe})),n.d(r,"wrap",(function(){return _e})),n.d(r,"negate",(function(){return ve})),n.d(r,"compose",(function(){return ge})),n.d(r,"after",(function(){return me})),n.d(r,"before",(function(){return ye})),n.d(r,"once",(function(){return be})),n.d(r,"findKey",(function(){return Te})),n.d(r,"findIndex",(function(){return we})),n.d(r,"findLastIndex",(function(){return Ae})),n.d(r,"sortedIndex",(function(){return Se})),n.d(r,"indexOf",(function(){return Re})),n.d(r,"lastIndexOf",(function(){return Oe})),n.d(r,"find",(function(){return Ie})),n.d(r,"detect",(function(){return Ie})),n.d(r,"findWhere",(function(){return ke})),n.d(r,"each",(function(){return xe})),n.d(r,"forEach",(function(){return xe})),n.d(r,"map",(function(){return Ne})),n.d(r,"collect",(function(){return Ne})),n.d(r,"reduce",(function(){return De})),n.d(r,"foldl",(function(){return De})),n.d(r,"inject",(function(){return De})),n.d(r,"reduceRight",(function(){return Ue})),n.d(r,"foldr",(function(){return Ue})),n.d(r,"filter",(function(){return Le})),n.d(r,"select",(function(){return Le})),n.d(r,"reject",(function(){return je})),n.d(r,"every",(function(){return Me})),n.d(r,"all",(function(){return Me})),n.d(r,"some",(function(){return qe})),n.d(r,"any",(function(){return qe})),n.d(r,"contains",(function(){return Fe})),n.d(r,"includes",(function(){return Fe})),n.d(r,"include",(function(){return Fe})),n.d(r,"invoke",(function(){return He})),n.d(r,"pluck",(function(){return Be})),n.d(r,"where",(function(){return We})),n.d(r,"max",(function(){return ze})),n.d(r,"min",(function(){return Ve})),n.d(r,"shuffle",(function(){return $e})),n.d(r,"sample",(function(){return Ke})),n.d(r,"sortBy",(function(){return Je})),n.d(r,"groupBy",(function(){return Qe})),n.d(r,"indexBy",(function(){return Ze})),n.d(r,"countBy",(function(){return tn})),n.d(r,"partition",(function(){return en})),n.d(r,"toArray",(function(){return Ge})),n.d(r,"size",(function(){return nn})),n.d(r,"pick",(function(){return on})),n.d(r,"omit",(function(){return sn})),n.d(r,"first",(function(){return an})),n.d(r,"head",(function(){return an})),n.d(r,"take",(function(){return an})),n.d(r,"initial",(function(){return un})),n.d(r,"last",(function(){return cn})),n.d(r,"rest",(function(){return ln})),n.d(r,"tail",(function(){return ln})),n.d(r,"drop",(function(){return ln})),n.d(r,"compact",(function(){return fn})),n.d(r,"flatten",(function(){return hn})),n.d(r,"without",(function(){return pn})),n.d(r,"uniq",(function(){return _n})),n.d(r,"unique",(function(){return _n})),n.d(r,"union",(function(){return vn})),n.d(r,"intersection",(function(){return gn})),n.d(r,"difference",(function(){return dn})),n.d(r,"unzip",(function(){return mn})),n.d(r,"transpose",(function(){return mn})),n.d(r,"zip",(function(){return yn})),n.d(r,"object",(function(){return bn})),n.d(r,"range",(function(){return Tn})),n.d(r,"chunk",(function(){return En})),n.d(r,"mixin",(function(){return An})),n.d(r,"default",(function(){return Sn}));var i={};n.r(i),n.d(i,"protocol",(function(){return lr})),n.d(i,"PacketType",(function(){return cr})),n.d(i,"Encoder",(function(){return fr})),n.d(i,"Decoder",(function(){return hr}));var o=n(1),s=n.n(o),u=n(9);let a={};var l=n(0);function c(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}}function f(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function h(t){return null===t}function d(t){return void 0===t}function p(t){return!0===t||!1===t||"[object Boolean]"===l.t.call(t)}function _(t){return!(!t||1!==t.nodeType)}function v(t){var e="[object "+t+"]";return function(t){return l.t.call(t)===e}}var g=v("String"),m=v("Number"),y=v("Date"),b=v("RegExp"),T=v("Error"),E=v("Symbol"),w=v("ArrayBuffer"),A=v("Function"),S=l.p.document&&l.p.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof S&&(A=function(t){return"function"==typeof t||!1});var C=A,R=v("Object"),O=l.s&&R(new DataView(new ArrayBuffer(8))),I="undefined"!=typeof Map&&R(new Map),k=v("DataView");var x=O?function(t){return null!=t&&C(t.getInt8)&&w(t.buffer)}:k,N=l.k||v("Array");function P(t,e){return null!=t&&l.i.call(t,e)}var D=v("Arguments");!function(){D(arguments)||(D=function(t){return P(t,"callee")})}();var U=D;function L(t){return!E(t)&&Object(l.f)(t)&&!isNaN(parseFloat(t))}function j(t){return m(t)&&Object(l.g)(t)}function M(t){return function(){return t}}function q(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=l.b}}function F(t){return function(e){return null==e?void 0:e[t]}}var H=F("byteLength"),B=q(H),W=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var z=l.r?function(t){return l.l?Object(l.l)(t)&&!x(t):B(t)&&W.test(l.t.call(t))}:M(!1),V=F("length");function Y(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=l.n.length,r=t.constructor,i=C(r)&&r.prototype||l.c,o="constructor";for(P(t,o)&&!e.contains(o)&&e.push(o);n--;)(o=l.n[n])in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function G(t){if(!f(t))return[];if(l.m)return Object(l.m)(t);var e=[];for(var n in t)P(t,n)&&e.push(n);return l.h&&Y(t,e),e}function K(t){if(null==t)return!0;var e=V(t);return"number"==typeof e&&(N(t)||g(t)||U(t))?0===e:0===V(G(t))}function $(t,e){var n=G(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0}function J(t){return t instanceof J?t:this instanceof J?void(this._wrapped=t):new J(t)}function X(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,H(t))}J.VERSION=l.e,J.prototype.value=function(){return this._wrapped},J.prototype.valueOf=J.prototype.toJSON=J.prototype.value,J.prototype.toString=function(){return String(this._wrapped)};function Q(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&function t(e,n,r,i){e instanceof J&&(e=e._wrapped);n instanceof J&&(n=n._wrapped);var o=l.t.call(e);if(o!==l.t.call(n))return!1;if(O&&"[object Object]"==o&&x(e)){if(!x(n))return!1;o="[object DataView]"}switch(o){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return l.d.valueOf.call(e)===l.d.valueOf.call(n);case"[object ArrayBuffer]":case"[object DataView]":return t(X(e),X(n),r,i)}var s="[object Array]"===o;if(!s&&z(e)){if(H(e)!==H(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;s=!0}if(!s){if("object"!=typeof e||"object"!=typeof n)return!1;var u=e.constructor,a=n.constructor;if(u!==a&&!(C(u)&&u instanceof u&&C(a)&&a instanceof a)&&"constructor"in e&&"constructor"in n)return!1}i=i||[];var c=(r=r||[]).length;for(;c--;)if(r[c]===e)return i[c]===n;if(r.push(e),i.push(n),s){if((c=e.length)!==n.length)return!1;for(;c--;)if(!Q(e[c],n[c],r,i))return!1}else{var f,h=G(e);if(c=h.length,G(n).length!==c)return!1;for(;c--;)if(f=h[c],!P(n,f)||!Q(e[f],n[f],r,i))return!1}return r.pop(),i.pop(),!0}(t,e,n,r)}function Z(t,e){return Q(t,e)}function tt(t){if(!f(t))return[];var e=[];for(var n in t)e.push(n);return l.h&&Y(t,e),e}function et(t){var e=V(t);return function(n){if(null==n)return!1;var r=tt(n);if(V(r))return!1;for(var i=0;i<e;i++)if(!C(n[t[i]]))return!1;return t!==st||!C(n[nt])}}var nt="forEach",rt=["clear","delete"],it=["get","has","set"],ot=rt.concat(nt,it),st=rt.concat(it),ut=["add"].concat(rt,nt,"has"),at=I?et(ot):v("Map"),lt=I?et(st):v("WeakMap"),ct=I?et(ut):v("Set"),ft=v("WeakSet");function ht(t){for(var e=G(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function dt(t){for(var e=G(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function pt(t){for(var e={},n=G(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function _t(t){var e=[];for(var n in t)C(t[n])&&e.push(n);return e.sort()}function vt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),u=s.length,a=0;a<u;a++){var l=s[a];e&&void 0!==n[l]||(n[l]=o[l])}return n}}var gt=vt(tt),mt=vt(G),yt=vt(tt,!0);function bt(t){if(!f(t))return{};if(l.j)return Object(l.j)(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Tt(t,e){var n=bt(t);return e&&mt(n,e),n}function Et(t){return f(t)?N(t)?t.slice():gt({},t):t}function wt(t,e){return e(t),t}function At(t){return N(t)?t:[t]}function St(t){return J.toPath(t)}function Ct(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function Rt(t,e,n){var r=Ct(t,St(e));return d(r)?n:r}function Ot(t,e){for(var n=(e=St(e)).length,r=0;r<n;r++){var i=e[r];if(!P(t,i))return!1;t=t[i]}return!!n}function It(t){return t}function kt(t){return t=mt({},t),function(e){return $(e,t)}}function xt(t){return t=St(t),function(e){return Ct(e,t)}}function Nt(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}}function Pt(t,e,n){return null==t?It:C(t)?Nt(t,e,n):f(t)&&!N(t)?kt(t):xt(t)}function Dt(t,e){return Pt(t,e,1/0)}function Ut(t,e,n){return J.iteratee!==Dt?J.iteratee(t,e):Pt(t,e,n)}function Lt(t,e,n){e=Ut(e,n);for(var r=G(t),i=r.length,o={},s=0;s<i;s++){var u=r[s];o[u]=e(t[u],u,t)}return o}function jt(){}function Mt(t){return null==t?jt:function(e){return Rt(t,e)}}function qt(t,e,n){var r=Array(Math.max(0,t));e=Nt(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function Ft(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}J.toPath=At,J.iteratee=Dt;var Ht=Date.now||function(){return(new Date).getTime()};function Bt(t){var e=function(e){return t[e]},n="(?:"+G(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}}var Wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},zt=Bt(Wt),Vt=Bt(pt(Wt)),Yt=J.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Gt=/(.)^/,Kt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$t=/\\|'|\r|\n|\u2028|\u2029/g;function Jt(t){return"\\"+Kt[t]}var Xt=/^\s*(\w|\$)+\s*$/;function Qt(t,e,n){!e&&n&&(e=n),e=yt({},e,J.templateSettings);var r=RegExp([(e.escape||Gt).source,(e.interpolate||Gt).source,(e.evaluate||Gt).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,(function(e,n,r,s,u){return o+=t.slice(i,u).replace($t,Jt),i=u+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e})),o+="';\n";var s,u=e.variable;if(u){if(!Xt.test(u))throw new Error("variable is not a bare identifier: "+u)}else o="with(obj||{}){\n"+o+"}\n",u="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{s=new Function(u,"_",o)}catch(t){throw t.source=o,t}var a=function(t){return s.call(this,t,J)};return a.source="function("+u+"){\n"+o+"}",a}function Zt(t,e,n){var r=(e=St(e)).length;if(!r)return C(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=C(o)?o.call(t):o}return t}var te=0;function ee(t){var e=++te+"";return t?t+e:e}function ne(t){var e=J(t);return e._chain=!0,e}function re(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=bt(t.prototype),s=t.apply(o,i);return f(s)?s:o}var ie=c((function(t,e){var n=ie.placeholder,r=function(){for(var i=0,o=e.length,s=Array(o),u=0;u<o;u++)s[u]=e[u]===n?arguments[i++]:e[u];for(;i<arguments.length;)s.push(arguments[i++]);return re(t,r,this,this,s)};return r}));ie.placeholder=J;var oe=ie,se=c((function(t,e,n){if(!C(t))throw new TypeError("Bind must be called on a function");var r=c((function(i){return re(t,r,e,this,n.concat(i))}));return r})),ue=q(V);function ae(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var i=r.length,o=0,s=V(t);o<s;o++){var u=t[o];if(ue(u)&&(N(u)||U(u)))if(e>1)ae(u,e-1,n,r),i=r.length;else for(var a=0,l=u.length;a<l;)r[i++]=u[a++];else n||(r[i++]=u)}return r}var le=c((function(t,e){var n=(e=ae(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=se(t[r],t)}return t}));function ce(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return P(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n}var fe=c((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),he=oe(fe,J,1);function de(t,e,n){var r,i,o,s,u=0;n||(n={});var a=function(){u=!1===n.leading?0:Ht(),r=null,s=t.apply(i,o),r||(i=o=null)},l=function(){var l=Ht();u||!1!==n.leading||(u=l);var c=e-(l-u);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),u=l,s=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(a,c)),s};return l.cancel=function(){clearTimeout(r),u=0,r=i=o=null},l}function pe(t,e,n){var r,i,o,s,u,a=function(){var l=Ht()-i;e>l?r=setTimeout(a,e-l):(r=null,n||(s=t.apply(u,o)),r||(o=u=null))},l=c((function(l){return u=this,o=l,i=Ht(),r||(r=setTimeout(a,e),n&&(s=t.apply(u,o))),s}));return l.cancel=function(){clearTimeout(r),r=o=u=null},l}function _e(t,e){return oe(e,t)}function ve(t){return function(){return!t.apply(this,arguments)}}function ge(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function me(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function ye(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var be=oe(ye,2);function Te(t,e,n){e=Ut(e,n);for(var r,i=G(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r}function Ee(t){return function(e,n,r){n=Ut(n,r);for(var i=V(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}var we=Ee(1),Ae=Ee(-1);function Se(t,e,n,r){for(var i=(n=Ut(n,r,1))(e),o=0,s=V(t);o<s;){var u=Math.floor((o+s)/2);n(t[u])<i?o=u+1:s=u}return o}function Ce(t,e,n){return function(r,i,o){var s=0,u=V(r);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+u,s):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(l.q.call(r,s,u),j))>=0?o+s:-1;for(o=t>0?s:u-1;o>=0&&o<u;o+=t)if(r[o]===i)return o;return-1}}var Re=Ce(1,we,Se),Oe=Ce(-1,Ae);function Ie(t,e,n){var r=(ue(t)?we:Te)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function ke(t,e){return Ie(t,kt(e))}function xe(t,e,n){var r,i;if(e=Nt(e,n),ue(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=G(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t}function Ne(t,e,n){e=Ut(e,n);for(var r=!ue(t)&&G(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var u=r?r[s]:s;o[s]=e(t[u],u,t)}return o}function Pe(t){var e=function(e,n,r,i){var o=!ue(e)&&G(e),s=(o||e).length,u=t>0?0:s-1;for(i||(r=e[o?o[u]:u],u+=t);u>=0&&u<s;u+=t){var a=o?o[u]:u;r=n(r,e[a],a,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,Nt(n,i,4),r,o)}}var De=Pe(1),Ue=Pe(-1);function Le(t,e,n){var r=[];return e=Ut(e,n),xe(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function je(t,e,n){return Le(t,ve(Ut(e)),n)}function Me(t,e,n){e=Ut(e,n);for(var r=!ue(t)&&G(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0}function qe(t,e,n){e=Ut(e,n);for(var r=!ue(t)&&G(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1}function Fe(t,e,n,r){return ue(t)||(t=ht(t)),("number"!=typeof n||r)&&(n=0),Re(t,e,n)>=0}var He=c((function(t,e,n){var r,i;return C(e)?i=e:(e=St(e),r=e.slice(0,-1),e=e[e.length-1]),Ne(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=Ct(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))}));function Be(t,e){return Ne(t,xt(e))}function We(t,e){return Le(t,kt(e))}function ze(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,a=(t=ue(t)?t:ht(t)).length;u<a;u++)null!=(r=t[u])&&r>o&&(o=r);else e=Ut(e,n),xe(t,(function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o}function Ve(t,e,n){var r,i,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,a=(t=ue(t)?t:ht(t)).length;u<a;u++)null!=(r=t[u])&&r<o&&(o=r);else e=Ut(e,n),xe(t,(function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o}var Ye=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ge(t){return t?N(t)?l.q.call(t):g(t)?t.match(Ye):ue(t)?Ne(t,It):ht(t):[]}function Ke(t,e,n){if(null==e||n)return ue(t)||(t=ht(t)),t[Ft(t.length-1)];var r=Ge(t),i=V(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var u=Ft(s,o),a=r[s];r[s]=r[u],r[u]=a}return r.slice(0,e)}function $e(t){return Ke(t,1/0)}function Je(t,e,n){var r=0;return e=Ut(e,n),Be(Ne(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")}function Xe(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=Ut(r,i),xe(n,(function(e,i){var s=r(e,i,n);t(o,e,s)})),o}}var Qe=Xe((function(t,e,n){P(t,n)?t[n].push(e):t[n]=[e]})),Ze=Xe((function(t,e,n){t[n]=e})),tn=Xe((function(t,e,n){P(t,n)?t[n]++:t[n]=1})),en=Xe((function(t,e,n){t[n?0:1].push(e)}),!0);function nn(t){return null==t?0:ue(t)?t.length:G(t).length}function rn(t,e,n){return e in n}var on=c((function(t,e){var n={},r=e[0];if(null==t)return n;C(r)?(e.length>1&&(r=Nt(r,e[1])),e=tt(t)):(r=rn,e=ae(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],u=t[s];r(u,s,t)&&(n[s]=u)}return n})),sn=c((function(t,e){var n,r=e[0];return C(r)?(r=ve(r),e.length>1&&(n=e[1])):(e=Ne(ae(e,!1,!1),String),r=function(t,n){return!Fe(e,n)}),on(t,r,n)}));function un(t,e,n){return l.q.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function an(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:un(t,t.length-e)}function ln(t,e,n){return l.q.call(t,null==e||n?1:e)}function cn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:ln(t,Math.max(0,t.length-e))}function fn(t){return Le(t,Boolean)}function hn(t,e){return ae(t,e,!1)}var dn=c((function(t,e){return e=ae(e,!0,!0),Le(t,(function(t){return!Fe(e,t)}))})),pn=c((function(t,e){return dn(t,e)}));function _n(t,e,n,r){p(e)||(r=n,n=e,e=!1),null!=n&&(n=Ut(n,r));for(var i=[],o=[],s=0,u=V(t);s<u;s++){var a=t[s],l=n?n(a,s,t):a;e&&!n?(s&&o===l||i.push(a),o=l):n?Fe(o,l)||(o.push(l),i.push(a)):Fe(i,a)||i.push(a)}return i}var vn=c((function(t){return _n(ae(t,!0,!0))}));function gn(t){for(var e=[],n=arguments.length,r=0,i=V(t);r<i;r++){var o=t[r];if(!Fe(e,o)){var s;for(s=1;s<n&&Fe(arguments[s],o);s++);s===n&&e.push(o)}}return e}function mn(t){for(var e=t&&ze(t,V).length||0,n=Array(e),r=0;r<e;r++)n[r]=Be(t,r);return n}var yn=c(mn);function bn(t,e){for(var n={},r=0,i=V(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Tn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i}function En(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(l.q.call(t,r,r+=e));return n}function wn(t,e){return t._chain?J(e).chain():e}function An(t){return xe(_t(t),(function(e){var n=J[e]=t[e];J.prototype[e]=function(){var t=[this._wrapped];return l.o.apply(t,arguments),wn(this,n.apply(J,t))}})),J}xe(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=l.a[t];J.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),wn(this,n)}})),xe(["concat","join","slice"],(function(t){var e=l.a[t];J.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),wn(this,t)}}));var Sn=J,Cn=An(r);Cn._=Cn;var Rn=Cn,On=n(19),In=n.n(On);let kn={},xn=new class{make(t,e,n){s.a.isEmpty(e._sessions)?a=e.call(t,{mediaConstraints:{audio:!0,video:!1},pcConfig:{iceServers:n.ice_servers}}):n.emit("error",{code:1002,status:"already in call"})}invite(t,e){a=t.session,"local"!=t.originator&&e.emit("inComingCall",{from:t.request.from._display_name||"unknown"}),t.request&&(a.call_id=t.request.call_id),this.initSession(a,e)}answer(t,e){s.a.isEmpty(t._sessions)?e.emit("error",{code:1002,status:"call not found"}):a.isEstablished()?e.emit("error",{code:1002,status:"call already  answered"}):a.answer({mediaConstraints:{audio:!0,video:!1},pcConfig:{iceServers:e.ice_servers}})}reject(t,e){s.a.isEmpty(t._sessions)?e.emit("error",{code:1002,status:"call not found"}):a.isEnded()?e.emit("error",{code:1002,status:"call already ended"}):a.terminate()}terminate(t,e){s.a.isEmpty(t._sessions)?e.emit("error",{code:1002,status:"call not found"}):a.isEnded()?e.emit("error",{code:1002,status:"call already ended"}):a.terminate()}hangup(t,e){s.a.isEmpty(t.sessions)?e.emit("error",{code:1002,status:"call not found"}):a.bye()}dtmf(t,e,n){if(s.a.isEmpty(e._sessions))n.emit("error",{code:1002,status:"call not found"});else if(a.isEstablished()){a.sendDTMF(t,{transportType:"RFC2833"})}else n.emit("error",{code:1002,status:"dtmf not allowed"})}hold(t,e){s.a.isEmpty(t._sessions)?e.emit("error",{code:1002,status:"call not found"}):a.isEstablished()?a.isOnHold().local?e.emit("error",{code:1002,status:"call already in hold"}):a.hold():e.emit("error",{code:1002,status:"hold not allowed"})}unhold(t,e){s.a.isEmpty(t._sessions)?e.emit("error",{code:1002,status:"call not found"}):a.isEstablished()?a.isOnHold().local?a.unhold():e.emit("error",{code:1002,status:"call not in hold"}):e.emit("error",{code:1002,status:"hold not allowed"})}mute(t,e){s.a.isEmpty(t._sessions)?e.emit("error",{code:1002,status:"call not found"}):a.isEstablished()?a.isMuted().audio?e.emit("error",{code:1002,status:"call already in mute"}):a.mute():e.emit("error",{code:1002,status:"mute not allowed"})}unmute(t,e){s.a.isEmpty(t._sessions)?e.emit("error",{code:1002,status:"call not found"}):a.isEstablished()?a.isMuted().audio?a.unmute():e.emit("error",{code:1002,status:"call not in mute"}):e.emit("error",{code:1002,status:"mute not allowed"})}onmute(t,e){return!s.a.isEmpty(t._sessions)&&(!!a.isEstablished()&&a.isMuted().audio)}onhold(t,e){return!s.a.isEmpty(t._sessions)&&(!!a.isEstablished()&&a.isOnHold().local)}getCallId(t,e){return!s.a.isEmpty(t._sessions)&&(a.isEstablished()&&a.call_id||!1)}initSession(t,e){t.on("failed",t=>{"local"==t.originator?e.emit("hangup",{code:200,status:"call hangup",call_id:e.call_id}):e.emit("ended",{code:200,status:t.cause||"call ended",call_id:e.call_id})}),t._connection&&(t._connection.onaddstream=t=>{if(e.piopiyOption.autoplay&&t.stream){var n=document.getElementById("telecmi_audio_tag");n.srcObject=t.stream,n.play()}e.emit("callStream",{code:200,status:t.stream,call_id:e.call_id})}),t.on("sending",t=>{var n="local"==t.originator?"incoming":"outgoing";e.emit("trying",{code:100,status:"trying",type:n,call_id:e.call_id})}),t.on("peerconnection",t=>{t.peerconnection.onaddstream=t=>{if(e.piopiyOption.autoplay&&t.stream){var n=document.getElementById("telecmi_audio_tag");n.srcObject=t.stream,n.play()}e.emit("callStream",{code:200,status:t.stream})}}),t.on("progress",t=>{var n="local"==t.originator?"incoming":"outgoing";e.emit("ringing",{code:183,status:"ringing",type:n,call_id:e.call_id})}),t.on("accepted",t=>{if("local"!=t.originator){t.originator;e.emit("answered",{code:200,status:"answered",call_id:e.call_id})}}),t.on("confirmed",n=>{if("local"!=n.originator){t._request&&(e.call_id=t._request.call_id);n.originator;e.emit("answered",{code:200,status:"answered",call_id:e.call_id})}}),t.on("getusermediafailed",t=>{e.emit("mediaFailed",{code:200,status:t||"user media failed",call_id:e.call_id})}),t.on("icecandidate",t=>{"srflx"===t.candidate.type&&null!==t.candidate.relatedAddress&&null!==t.candidate.relatedPort&&t.ready()}),t.on("newDTMF",t=>{var n="local"==t.originator?"incoming":"outgoing";e.emit("dtmf",{code:200,dtmf:t.dtmf._tone,type:n,call_id:e.call_id})}),t.on("hold",t=>{var n="local"==t.originator?"myself":"other";e.emit("hold",{code:200,status:"call on hold",whom:n,call_id:e.call_id})}),t.on("unhold",t=>{var n="local"==t.originator?"myself":"other";e.emit("unhold",{code:200,status:"call on active",whom:n,call_id:e.call_id})}),t.on("ended",t=>{"local"==t.originator?e.emit("hangup",{code:200,status:"call hangup",call_id:e.call_id}):e.emit("ended",{code:200,status:"call ended",call_id:e.call_id})})}},Nn=new class{start(t){Rn.isEmpty(t)||(Rn.isEmpty(t._sessions)||t.terminateSessions(),t.isRegistered()&&(t.unregister(),t.stop()))}},Pn=new In.a.WebSocketInterface("wss://sbcsg.telecmi.com");window.onbeforeunload=function(){Nn.start(kn)};var Dn=n(45),Un=n.n(Dn),Ln=n(17),jn=n(23),Mn=n(18),qn=n(11);let Fn=!1;try{Fn="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){}const Hn=Fn;var Bn=n(8);function Wn(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||Hn))return new XMLHttpRequest}catch(t){}if(!e)try{return new(Bn.a[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}var zn=n(6),Vn=n(7);function Yn(){}const Gn=null!=new Wn({xdomain:!1}).responseType;class Kn extends Ln.a{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let n=location.port;n||(n=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=Gn&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){Object(qn.b)(t,this.socket.binaryType).forEach(t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,Object(qn.d)(t,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Object(jn.a)()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const r=Object(Mn.b)(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new $n(this.uri(),t)}doWrite(t,e){const n=this.request({method:"POST",data:t});n.on("success",e),n.on("error",(t,e)=>{this.onError("xhr post error",t,e)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t,e)=>{this.onError("xhr poll error",t,e)}),this.pollXhr=t}}class $n extends zn.a{constructor(t,e){super(),Object(Vn.b)(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=Object(Vn.c)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new Wn(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof e.status?e.status:0)},0))},e.send(this.data)}catch(t){return void this.setTimeoutFn(()=>{this.onError(t)},0)}"undefined"!=typeof document&&(this.index=$n.requestsCount++,$n.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Yn,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete $n.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if($n.requestsCount=0,$n.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Jn);else if("function"==typeof addEventListener){const t="onpagehide"in Bn.a?"pagehide":"unload";addEventListener(t,Jn,!1)}function Jn(){for(let t in $n.requests)$n.requests.hasOwnProperty(t)&&$n.requests[t].abort()}const Xn={websocket:n(46).a,polling:Kn},Qn=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Zn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function tr(t){const e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=Qn.exec(t||""),o={},s=14;for(;s--;)o[Zn[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(t,e){const n=e.replace(/\/{2,9}/g,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||n.splice(0,1);"/"==e.substr(e.length-1,1)&&n.splice(n.length-1,1);return n}(0,o.path),o.queryKey=function(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,r){e&&(n[e]=r)})),n}(0,o.query),o}class er extends zn.a{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=tr(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=tr(e.host).host),Object(Vn.b)(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=Object(Mn.a)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Object.assign({},this.opts.query);e.EIO=qn.e,e.transport=t,this.id&&(e.sid=this.id);const n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Xn[t](n)}open(){let t;if(this.opts.rememberUpgrade&&er.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(t){let e=this.createTransport(t),n=!1;er.priorWebsocketSuccess=!1;const r=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",t=>{if(!n)if("pong"===t.type&&"probe"===t.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;er.priorWebsocketSuccess="websocket"===e.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const t=new Error("probe error");t.transport=e.name,this.emitReserved("upgradeError",t)}}))};function i(){n||(n=!0,l(),e.close(),e=null)}const o=t=>{const n=new Error("probe error: "+t);n.transport=e.name,i(),this.emitReserved("upgradeError",n)};function s(){o("transport closed")}function u(){o("socket closed")}function a(t){e&&t.name!==e.name&&i()}const l=()=>{e.removeListener("open",r),e.removeListener("error",o),e.removeListener("close",s),this.off("close",u),this.off("upgrading",a)};e.once("open",r),e.once("error",o),e.once("close",s),this.once("close",u),this.once("upgrading",a),e.open()}onOpen(){if(this.readyState="open",er.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let e=0;e<this.writeBuffer.length;e++){const n=this.writeBuffer[e].data;if(n&&(t+=Object(Vn.a)(n)),e>0&&t>this.maxPayload)return this.writeBuffer.slice(0,e);t+=2}return this.writeBuffer}write(t,e,n){return this.sendPacket("message",t,e,n),this}send(t,e,n){return this.sendPacket("message",t,e,n),this}sendPacket(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:t,data:e,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){er.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let n=0;const r=t.length;for(;n<r;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}er.protocol=qn.e;er.protocol;const nr="function"==typeof ArrayBuffer,rr=Object.prototype.toString,ir="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===rr.call(Blob),or="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===rr.call(File);function sr(t){return nr&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||ir&&t instanceof Blob||or&&t instanceof File}function ur(t){const e=[],n=t.data,r=t;return r.data=function t(e,n){if(!e)return e;if(sr(e)){const t={_placeholder:!0,num:n.length};return n.push(e),t}if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=t(e[i],n);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t(e[i],n));return r}return e}(n,e),r.attachments=e.length,{packet:r,buffers:e}}function ar(t,e){return t.data=function t(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=t(e[r],n);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=t(e[r],n));return e}(t.data,e),t.attachments=void 0,t}const lr=5;var cr;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(cr||(cr={}));class fr{constructor(t){this.replacer=t}encode(t){return t.type!==cr.EVENT&&t.type!==cr.ACK||!function t(e,n){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(t(e[n]))return!0;return!1}if(sr(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return!0;return!1}(t)?[this.encodeAsString(t)]:(t.type=t.type===cr.EVENT?cr.BINARY_EVENT:cr.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==cr.BINARY_EVENT&&t.type!==cr.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){const e=ur(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}}class hr extends zn.a{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===cr.BINARY_EVENT||e.type===cr.BINARY_ACK?(this.reconstructor=new dr(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!sr(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const n={type:Number(t.charAt(0))};if(void 0===cr[n.type])throw new Error("unknown packet type "+n.type);if(n.type===cr.BINARY_EVENT||n.type===cr.BINARY_ACK){const r=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const i=t.substring(r,e);if(i!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===t.charAt(e+1)){const r=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}n.nsp=t.substring(r,e)}else n.nsp="/";const r=t.charAt(e+1);if(""!==r&&Number(r)==r){const r=e+1;for(;++e;){const n=t.charAt(e);if(null==n||Number(n)!=n){--e;break}if(e===t.length)break}n.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=this.tryParse(t.substr(e));if(!hr.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case cr.CONNECT:return"object"==typeof e;case cr.DISCONNECT:return void 0===e;case cr.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case cr.EVENT:case cr.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case cr.ACK:case cr.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class dr{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=ar(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function pr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const _r=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class vr extends zn.a{constructor(t,e,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[pr(t,"open",this.onopen.bind(this)),pr(t,"packet",this.onpacket.bind(this)),pr(t,"error",this.onerror.bind(this)),pr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(_r.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const n={type:cr.EVENT,data:e,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,r=e.pop();this._registerAckCallback(t,r),n.id=t}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,e){const n=this.flags.timeout;if(void 0===n)return void(this.acks[t]=e);const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))},n);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(r),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth(t=>{this.packet({type:cr.CONNECT,data:t})}):this.packet({type:cr.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case cr.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case cr.EVENT:case cr.BINARY_EVENT:this.onevent(t);break;case cr.ACK:case cr.BINARY_ACK:this.onack(t);break;case cr.DISCONNECT:this.ondisconnect();break;case cr.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const n of e)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let n=!1;return function(...r){n||(n=!0,e.packet({type:cr.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:cr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const e=this._anyOutgoingListeners;for(let n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const e=this._anyOutgoingListeners.slice();for(const n of e)n.apply(this,t.data)}}}function gr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}gr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},gr.prototype.reset=function(){this.attempts=0},gr.prototype.setMin=function(t){this.ms=t},gr.prototype.setMax=function(t){this.max=t},gr.prototype.setJitter=function(t){this.jitter=t};class mr extends zn.a{constructor(t,e){var n;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,Object(Vn.b)(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=e.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new gr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const r=e.parser||i;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new er(this.uri,this.opts);const e=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=pr(e,"open",(function(){n.onopen(),t&&t()})),i=pr(e,"error",e=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",e),t?t(e):n.maybeReconnectOnOpen()});if(!1!==this._timeout){const t=this._timeout;0===t&&r();const n=this.setTimeoutFn(()=>{r(),e.close(),e.emit("error",new Error("timeout"))},t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(r),this.subs.push(i),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(pr(t,"ping",this.onping.bind(this)),pr(t,"data",this.ondata.bind(this)),pr(t,"error",this.onerror.bind(this)),pr(t,"close",this.onclose.bind(this)),pr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let n=this.nsps[t];return n||(n=new vr(this,t,e),this.nsps[t]=n),n}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return}this._close()}_packet(t){const e=this.encoder.encode(t);for(let n=0;n<e.length;n++)this.engine.write(e[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()}))},e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const yr={};function br(t,e){"object"==typeof t&&(e=t,t=void 0);const n=function(t,e="",n){let r=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),r=tr(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(t,(e=e||{}).path||"/socket.io"),r=n.source,i=n.id,o=n.path,s=yr[i]&&o in yr[i].nsps;let u;return e.forceNew||e["force new connection"]||!1===e.multiplex||s?u=new mr(r,e):(yr[i]||(yr[i]=new mr(r,e)),u=yr[i]),n.query&&!e.query&&(e.query=n.queryKey),u.socket(n.path,e)}Object.assign(br,{Manager:mr,Socket:vr,io:br,connect:br});class Tr{constructor(t,e){this.socket=br("https://notify.telecmi.com",{query:{token:t}});this.socket;this.socket.on("disconnect",t=>{e.ready_transfer=!1}),this.socket.on("connect_error",t=>{e.ready_transfer=!1}),this.socket.on("connect",()=>{e.ready_transfer=!0,this.socket.emit("wssip-agent-opt",{join:!0})}),this.socket.on("cmi_transfer",t=>{"init"==t.state&&e.emit("api-cmi-transfer",t),e.emit("transfer",t)}),this.socket.on("cmi_record",t=>{e.emit("record",t)})}transfer(t,e){this.socket.connected&&this.socket.emit("agent-call-transfer",{uuid:t,to:e})}cancel(t){this.socket("agent-cancel-transfer",{uuid:t})}}let Er=new class{start(t,e){if(!s.a.isEmpty(kn)){if(kn.isRegistered())return void e.emit("error",{code:1001,status:"Please logout before you login"});kn.isConnected()&&kn.stop()}!0===t.debug?In.a.debug.enable("JsSIP:*"):In.a.debug.disable("PIOPIY:*"),t.region&&(Pn=new In.a.WebSocketInterface("wss://"+t.region)),t.sockets=[Pn],t.user_agent="PIOPIYJS",t.use_preloaded_route=!0,kn=new In.a.UA(t),kn.on("registered",t=>{e.emit("login",{code:200,status:"login successfully"})}),kn.on("unregistered",t=>{e.emit("logout",{code:200,status:"logout successfully"})}),kn.on("connected",t=>{e.emit("connected",{code:200,status:"SBC connected"})}),kn.on("disconnected",t=>{e.emit("disconnected",{code:200,status:"SBC disconneced"})}),kn.on("registrationFailed",t=>{t.response&&401===t.response.status_code&&e.emit("loginFailed",{code:401,status:"invalid user"})}),kn.on("newRTCSession",t=>{"local"!=t.originator&&!s.a.isEmpty(kn._sessions)&&Object.keys(kn._sessions).length>1?t.session.terminate():(t.request&&(e.call_id=t.request.call_id),xn.invite(t,e))}),kn.start()}re_register(){kn.isRegistered()||kn.register()}stop(t){if(kn){if(!kn.isRegistered())return void t.emit("error",{code:1002,status:"Please login"});kn.isRegistered()&&(kn.unregister(),kn.stop())}}make(t,e){s.a.isEmpty(kn)||kn.isRegistered()?xn.make(t,kn,e):e.emit("error",{code:1002,status:"Please login to call"})}terminate(t){s.a.isEmpty(kn)||kn.isRegistered()?xn.terminate(kn,t):t.emit("error",{code:1002,status:"Please login "})}hangup(t){s.a.isEmpty(kn)||kn.isRegistered()?xn.hangup(kn,t):t.emit("error",{code:1002,status:"Please login "})}answer(t){s.a.isEmpty(kn)||kn.isRegistered()?xn.answer(kn,t):t.emit("error",{code:1002,status:"Please login "})}reject(t){s.a.isEmpty(kn)||kn.isRegistered()?xn.reject(kn,t):t.emit("error",{code:1002,status:"Please login "})}dtmf(t,e){s.a.isEmpty(kn)||kn.isRegistered()?!s.a.isEmpty(t)||s.a.isNumber(t)?xn.dtmf(t,kn,e):e.emit("error",{code:1005,status:"invalid dtmf type "}):e.emit("error",{code:1002,status:"Please login "})}hold(t){s.a.isEmpty(kn)||kn.isRegistered()?xn.hold(kn,t):t.emit("error",{code:1002,status:"Please login "})}unhold(t){s.a.isEmpty(kn)||kn.isRegistered()?xn.unhold(kn,t):t.emit("error",{code:1002,status:"Please login "})}mute(t){s.a.isEmpty(kn)||kn.isRegistered()?xn.mute(kn,t):t.emit("error",{code:1002,status:"Please login "})}unmute(t){s.a.isEmpty(kn)||kn.isRegistered()?xn.unmute(kn,t):t.emit("error",{code:1002,status:"Please login "})}islogedin(t){return!(s.a.isEmpty(kn)||!kn.isRegistered())}isConnected(t){return!(s.a.isEmpty(kn)||!kn.isConnected())}onmute(t){if(!s.a.isEmpty(kn))return!!kn.isRegistered()&&xn.onmute(kn,t)}onhold(t){if(!s.a.isEmpty(kn))return!!kn.isRegistered()&&xn.onhold(kn,t)}getCallId(t){if(!s.a.isEmpty(kn))return!!kn.isRegistered()&&xn.getCallId(kn,t)}},wr=new class{audioTag(){var t=document.createElement("AUDIO");t.setAttribute("autoplay",!0),t.setAttribute("hidden",!0),t.setAttribute("id","telecmi_audio_tag"),document.body.appendChild(t)}},Ar=new class{getToken(t,e,n){Un()({url:"https://piopiy.telecmi.com/v1/agentLogin",method:"post",data:{id:t,password:e},timeout:5e3}).then(async t=>{200===t.data.code?n({code:200,token:t.data.token}):n({code:407})}).catch(t=>{n({code:407})})}};e.default=class extends u.EventEmitter{constructor(t){super(),this.piopiyOption={},this.ua={};let e=t||{};u.EventEmitter.bind(this),this.name="PIOPIYJS",this.version="0.0.5",this.ice_servers=[{urls:"stun:stunind.telecmi.com"}],this.piopiyOption.debug=!!s.a.isBoolean(e.debug)&&e.debug,this.piopiyOption.autoplay=!s.a.isBoolean(e.autoplay)||e.autoplay,this.piopiyOption.autoReboot=!s.a.isBoolean(e.autoReboot)||e.autoReboot,this.piopiyOption.ringTime=s.a.isNumber(e.ringTime)?e.ringTime:60,this.piopiyOption.displayName=s.a.isString(e.name)?e.name:null,this.piopiyOption.autoplay&&wr.audioTag()}login(t,e,n){let r=this,i=n||"sbcsg.telecmi.com";if(!s.a.isString(t)||!s.a.isString(e))throw new Error("invalid user_id or password");var o={uri:t+"@"+n,authorization_user:t,password:e,debug:this.piopiyOption.debug,display_name:this.piopiyOption.displayName,no_answer_timeout:this.piopiyOption.ringTime,register:!0,region:i,session_timers:!1};Er.start(o,r),Ar.getToken(t,e,t=>{200==t.code&&(r.socketCMI=new Tr(t.token,r))})}logout(){Er.stop(this)}call(t){let e=this;s.a.isString(t)?Er.make(t,e):e.emit("error",{code:1002,status:"Invalid type to call"})}terminate(){Er.terminate(this)}reRegister(){Er.re_register()}answer(){Er.answer(this)}reject(){Er.reject(this)}sendDtmf(t){Er.dtmf(t,this)}hold(){Er.hold(this)}unHold(){Er.unhold(this)}mute(){Er.mute(this)}unMute(){Er.unmute(this)}isLogedIn(){return Er.islogedin(this)}isConnected(){return Er.isConnected(this)}onHold(){return Er.onhold(this)}onMute(){return Er.onmute(this)}transfer(t,e){this.socketCMI.transfer(t,e)}getCallId(){return Er.getCallId(this)}}}]);